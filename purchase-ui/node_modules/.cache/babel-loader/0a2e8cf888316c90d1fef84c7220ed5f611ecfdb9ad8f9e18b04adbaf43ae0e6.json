{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport \"./TableFilterTooltip.css\";\nimport { IconFunnel } from \"@consta/icons/IconFunnel\";\nimport React, { useRef, useState } from \"react\";\nimport { Transition } from \"react-transition-group\";\nimport { animateTimeout, cnMixPopoverAnimate } from \"../../../mixs/MixPopoverAnimate/MixPopoverAnimate\";\nimport { cn } from \"../../../utils/bem\";\nimport { Button } from \"../../Button/Button\";\nimport { Popover } from \"../../Popover/Popover\";\nimport { Text } from \"../../Text/Text\";\nvar cnTableFilterTooltip = cn(\"TableFilterTooltip\");\nexport var TableFilterTooltip = function (a) {\n  var b = a.field,\n    c = a.isOpened,\n    d = a.options,\n    e = a.values,\n    f = a.className,\n    g = a.children,\n    h = a.onChange,\n    i = a.onToggle,\n    j = useState(\"downRight\"),\n    k = _slicedToArray(j, 2),\n    l = k[0],\n    m = k[1],\n    n = useRef(null),\n    o = useRef(null);\n  return React.createElement(React.Fragment, null, React.createElement(Button, {\n    type: \"button\",\n    ref: n,\n    size: \"xs\",\n    iconSize: \"s\",\n    view: \"clear\",\n    onlyIcon: !0,\n    onClick: i,\n    className: cnTableFilterTooltip(\"Button\", {\n      isOpened: c\n    }, [f]),\n    iconLeft: IconFunnel\n  }), React.createElement(Transition, {\n    in: c,\n    unmountOnExit: !0,\n    nodeRef: o,\n    timeout: animateTimeout\n  }, function (a) {\n    return React.createElement(Popover, {\n      anchorRef: n,\n      possibleDirections: [\"downRight\", \"downLeft\"],\n      direction: \"downRight\",\n      offset: 4,\n      arrowOffset: 12,\n      ref: o,\n      onSetDirection: m,\n      onClickOutside: i,\n      className: cnTableFilterTooltip(\"Popover\", [cnMixPopoverAnimate({\n        animate: a,\n        direction: l\n      })])\n    }, g || React.createElement(\"div\", {\n      className: cnTableFilterTooltip(\"Content\")\n    }, React.createElement(Text, {\n      as: \"div\",\n      size: \"xs\",\n      view: \"primary\",\n      lineHeight: \"m\",\n      className: cnTableFilterTooltip(\"Title\")\n    }, \"\\u0424\\u0438\\u043B\\u044C\\u0442\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u043E \\u0443\\u0441\\u043B\\u043E\\u0432\\u0438\\u044E\"), React.createElement(\"select\", {\n      className: cnTableFilterTooltip(\"Select\"),\n      value: _toConsumableArray(e),\n      multiple: !0,\n      onChange: function onChange(a) {\n        h(b, Array.from(a.target.selectedOptions).map(function (a) {\n          return a.value;\n        }));\n      }\n    }, d.map(function (a) {\n      return React.createElement(\"option\", {\n        key: a.value,\n        className: cnTableFilterTooltip(\"Option\"),\n        value: a.value,\n        title: a.label\n      }, a.label);\n    }))));\n  }));\n};","map":{"version":3,"names":["IconFunnel","React","useRef","useState","Transition","animateTimeout","cnMixPopoverAnimate","cn","Button","Popover","Text","cnTableFilterTooltip","TableFilterTooltip","a","b","field","c","isOpened","d","options","e","values","f","className","g","children","h","onChange","i","onToggle","j","k","_slicedToArray","l","m","n","o","createElement","Fragment","type","ref","size","iconSize","view","onlyIcon","onClick","iconLeft","in","unmountOnExit","nodeRef","timeout","anchorRef","possibleDirections","direction","offset","arrowOffset","onSetDirection","onClickOutside","animate","as","lineHeight","value","_toConsumableArray","multiple","Array","from","target","selectedOptions","map","key","title","label"],"sources":["/Users/leonofv/Desktop/purchase-ui/node_modules/@consta/src/components/Table/FilterTooltip/TableFilterTooltip.tsx"],"sourcesContent":["import './TableFilterTooltip.css';\n\nimport { IconFunnel } from '@consta/icons/IconFunnel';\nimport React, { useRef, useState } from 'react';\nimport { Transition } from 'react-transition-group';\n\nimport {\n  animateTimeout,\n  cnMixPopoverAnimate,\n} from '../../../mixs/MixPopoverAnimate/MixPopoverAnimate';\nimport { cn } from '../../../utils/bem';\nimport { Button } from '../../Button/Button';\nimport { Direction, Popover } from '../../Popover/Popover';\nimport { Text } from '../../Text/Text';\n\nconst cnTableFilterTooltip = cn('TableFilterTooltip');\n\ntype Values = string[];\n\ntype Props = {\n  options: Array<{\n    value: Values[number];\n    label: string;\n  }>;\n  values: Values;\n  field: string;\n  isOpened: boolean;\n  onChange: (field: string, values: Values) => void;\n  onToggle: () => void;\n  className?: string;\n  children?: React.ReactNode;\n};\n\nexport const TableFilterTooltip: React.FC<Props> = ({\n  field,\n  isOpened,\n  options,\n  values,\n  className,\n  children,\n  onChange,\n  onToggle,\n}) => {\n  const [direction, setDirection] = useState<Direction>('downRight');\n\n  const buttonRef = useRef<HTMLButtonElement>(null);\n  const popoverRef = useRef<HTMLDivElement>(null);\n\n  return (\n    <>\n      <Button\n        type=\"button\"\n        ref={buttonRef}\n        size=\"xs\"\n        iconSize=\"s\"\n        view=\"clear\"\n        onlyIcon\n        onClick={onToggle}\n        className={cnTableFilterTooltip('Button', { isOpened }, [className])}\n        iconLeft={IconFunnel}\n      />\n      <Transition\n        in={isOpened}\n        unmountOnExit\n        nodeRef={popoverRef}\n        timeout={animateTimeout}\n      >\n        {(animate) => (\n          <Popover\n            anchorRef={buttonRef}\n            possibleDirections={['downRight', 'downLeft']}\n            direction=\"downRight\"\n            offset={4}\n            arrowOffset={12}\n            ref={popoverRef}\n            onSetDirection={setDirection}\n            onClickOutside={onToggle}\n            className={cnTableFilterTooltip('Popover', [\n              cnMixPopoverAnimate({ animate, direction }),\n            ])}\n          >\n            {children || (\n              <div className={cnTableFilterTooltip('Content')}>\n                <Text\n                  as=\"div\"\n                  size=\"xs\"\n                  view=\"primary\"\n                  lineHeight=\"m\"\n                  className={cnTableFilterTooltip('Title')}\n                >\n                  Фильтровать по условию\n                </Text>\n                <select\n                  className={cnTableFilterTooltip('Select')}\n                  value={[...values]}\n                  multiple\n                  onChange={(e): void => {\n                    onChange(\n                      field,\n                      Array.from(e.target.selectedOptions).map(\n                        (option) => option.value,\n                      ),\n                    );\n                  }}\n                >\n                  {options.map((option) => (\n                    <option\n                      key={option.value}\n                      className={cnTableFilterTooltip('Option')}\n                      value={option.value}\n                      title={option.label}\n                    >\n                      {option.label}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            )}\n          </Popover>\n        )}\n      </Transition>\n    </>\n  );\n};\n"],"mappings":";;AAAA;AAEA,SAASA,UAAT,QAA2B,0BAA3B;AACA,OAAOC,KAAP,IAAgBC,MAAhB,EAAwBC,QAAxB,QAAwC,OAAxC;AACA,SAASC,UAAT,QAA2B,wBAA3B;AAEA,SACEC,cADF,EAEEC,mBAFF;AAIA,SAASC,EAAT;AACA,SAASC,MAAT;AACA,SAAoBC,OAApB;AACA,SAASC,IAAT;AAEA,IAAMC,oBAAoB,GAAGJ,EAAE,CAAC,oBAAD,CAA/B;AAkBA,OAAO,IAAMK,kBAAmC,GAAG,SAAAA,CAAAC,CAAA,EAS7C;EAAA,IARJC,CAQI,GAAAD,CAAA,CARJE,KAQI;IAPJC,CAOI,GAAAH,CAAA,CAPJI,QAOI;IANJC,CAMI,GAAAL,CAAA,CANJM,OAMI;IALJC,CAKI,GAAAP,CAAA,CALJQ,MAKI;IAJJC,CAII,GAAAT,CAAA,CAJJU,SAII;IAHJC,CAGI,GAAAX,CAAA,CAHJY,QAGI;IAFJC,CAEI,GAAAb,CAAA,CAFJc,QAEI;IADJC,CACI,GAAAf,CAAA,CADJgB,QACI;IAAAC,CAAA,GAC8B3B,QAAQ,CAAY,WAAZ,CADtC;IAAA4B,CAAA,GAAAC,cAAA,CAAAF,CAAA;IACGG,CADH,GAAAF,CAAA;IACcG,CADd,GAAAH,CAAA;IAGEI,CAAS,GAAGjC,MAAM,CAAoB,IAApB,CAHpB;IAIEkC,CAAU,GAAGlC,MAAM,CAAiB,IAAjB,CAJrB;EAMJ,OACED,KAAA,CAAAoC,aAAA,CAAApC,KAAA,CAAAqC,QAAA,QACErC,KAAA,CAAAoC,aAAA,CAAC7B,MAAD;IACE+B,IAAI,EAAC,QADP;IAEEC,GAAG,EAAEL,CAFP;IAGEM,IAAI,EAAC,IAHP;IAIEC,QAAQ,EAAC,GAJX;IAKEC,IAAI,EAAC,OALP;IAMEC,QAAQ,IANV;IAOEC,OAAO,EAAEjB,CAPX;IAQEL,SAAS,EAAEZ,oBAAoB,CAAC,QAAD,EAAW;MAAEM,QAAQ,EAARD;IAAF,CAAX,EAAyB,CAACM,CAAD,CAAzB,CARjC;IASEwB,QAAQ,EAAE9C;EATZ,EADF,EAYEC,KAAA,CAAAoC,aAAA,CAACjC,UAAD;IACE2C,EAAA,EAAI/B,CADN;IAEEgC,aAAa,IAFf;IAGEC,OAAO,EAAEb,CAHX;IAIEc,OAAO,EAAE7C;EAJX,GAMG,UAACQ,CAAD;IAAA,OACCZ,KAAA,CAAAoC,aAAA,CAAC5B,OAAD;MACE0C,SAAS,EAAEhB,CADb;MAEEiB,kBAAkB,EAAE,CAAC,WAAD,EAAc,UAAd,CAFtB;MAGEC,SAAS,EAAC,WAHZ;MAIEC,MAAM,EAAE,CAJV;MAKEC,WAAW,EAAE,EALf;MAMEf,GAAG,EAAEJ,CANP;MAOEoB,cAAc,EAAEtB,CAPlB;MAQEuB,cAAc,EAAE7B,CARlB;MASEL,SAAS,EAAEZ,oBAAoB,CAAC,SAAD,EAAY,CACzCL,mBAAmB,CAAC;QAAEoD,OAAO,EAAP7C,CAAF;QAAWwC,SAAS,EAATpB;MAAX,CAAD,CADsB,CAAZ;IATjC,GAaGT,CAAQ,IACPvB,KAAA,CAAAoC,aAAA;MAAKd,SAAS,EAAEZ,oBAAoB,CAAC,SAAD;IAApC,GACEV,KAAA,CAAAoC,aAAA,CAAC3B,IAAD;MACEiD,EAAE,EAAC,KADL;MAEElB,IAAI,EAAC,IAFP;MAGEE,IAAI,EAAC,SAHP;MAIEiB,UAAU,EAAC,GAJb;MAKErC,SAAS,EAAEZ,oBAAoB,CAAC,OAAD;IALjC,gIADF,EAUEV,KAAA,CAAAoC,aAAA;MACEd,SAAS,EAAEZ,oBAAoB,CAAC,QAAD,CADjC;MAEEkD,KAAK,EAAAC,kBAAA,CAAM1C,CAAN,CAFP;MAGE2C,QAAQ,IAHV;MAIEpC,QAAQ,EAAE,SAAAA,SAACd,CAAD,EAAa;QACrBa,CAAQ,CACNZ,CADM,EAENkD,KAAK,CAACC,IAAN,CAAWpD,CAAC,CAACqD,MAAF,CAASC,eAApB,EAAqCC,GAArC,CACE,UAACvD,CAAD;UAAA,OAAYA,CAAM,CAACgD,KAAnB;QAAA,CADF,CAFM,CAMT;MAAA;IAXH,GAaG3C,CAAO,CAACkD,GAAR,CAAY,UAACvD,CAAD;MAAA,OACXZ,KAAA,CAAAoC,aAAA;QACEgC,GAAG,EAAExD,CAAM,CAACgD,KADd;QAEEtC,SAAS,EAAEZ,oBAAoB,CAAC,QAAD,CAFjC;QAGEkD,KAAK,EAAEhD,CAAM,CAACgD,KAHhB;QAIES,KAAK,EAAEzD,CAAM,CAAC0D;MAJhB,GAMG1D,CAAM,CAAC0D,KANV,CADW;IAAA,CAAZ,CAbH,CAVF,CAdJ,CADD;EAAA,CANH,CAZF,CA0EH;AAAA,CA1FM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}