{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(a, b) {\n  var c = Object.keys(a);\n  if (Object.getOwnPropertySymbols) {\n    var d = Object.getOwnPropertySymbols(a);\n    b && (d = d.filter(function (b) {\n      return Object.getOwnPropertyDescriptor(a, b).enumerable;\n    })), c.push.apply(c, d);\n  }\n  return c;\n}\nfunction _objectSpread(a) {\n  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys(Object(b), !0).forEach(function (c) {\n    _defineProperty(a, c, b[c]);\n  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys(Object(b)).forEach(function (c) {\n    Object.defineProperty(a, c, Object.getOwnPropertyDescriptor(b, c));\n  });\n  return a;\n}\nimport { useEffect } from \"react\";\nimport { useFlag } from \"../../../hooks/useFlag\";\nimport { defaultGetItemLabel } from \"../../SelectDeprecated/helpers\";\nexport var useSelectEventsHandler = function (a, b, c) {\n  var d = _objectSpread({}, a),\n    e = useFlag(),\n    f = _slicedToArray(e, 2),\n    g = f[0],\n    h = f[1];\n  return useEffect(function () {\n    h.on();\n  }, [d.value]), d.onFocus = function () {\n    var b;\n    h.off();\n    for (var c = arguments.length, d = Array(c), e = 0; e < c; e++) d[e] = arguments[e];\n    return null === (b = a.onFocus) || void 0 === b ? void 0 : b.call.apply(b, [a].concat(d));\n  }, d.onBlur = function () {\n    var e,\n      f,\n      h = {\n        component: \"Select\",\n        event: \"change\",\n        options: {\n          placeholder: d.placeholder,\n          label: d.value ? (null !== (e = d.getItemLabel) && void 0 !== e ? e : defaultGetItemLabel)(d.value) : void 0,\n          value: d.value,\n          pageURL: window.location.href,\n          DOMRef: c.current,\n          props: d\n        }\n      };\n    g && b(h);\n    for (var i = arguments.length, j = Array(i), k = 0; k < i; k++) j[k] = arguments[k];\n    return null === (f = a.onBlur) || void 0 === f ? void 0 : f.call.apply(f, [a].concat(j));\n  }, d;\n};","map":{"version":3,"names":["useEffect","useFlag","defaultGetItemLabel","useSelectEventsHandler","a","b","c","d","_objectSpread","e","f","_slicedToArray","g","h","on","value","onFocus","off","arguments","length","Array","call","apply","concat","onBlur","component","event","options","placeholder","label","getItemLabel","pageURL","window","location","href","DOMRef","current","props","i","j","k"],"sources":["/Users/leonofv/Desktop/purchase-ui/node_modules/@consta/src/components/EventInterceptor/propsHandlers/useSelectEventsHandler.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\n\nimport { useFlag } from '##/hooks/useFlag';\n\nimport {\n  defaultGetItemLabel,\n  SelectProps,\n} from '../../SelectDeprecated/helpers';\nimport { EventInterceptorHandler } from '../EventInterceptor';\n\nexport const useSelectEventsHandler = <PROPS extends SelectProps>(\n  props: PROPS,\n  handler: EventInterceptorHandler,\n  ref: React.RefObject<HTMLDivElement | null>,\n) => {\n  const newProps: PROPS = { ...props };\n  const [valueChanged, setValueChanged] = useFlag();\n\n  useEffect(() => {\n    setValueChanged.on();\n  }, [newProps.value]);\n\n  newProps.onFocus = (...onfocusArgs) => {\n    setValueChanged.off();\n    return props.onFocus?.(...onfocusArgs);\n  };\n\n  newProps.onBlur = (...onBlurArgs) => {\n    const value = {\n      component: 'Select' as const,\n      event: 'change',\n      options: {\n        placeholder: newProps.placeholder,\n        label: newProps.value\n          ? (newProps.getItemLabel ?? defaultGetItemLabel)(newProps.value)\n          : undefined,\n        value: newProps.value,\n        pageURL: window.location.href,\n        DOMRef: ref.current,\n        props: newProps,\n      },\n    };\n    valueChanged && handler!(value);\n    return props.onBlur?.(...onBlurArgs);\n  };\n\n  return newProps;\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,SAAgBA,SAAhB,QAAiC,OAAjC;AAEA,SAASC,OAAT;AAEA,SACEC,mBADF;AAMA,OAAO,IAAMC,sBAAsB,GAAG,SAAAA,CACpCC,CADoC,EAEpCC,CAFoC,EAGpCC,CAHoC,EAIjC;EAAA,IACGC,CAAe,GAAAC,aAAA,KAAQJ,CAAR,CADlB;IAAAK,CAAA,GAEqCR,OAAO,EAF5C;IAAAS,CAAA,GAAAC,cAAA,CAAAF,CAAA;IAEIG,CAFJ,GAAAF,CAAA;IAEkBG,CAFlB,GAAAH,CAAA;EAgCH,OA5BAV,SAAS,CAAC,YAAM;IACda,CAAe,CAACC,EAAhB,EACD;EAAA,CAFQ,EAEN,CAACP,CAAQ,CAACQ,KAAV,CAFM,CA4BT,EAxBAR,CAAQ,CAACS,OAAT,GAAmB,YAAoB;IAAA,IAAAX,CAAA;IACrCQ,CAAe,CAACI,GAAhB,EADqC;IAAA,SAAAX,CAAA,GAAAY,SAAA,CAAAC,MAAA,EAAhBZ,CAAgB,GAAAa,KAAA,CAAAd,CAAA,GAAAG,CAAA,MAAAA,CAAA,GAAAH,CAAA,EAAAG,CAAA,IAAhBF,CAAgB,CAAAE,CAAA,IAAAS,SAAA,CAAAT,CAAA;IAErC,iBAAAJ,CAAA,GAAOD,CAAK,CAACY,OAAb,gBAAAX,CAAA,YAAOA,CAAA,CAAAgB,IAAA,CAAAC,KAAA,CAAAjB,CAAA,GAAAD,CAAK,EAAAmB,MAAL,CAAmBhB,CAAnB,EACR;EAAA,CAqBD,EAnBAA,CAAQ,CAACiB,MAAT,GAAkB,YAAmB;IAAA,IAAAf,CAAA;MAAAC,CAAA;MAC7BG,CAAK,GAAG;QACZY,SAAS,EAAE,QADC;QAEZC,KAAK,EAAE,QAFK;QAGZC,OAAO,EAAE;UACPC,WAAW,EAAErB,CAAQ,CAACqB,WADf;UAEPC,KAAK,EAAEtB,CAAQ,CAACQ,KAAT,GACH,WAAAN,CAAA,GAACF,CAAQ,CAACuB,YAAV,gBAAArB,CAAA,GAAAA,CAAA,GAA0BP,mBAA1B,EAA+CK,CAAQ,CAACQ,KAAxD,CADG,SAFA;UAKPA,KAAK,EAAER,CAAQ,CAACQ,KALT;UAMPgB,OAAO,EAAEC,MAAM,CAACC,QAAP,CAAgBC,IANlB;UAOPC,MAAM,EAAE7B,CAAG,CAAC8B,OAPL;UAQPC,KAAK,EAAE9B;QARA;MAHG,CADqB;IAenCK,CAAY,IAAIP,CAAO,CAAEQ,CAAF,CAfY;IAAA,SAAAyB,CAAA,GAAApB,SAAA,CAAAC,MAAA,EAAfoB,CAAe,GAAAnB,KAAA,CAAAkB,CAAA,GAAAE,CAAA,MAAAA,CAAA,GAAAF,CAAA,EAAAE,CAAA,IAAfD,CAAe,CAAAC,CAAA,IAAAtB,SAAA,CAAAsB,CAAA;IAgBnC,iBAAA9B,CAAA,GAAON,CAAK,CAACoB,MAAb,gBAAAd,CAAA,YAAOA,CAAA,CAAAW,IAAA,CAAAC,KAAA,CAAAZ,CAAA,GAAAN,CAAK,EAAAmB,MAAL,CAAkBgB,CAAlB,EACR;EAAA,CAED,EAAOhC,CACR;AAAA,CArCM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}