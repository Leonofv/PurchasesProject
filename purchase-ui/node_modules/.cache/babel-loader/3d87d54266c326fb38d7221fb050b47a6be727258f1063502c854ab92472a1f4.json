{"ast":null,"code":"import { useEffect, useLayoutEffect } from \"react\";\nimport { getElementSize } from \"../../../hooks/useComponentSize\";\nimport { useMutableRef } from \"../../../hooks/useMutableRef\";\nexport var useSize = function (a, b, c) {\n  var d = useMutableRef(function (a) {\n      c && b(function (b) {\n        return a.height && a.width && (b.height !== a.height || b.width !== a.width) ? a : b;\n      });\n    }),\n    e = null === a || void 0 === a ? void 0 : a[a.length - 1];\n  useLayoutEffect(function () {\n    d.current(getElementSize(null === e || void 0 === e ? void 0 : e.current));\n  }, [e]), useEffect(function () {\n    var a = null === e || void 0 === e ? void 0 : e.current,\n      b = new ResizeObserver(function (a) {\n        d.current(getElementSize(a[0].target));\n      });\n    return a && b.observe(a), function () {\n      b.disconnect();\n    };\n  }, [e]);\n};","map":{"version":3,"names":["useEffect","useLayoutEffect","getElementSize","useMutableRef","useSize","a","b","c","d","height","width","e","length","current","ResizeObserver","target","observe","disconnect"],"sources":["/Users/leonofv/Documents/GitHub/PurchasesProject/purchase-ui/node_modules/@consta/src/components/ContextMenu/ContextMenuLevels/useSize.ts"],"sourcesContent":["import { useEffect, useLayoutEffect } from 'react';\n\nimport { ComponentSize, getElementSize } from '##/hooks/useComponentSize';\nimport { useMutableRef } from '##/hooks/useMutableRef';\n\nexport const useSize = (\n  refs: React.RefObject<HTMLDivElement>[],\n  setFn: React.Dispatch<React.SetStateAction<ComponentSize>>,\n  isActive?: boolean,\n) => {\n  const setRef = useMutableRef((newState: ComponentSize) => {\n    if (!isActive) {\n      return;\n    }\n\n    setFn((oldState) => {\n      if (\n        newState.height &&\n        newState.width &&\n        (oldState.height !== newState.height ||\n          oldState.width !== newState.width)\n      ) {\n        return newState;\n      }\n      return oldState;\n    });\n  });\n\n  const elementRef = refs?.[refs.length - 1];\n\n  useLayoutEffect(() => {\n    setRef.current(getElementSize(elementRef?.current));\n  }, [elementRef]);\n\n  useEffect(() => {\n    const element = elementRef?.current;\n\n    const resizeObserver = new ResizeObserver((res) => {\n      setRef.current(getElementSize(res[0].target as HTMLElement));\n    });\n\n    element && resizeObserver.observe(element);\n\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, [elementRef]);\n};\n"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,eAApB,QAA2C,OAA3C;AAEA,SAAwBC,cAAxB;AACA,SAASC,aAAT;AAEA,OAAO,IAAMC,OAAO,GAAG,SAAAA,CACrBC,CADqB,EAErBC,CAFqB,EAGrBC,CAHqB,EAIlB;EAAA,IACGC,CAAM,GAAGL,aAAa,CAAC,UAACE,CAAD,EAA6B;MACnDE,CADmD,IAKxDD,CAAK,CAAC,UAACA,CAAD,EAAc;QAAA,OAEhBD,CAAQ,CAACI,MAAT,IACAJ,CAAQ,CAACK,KADT,KAECJ,CAAQ,CAACG,MAAT,KAAoBJ,CAAQ,CAACI,MAA7B,IACCH,CAAQ,CAACI,KAAT,KAAmBL,CAAQ,CAACK,KAH9B,CAFgB,GAOTL,CAPS,GASXC,CACR;MAAA,CAVI,CAWN;IAAA,CAhB2B,CADzB;IAmBGK,CAAU,YAAGN,CAAH,eAAGA,CAAH,YAAGA,CAAI,CAAGA,CAAI,CAACO,MAAL,GAAc,CAAjB,CAnBpB;EAqBHX,eAAe,CAAC,YAAM;IACpBO,CAAM,CAACK,OAAP,CAAeX,cAAc,UAACS,CAAD,eAACA,CAAD,YAACA,CAAU,CAAEE,OAAb,CAA7B,CACD;EAAA,CAFc,EAEZ,CAACF,CAAD,CAFY,CArBZ,EAyBHX,SAAS,CAAC,YAAM;IAAA,IACRK,CAAO,YAAGM,CAAH,eAAGA,CAAH,YAAGA,CAAU,CAAEE,OADd;MAGRP,CAAc,GAAG,IAAIQ,cAAJ,CAAmB,UAACT,CAAD,EAAS;QACjDG,CAAM,CAACK,OAAP,CAAeX,cAAc,CAACG,CAAG,CAAC,CAAD,CAAH,CAAOU,MAAR,CAA7B,CACD;MAAA,CAFsB,CAHT;IASd,OAFAV,CAAO,IAAIC,CAAc,CAACU,OAAf,CAAuBX,CAAvB,CAEX,EAAO,YAAM;MACXC,CAAc,CAACW,UAAf,EACD;IAAA,CACF;EAAA,CAZQ,EAYN,CAACN,CAAD,CAZM,CAaV;AAAA,CA1CM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}