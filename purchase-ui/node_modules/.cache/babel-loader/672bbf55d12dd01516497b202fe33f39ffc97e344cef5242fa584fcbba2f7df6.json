{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nvar getPosition = function (a, b) {\n  return {\n    x: Math.round(a),\n    y: Math.round(b)\n  };\n};\nexport var getPositionsByDirection = function (a) {\n  var b = a.contentSize,\n    c = a.anchorSize,\n    d = a.position,\n    e = d.x,\n    f = d.y,\n    g = a.arrowOffset,\n    h = void 0 === g ? 0 : g,\n    i = a.offset,\n    j = void 0 === i ? 0 : i,\n    k = b.width,\n    l = b.height,\n    m = c.width,\n    n = c.height,\n    o = {\n      x: e + m / 2,\n      y: f + n / 2\n    },\n    p = e + m + j,\n    q = e - k - j,\n    r = {\n      right: o.x - h,\n      center: o.x - k / 2,\n      left: o.x - k + h\n    },\n    s = f + n + j,\n    t = f - l - j,\n    u = {\n      up: o.y - l + h,\n      center: o.y - l / 2,\n      down: o.y - h\n    },\n    v = e,\n    w = e - k + m,\n    x = f,\n    y = f - l + n;\n  return {\n    upLeft: getPosition(r.left, t),\n    upCenter: getPosition(r.center, t),\n    upRight: getPosition(r.right, t),\n    downLeft: getPosition(r.left, s),\n    downCenter: getPosition(r.center, s),\n    downRight: getPosition(r.right, s),\n    rightUp: getPosition(p, u.up),\n    rightCenter: getPosition(p, u.center),\n    rightDown: getPosition(p, u.down),\n    leftUp: getPosition(q, u.up),\n    leftCenter: getPosition(q, u.center),\n    leftDown: getPosition(q, u.down),\n    downStartLeft: getPosition(v, s),\n    downStartRight: getPosition(w, s),\n    upStartLeft: getPosition(v, t),\n    upStartRight: getPosition(w, t),\n    leftStartUp: getPosition(q, x),\n    leftStartDown: getPosition(q, y),\n    rightStartUp: getPosition(p, x),\n    rightStartDown: getPosition(p, y)\n  };\n};\nexport var getComputedPositionAndDirection = function (a) {\n  var b = a.position,\n    c = a.contentSize,\n    d = a.viewportSize,\n    e = a.anchorSize,\n    f = void 0 === e ? {\n      width: 0,\n      height: 0\n    } : e,\n    g = a.arrowOffset,\n    h = a.direction,\n    i = a.possibleDirections,\n    j = a.bannedDirections,\n    k = a.spareDirection,\n    l = a.offset,\n    m = void 0 === l ? 0 : l;\n  if (!b) return {\n    position: b,\n    direction: h\n  };\n  var n = getPositionsByDirection({\n      contentSize: c,\n      anchorSize: f,\n      position: b,\n      arrowOffset: g,\n      offset: m\n    }),\n    o = [h].concat(_toConsumableArray(i)).filter(function (a) {\n      return !j.includes(a);\n    }).find(function (a) {\n      var b = n[a],\n        e = c.width,\n        f = c.height,\n        g = b.y + f <= d.height,\n        h = 0 <= b.y,\n        i = 0 <= b.x,\n        j = b.x + e <= d.width;\n      return h && g && i && j;\n    }) || k;\n  return {\n    direction: o,\n    position: n[o]\n  };\n};","map":{"version":3,"names":["getPosition","a","b","x","Math","round","y","getPositionsByDirection","contentSize","c","anchorSize","d","position","e","f","g","arrowOffset","h","i","offset","j","k","width","l","height","m","n","o","p","q","r","right","center","left","s","t","u","up","down","v","w","upLeft","upCenter","upRight","downLeft","downCenter","downRight","rightUp","rightCenter","rightDown","leftUp","leftCenter","leftDown","downStartLeft","downStartRight","upStartLeft","upStartRight","leftStartUp","leftStartDown","rightStartUp","rightStartDown","getComputedPositionAndDirection","viewportSize","direction","possibleDirections","bannedDirections","spareDirection","concat","_toConsumableArray","filter","includes","find"],"sources":["/Users/leonofv/Desktop/purchase-ui/node_modules/@consta/src/components/Popover/helpers.ts"],"sourcesContent":["import { Direction, Position } from './Popover';\n\ntype Size = Pick<DOMRect, 'width' | 'height'>;\n\ntype PositionsByDirection = Record<Direction, NonNullable<Position>>;\n\nconst getPosition = (x: number, y: number): NonNullable<Position> => ({\n  x: Math.round(x),\n  y: Math.round(y),\n});\n\nexport const getPositionsByDirection = ({\n  contentSize,\n  anchorSize,\n  position: { x, y },\n  arrowOffset = 0,\n  offset = 0,\n}: {\n  contentSize: Size;\n  anchorSize: Size;\n  position: NonNullable<Position>;\n  arrowOffset?: number;\n  offset?: number;\n}): PositionsByDirection => {\n  const { width: contentWidth, height: contentHeight } = contentSize;\n  const { width: anchorWidth, height: anchorHeight } = anchorSize;\n  const anchorCenter = {\n    x: x + anchorWidth / 2,\n    y: y + anchorHeight / 2,\n  };\n\n  const xForRightDirections = x + anchorWidth + offset;\n  const xForLeftDirections = x - contentWidth - offset;\n  const xForVerticalDirections = {\n    right: anchorCenter.x - arrowOffset,\n    center: anchorCenter.x - contentWidth / 2,\n    left: anchorCenter.x - contentWidth + arrowOffset,\n  };\n\n  const yForDownDirections = y + anchorHeight + offset;\n  const yForUpDirections = y - contentHeight - offset;\n  const yForHorizontalDirections = {\n    up: anchorCenter.y - contentHeight + arrowOffset,\n    center: anchorCenter.y - contentHeight / 2,\n    down: anchorCenter.y - arrowOffset,\n  };\n\n  const xForStartLeftDirections = x;\n  const xForStartRightDirections = x - contentWidth + anchorWidth;\n\n  const yForStartUpDirections = y;\n  const yForStartDownDirections = y - contentHeight + anchorHeight;\n\n  return {\n    upLeft: getPosition(xForVerticalDirections.left, yForUpDirections),\n    upCenter: getPosition(xForVerticalDirections.center, yForUpDirections),\n    upRight: getPosition(xForVerticalDirections.right, yForUpDirections),\n\n    downLeft: getPosition(xForVerticalDirections.left, yForDownDirections),\n    downCenter: getPosition(xForVerticalDirections.center, yForDownDirections),\n    downRight: getPosition(xForVerticalDirections.right, yForDownDirections),\n\n    rightUp: getPosition(xForRightDirections, yForHorizontalDirections.up),\n    rightCenter: getPosition(\n      xForRightDirections,\n      yForHorizontalDirections.center,\n    ),\n    rightDown: getPosition(xForRightDirections, yForHorizontalDirections.down),\n\n    leftUp: getPosition(xForLeftDirections, yForHorizontalDirections.up),\n    leftCenter: getPosition(\n      xForLeftDirections,\n      yForHorizontalDirections.center,\n    ),\n    leftDown: getPosition(xForLeftDirections, yForHorizontalDirections.down),\n\n    downStartLeft: getPosition(xForStartLeftDirections, yForDownDirections),\n    downStartRight: getPosition(xForStartRightDirections, yForDownDirections),\n\n    upStartLeft: getPosition(xForStartLeftDirections, yForUpDirections),\n    upStartRight: getPosition(xForStartRightDirections, yForUpDirections),\n\n    leftStartUp: getPosition(xForLeftDirections, yForStartUpDirections),\n    leftStartDown: getPosition(xForLeftDirections, yForStartDownDirections),\n\n    rightStartUp: getPosition(xForRightDirections, yForStartUpDirections),\n    rightStartDown: getPosition(xForRightDirections, yForStartDownDirections),\n  };\n};\n\ntype ComputedPositionAndDirectionParams = {\n  // Координата точки, к которой крепится поповер. Для якоря — координата левой верхней точки якоря\n  position: Position;\n  contentSize: Size;\n  viewportSize: Size;\n  anchorSize?: Size;\n  offset?: number;\n  arrowOffset?: number;\n  direction: Direction;\n  spareDirection: Direction;\n  possibleDirections: readonly Direction[];\n  bannedDirections: readonly Direction[];\n};\n\nexport const getComputedPositionAndDirection = ({\n  position: initialPosition,\n  contentSize,\n  viewportSize,\n  anchorSize = { width: 0, height: 0 },\n  arrowOffset,\n  direction: initialDirection,\n  possibleDirections,\n  bannedDirections,\n  spareDirection,\n  offset = 0,\n}: ComputedPositionAndDirectionParams): {\n  direction: Direction;\n  position: Position;\n} => {\n  if (!initialPosition) {\n    return { position: initialPosition, direction: initialDirection };\n  }\n\n  const positionsByDirection = getPositionsByDirection({\n    contentSize,\n    anchorSize,\n    position: initialPosition,\n    arrowOffset,\n    offset,\n  });\n\n  const direction =\n    [initialDirection, ...possibleDirections]\n      .filter((dir) => !bannedDirections.includes(dir))\n      .find((dir) => {\n        const pos = positionsByDirection[dir];\n        const { width, height } = contentSize;\n\n        const isFittingDown = pos.y + height <= viewportSize.height;\n        const isFittingUp = pos.y >= 0;\n\n        const isFittingLeft = pos.x >= 0;\n        const isFittingRight = pos.x + width <= viewportSize.width;\n\n        return isFittingUp && isFittingDown && isFittingLeft && isFittingRight;\n      }) || spareDirection;\n\n  return {\n    direction,\n    position: positionsByDirection[direction],\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}