{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nvar _excluded = [\"isOpen\", \"onClose\", \"onOpen\", \"hasOverlay\", \"onOverlayClick\", \"onClickOutside\", \"onEsc\", \"className\", \"width\", \"position\", \"children\", \"container\", \"refsForExcludeClickOutside\", \"rootClassName\", \"afterClose\", \"style\"];\nfunction ownKeys(a, b) {\n  var c = Object.keys(a);\n  if (Object.getOwnPropertySymbols) {\n    var d = Object.getOwnPropertySymbols(a);\n    b && (d = d.filter(function (b) {\n      return Object.getOwnPropertyDescriptor(a, b).enumerable;\n    })), c.push.apply(c, d);\n  }\n  return c;\n}\nfunction _objectSpread(a) {\n  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys(Object(b), !0).forEach(function (c) {\n    _defineProperty(a, c, b[c]);\n  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys(Object(b)).forEach(function (c) {\n    Object.defineProperty(a, c, Object.getOwnPropertyDescriptor(b, c));\n  });\n  return a;\n}\nimport \"./Modal.css\";\nimport React, { useEffect, useRef } from \"react\";\nimport { Transition } from \"react-transition-group\";\nimport { PortalWithTheme, usePortalContext } from \"../PortalWithTheme\";\nimport { useTheme } from \"../Theme/Theme\";\nimport { useClickOutside } from \"../../hooks/useClickOutside\";\nimport { useGlobalKeys } from \"../../hooks/useGlobalKeys\";\nimport { animateTimeout, cnMixPopoverAnimate } from \"../../mixs/MixPopoverAnimate\";\nimport { cnMixScrollBar } from \"../../mixs/MixScrollBar\";\nimport { cn } from \"../../utils/bem\";\nvar modalPropWidth = [\"auto\"],\n  modalPropWidthDefault = modalPropWidth[0],\n  modalPropPosition = [\"center\", \"top\"],\n  modalPropPositionDefault = modalPropPosition[0],\n  cnModal = cn(\"Modal\"),\n  ContextConsumer = function (a) {\n    var b = a.onClickOutside,\n      c = a.children,\n      d = a.ignoreClicksInsideRefs,\n      e = usePortalContext(),\n      f = e.refs;\n    return useClickOutside({\n      isActive: !!b,\n      ignoreClicksInsideRefs: [].concat(_toConsumableArray(d || []), _toConsumableArray(f || [])),\n      handler: b\n    }), c;\n  };\nexport var Modal = function (a) {\n  var b = a.isOpen,\n    c = a.onClose,\n    d = a.onOpen,\n    e = a.hasOverlay,\n    f = void 0 === e || e,\n    g = a.onOverlayClick,\n    h = a.onClickOutside,\n    i = a.onEsc,\n    j = a.className,\n    k = a.width,\n    l = void 0 === k ? modalPropWidthDefault : k,\n    m = a.position,\n    n = void 0 === m ? modalPropPositionDefault : m,\n    o = a.children,\n    p = a.container,\n    q = void 0 === p ? window.document.body : p,\n    r = a.refsForExcludeClickOutside,\n    s = a.rootClassName,\n    t = a.afterClose,\n    u = a.style,\n    v = _objectWithoutProperties(a, _excluded),\n    w = useRef(null),\n    x = useRef(null),\n    y = useTheme(),\n    z = y.theme;\n  return useEffect(function () {\n    b ? null === d || void 0 === d ? void 0 : d() : null === c || void 0 === c ? void 0 : c();\n  }, [b]), useGlobalKeys({\n    Escape: function Escape(a) {\n      return b && i && i(a);\n    }\n  }), React.createElement(Transition, {\n    in: b,\n    unmountOnExit: !0,\n    nodeRef: x,\n    timeout: animateTimeout,\n    onExited: t\n  }, function (a) {\n    return React.createElement(PortalWithTheme, {\n      preset: z,\n      container: q,\n      className: cnModal({\n        hasOverlay: f\n      }, [s]),\n      ref: x,\n      style: \"number\" == typeof (null === u || void 0 === u ? void 0 : u.zIndex) ? {\n        zIndex: u.zIndex\n      } : void 0\n    }, f && React.createElement(\"div\", {\n      className: cnModal(\"Overlay\", {\n        animate: a\n      }),\n      \"aria-label\": \"Overlay\"\n    }), React.createElement(\"div\", Object.assign({}, v, {\n      style: _objectSpread(_objectSpread({}, u), {}, {\n        zIndex: void 0\n      }),\n      className: cnModal(\"Window\", {\n        width: l,\n        position: n\n      }, [cnMixPopoverAnimate({\n        animate: a\n      }), j, cnMixScrollBar()]),\n      ref: w\n    }), React.createElement(ContextConsumer, {\n      onClickOutside: h || g,\n      ignoreClicksInsideRefs: [].concat(_toConsumableArray(r || []), [w])\n    }, o)));\n  });\n};","map":{"version":3,"names":["React","useEffect","useRef","Transition","PortalWithTheme","usePortalContext","useTheme","useClickOutside","useGlobalKeys","animateTimeout","cnMixPopoverAnimate","cnMixScrollBar","cn","modalPropWidth","modalPropWidthDefault","modalPropPosition","modalPropPositionDefault","cnModal","ContextConsumer","a","b","onClickOutside","c","children","d","ignoreClicksInsideRefs","e","f","refs","isActive","concat","_toConsumableArray","handler","Modal","isOpen","onClose","onOpen","hasOverlay","g","onOverlayClick","h","i","onEsc","j","className","k","width","l","m","position","n","o","p","container","q","window","document","body","r","refsForExcludeClickOutside","s","rootClassName","t","afterClose","u","style","v","_objectWithoutProperties","_excluded","w","x","y","z","theme","Escape","createElement","in","unmountOnExit","nodeRef","timeout","onExited","preset","ref","zIndex","animate","Object","assign","_objectSpread"],"sources":["/Users/leonofv/Desktop/purchase-ui/node_modules/@consta/src/components/Modal/Modal.tsx"],"sourcesContent":["import './Modal.css';\n\nimport React, { useEffect, useRef } from 'react';\nimport { Transition } from 'react-transition-group';\n\nimport {\n  PortalWithTheme,\n  usePortalContext,\n} from '##/components/PortalWithTheme';\nimport { useTheme } from '##/components/Theme/Theme';\nimport { useClickOutside } from '##/hooks/useClickOutside';\nimport { useGlobalKeys } from '##/hooks/useGlobalKeys';\nimport { animateTimeout, cnMixPopoverAnimate } from '##/mixs/MixPopoverAnimate';\nimport { cnMixScrollBar } from '##/mixs/MixScrollBar';\nimport { cn } from '##/utils/bem';\nimport { PropsWithHTMLAttributes } from '##/utils/types/PropsWithHTMLAttributes';\n\nconst modalPropWidth = ['auto'] as const;\ntype ModalPropWidth = typeof modalPropWidth[number];\nconst modalPropWidthDefault: ModalPropWidth = modalPropWidth[0];\n\nconst modalPropPosition = ['center', 'top'] as const;\ntype ModalPropPosition = typeof modalPropPosition[number];\nconst modalPropPositionDefault: ModalPropPosition = modalPropPosition[0];\n\ntype ModalProps = PropsWithHTMLAttributes<\n  {\n    isOpen?: boolean;\n    onClose?: () => void;\n    onOpen?: () => void;\n    hasOverlay?: boolean;\n    /** @deprecated use onClickOutside */\n    onOverlayClick?: (event: MouseEvent) => void;\n    onClickOutside?: (event: MouseEvent) => void;\n    onEsc?: (event: KeyboardEvent) => void;\n    rootClassName?: string;\n    width?: ModalPropWidth;\n    position?: ModalPropPosition;\n    children?: React.ReactNode;\n    container?: HTMLDivElement | undefined;\n    afterClose?: () => void;\n    refsForExcludeClickOutside?: React.RefObject<HTMLElement>[];\n  },\n  HTMLDivElement\n>;\n\nconst cnModal = cn('Modal');\n\n/**\n * Подписчик на PortalWithThemeProvider\n * получает рефы всех вложенных порталов в модалку\n * для дальнейшего исключения их из useClickOutside\n */\nconst ContextConsumer: React.FC<{\n  onClickOutside?: (event: MouseEvent) => void;\n  ignoreClicksInsideRefs?: ReadonlyArray<React.RefObject<HTMLElement>>;\n  children: React.ReactNode;\n}> = ({ onClickOutside, children, ignoreClicksInsideRefs }) => {\n  const { refs } = usePortalContext();\n\n  useClickOutside({\n    isActive: !!onClickOutside,\n    ignoreClicksInsideRefs: [\n      ...(ignoreClicksInsideRefs || []),\n      ...(refs || []),\n    ],\n    handler: onClickOutside,\n  });\n\n  return children as React.ReactElement;\n};\n\nexport const Modal: React.FC<ModalProps> = (props) => {\n  const {\n    isOpen,\n    onClose,\n    onOpen,\n    hasOverlay = true,\n    onOverlayClick,\n    onClickOutside,\n    onEsc,\n    className,\n    width = modalPropWidthDefault,\n    position = modalPropPositionDefault,\n    children,\n    container = window.document.body,\n    refsForExcludeClickOutside,\n    rootClassName,\n    afterClose,\n    style,\n    ...otherProps\n  } = props;\n\n  const ref = useRef<HTMLDivElement | null>(null);\n  const portalRef = useRef<HTMLDivElement | null>(null);\n  const { theme } = useTheme();\n\n  useEffect(() => {\n    if (isOpen) {\n      onOpen?.();\n    } else {\n      onClose?.();\n    }\n  }, [isOpen]);\n\n  useGlobalKeys({\n    Escape: (e: KeyboardEvent) => isOpen && onEsc && onEsc(e),\n  });\n\n  return (\n    <Transition\n      in={isOpen}\n      unmountOnExit\n      nodeRef={portalRef}\n      timeout={animateTimeout}\n      onExited={afterClose}\n    >\n      {(animate) => (\n        <PortalWithTheme\n          preset={theme}\n          container={container}\n          className={cnModal({ hasOverlay }, [rootClassName])}\n          ref={portalRef}\n          style={\n            typeof style?.zIndex === 'number'\n              ? { zIndex: style.zIndex }\n              : undefined\n          }\n        >\n          {hasOverlay && (\n            <div\n              className={cnModal('Overlay', { animate })}\n              aria-label=\"Overlay\"\n            />\n          )}\n          <div\n            {...otherProps}\n            style={{\n              ...style,\n              zIndex: undefined,\n            }}\n            className={cnModal('Window', { width, position }, [\n              cnMixPopoverAnimate({ animate }),\n              className,\n              cnMixScrollBar(),\n            ])}\n            ref={ref}\n          >\n            <ContextConsumer\n              onClickOutside={onClickOutside || onOverlayClick}\n              ignoreClicksInsideRefs={[\n                ...(refsForExcludeClickOutside || []),\n                ref,\n              ]}\n            >\n              {children}\n            </ContextConsumer>\n          </div>\n        </PortalWithTheme>\n      )}\n    </Transition>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}