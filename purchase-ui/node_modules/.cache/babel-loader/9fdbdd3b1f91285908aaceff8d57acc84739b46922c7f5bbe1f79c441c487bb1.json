{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(a, b) {\n  var c = Object.keys(a);\n  if (Object.getOwnPropertySymbols) {\n    var d = Object.getOwnPropertySymbols(a);\n    b && (d = d.filter(function (b) {\n      return Object.getOwnPropertyDescriptor(a, b).enumerable;\n    })), c.push.apply(c, d);\n  }\n  return c;\n}\nfunction _objectSpread(a) {\n  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys(Object(b), !0).forEach(function (c) {\n    _defineProperty(a, c, b[c]);\n  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys(Object(b)).forEach(function (c) {\n    Object.defineProperty(a, c, Object.getOwnPropertyDescriptor(b, c));\n  });\n  return a;\n}\nfunction _createForOfIteratorHelper(a, b) {\n  var c = \"undefined\" != typeof Symbol && a[Symbol.iterator] || a[\"@@iterator\"];\n  if (!c) {\n    if (Array.isArray(a) || (c = _unsupportedIterableToArray(a)) || b && a && \"number\" == typeof a.length) {\n      c && (a = c);\n      var d = 0,\n        e = function () {};\n      return {\n        s: e,\n        n: function n() {\n          return d >= a.length ? {\n            done: !0\n          } : {\n            done: !1,\n            value: a[d++]\n          };\n        },\n        e: function (a) {\n          function b() {\n            return a.apply(this, arguments);\n          }\n          return b.toString = function () {\n            return a.toString();\n          }, b;\n        }(function (a) {\n          throw a;\n        }),\n        f: e\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var f,\n    g = !0,\n    h = !1;\n  return {\n    s: function s() {\n      c = c.call(a);\n    },\n    n: function n() {\n      var a = c.next();\n      return g = a.done, a;\n    },\n    e: function (a) {\n      function b() {\n        return a.apply(this, arguments);\n      }\n      return b.toString = function () {\n        return a.toString();\n      }, b;\n    }(function (a) {\n      h = !0, f = a;\n    }),\n    f: function f() {\n      try {\n        g || null == c[\"return\"] || c[\"return\"]();\n      } finally {\n        if (h) throw f;\n      }\n    }\n  };\n}\nfunction _unsupportedIterableToArray(a, b) {\n  if (a) {\n    if (\"string\" == typeof a) return _arrayLikeToArray(a, b);\n    var c = Object.prototype.toString.call(a).slice(8, -1);\n    return \"Object\" === c && a.constructor && (c = a.constructor.name), \"Map\" === c || \"Set\" === c ? Array.from(a) : \"Arguments\" === c || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c) ? _arrayLikeToArray(a, b) : void 0;\n  }\n}\nfunction _arrayLikeToArray(a, b) {\n  (null == b || b > a.length) && (b = a.length);\n  for (var c = 0, d = Array(b); c < b; c++) d[c] = a[c];\n  return d;\n}\nimport { useCallback, useEffect, useLayoutEffect, useMemo, useRef, useState } from \"react\";\nimport { useClickOutside } from \"../../../hooks/useClickOutside\";\nimport { useDebounce } from \"../../../hooks/useDebounce\";\nimport { useKeys } from \"../../../hooks/useKeysDepricated\";\nimport { useMutableRef } from \"../../../hooks/useMutableRef\";\nimport { usePrevious } from \"../../../hooks/usePrevious\";\nimport { useRefs } from \"../../../hooks/useRefs\";\nimport { getCountedGroups, getGroups } from \"../../../utils/getGroups\";\nimport { scrollToIndex, useHoistedState } from \"./helpers\";\nvar isMultipleParams = function (a) {\n    return a.multiple;\n  },\n  isNotMultipleParams = function (a) {\n    return !a.multiple;\n  },\n  actions = {\n    setOpen: \"setOpen\",\n    setSearch: \"setSearch\",\n    highlightIndex: \"highlightIndex\"\n  },\n  initialState = {\n    searchValue: \"\",\n    resolvedSearchValue: \"\",\n    isOpen: !1,\n    highlightedIndex: 0,\n    scrollToHighlighted: !1\n  };\nexport var isOptionForCreate = function (a) {\n  return a && Object.prototype.hasOwnProperty.call(a, \"__optionForCreate\");\n};\nexport var isNotOptionForCreate = function (a) {\n  return a && !Object.prototype.hasOwnProperty.call(a, \"__optionForCreate\");\n};\nexport var isOptionForSelectAll = function (a) {\n  return a && Object.prototype.hasOwnProperty.call(a, \"__optionSelctAll\");\n};\nexport function useSelect(a) {\n  var b = a.items,\n    c = a.dropdownRef,\n    d = a.controlRef,\n    e = a.disabled,\n    f = void 0 !== e && e,\n    g = a.multiple,\n    h = void 0 !== g && g,\n    i = a.getItemLabel,\n    j = a.getItemKey,\n    k = a.searchFunction,\n    l = a.getItemGroupKey,\n    m = a.groups,\n    n = a.selectAll,\n    o = void 0 !== n && n,\n    p = a.getGroupKey,\n    q = a.sortGroups,\n    r = a.getItemDisabled,\n    s = a.onFocus,\n    t = a.onBlur,\n    u = a.searchValue,\n    v = a.onDropdownOpen,\n    w = a.onSearchValueChange,\n    x = a.dropdownOpen,\n    y = a.ignoreOutsideClicksRefs,\n    z = useRef(null),\n    A = useState(!1),\n    B = _slicedToArray(A, 2),\n    C = B[0],\n    D = B[1],\n    E = useMemo(function () {\n      return a.value && (Array.isArray(a.value) ? a.value : [a.value]) || [];\n    }, [a.value]),\n    F = useHoistedState(initialState),\n    G = _slicedToArray(F, 2),\n    H = G[0],\n    I = H.searchValue,\n    J = H.isOpen,\n    K = H.highlightedIndex,\n    L = H.resolvedSearchValue,\n    M = H.scrollToHighlighted,\n    N = G[1],\n    O = useMutableRef(w),\n    P = function (a, b) {\n      return -1 !== i(a).toLocaleLowerCase().indexOf(b.toLocaleLowerCase());\n    },\n    Q = useMemo(function () {\n      if (L && \"\" !== L) {\n        var c = b.filter(function (a) {\n          return k ? k(a, L) : P(a, L);\n        });\n        return [c, a.onCreate && !c.length ? {\n          label: I,\n          __optionForCreate: !0\n        } : void 0];\n      }\n      return [b, void 0];\n    }, [b, L]),\n    R = _slicedToArray(Q, 2),\n    S = R[0],\n    T = R[1],\n    U = useMemo(function () {\n      var b = getCountedGroups(getGroups(S, null !== m && void 0 !== m && m.length ? l : void 0, m, p, q), isMultipleParams(a) ? a.value : [], o, j, r);\n      return T ? [T].concat(_toConsumableArray(b)) : b;\n    }, [E, o, S, m, l, r, p, q, T]),\n    V = S.length + (T ? 1 : 0) + (o ? U.length : 0),\n    W = useRefs(V, [J]),\n    X = useMemo(function () {\n      var b = !1;\n      return 0 < I.length && (b = 0 === U.filter(function (a) {\n        return isOptionForCreate(a) || 0 < a.items.length || a.group;\n      }).length && !a.onCreate), b;\n    }, [U]),\n    Y = 0 !== b.length,\n    Z = useMemo(function () {\n      return !isNotMultipleParams(a) && !!o && b.filter(function (a) {\n        return E.find(function (b) {\n          return j(b) === j(a);\n        });\n      }).length === b.length;\n    }, [o, h, E, b]),\n    $ = function () {\n      var a = 0;\n      if (0 < E.length) {\n        var b,\n          c = _createForOfIteratorHelper(U);\n        try {\n          for (c.s(); !(b = c.n()).done;) {\n            var f = b.value;\n            if (isOptionForCreate(f)) {\n              a++;\n              continue;\n            }\n            var d,\n              e = _createForOfIteratorHelper(f.items);\n            try {\n              for (e.s(); !(d = e.n()).done;) {\n                var g = d.value;\n                if (isOptionForSelectAll(g)) return a;\n                if (j(g) === j(E[0])) return a;\n                a++;\n              }\n            } catch (a) {\n              e.e(a);\n            } finally {\n              e.f();\n            }\n          }\n        } catch (a) {\n          c.e(a);\n        } finally {\n          c.f();\n        }\n      }\n      return 0;\n    },\n    aa = useCallback(function (a) {\n      N(function (b) {\n        return _objectSpread(_objectSpread({}, b), {}, {\n          isOpen: a\n        });\n      }, actions.setOpen);\n    }, [N]),\n    ba = useDebounce(function (a) {\n      N(function (b) {\n        return b.resolvedSearchValue === a ? b : _objectSpread(_objectSpread({}, b), {}, {\n          resolvedSearchValue: a\n        });\n      }, actions.setSearch);\n    }, 300),\n    ca = useCallback(function (a) {\n      N(function (b) {\n        return b.searchValue === a ? b : _objectSpread(_objectSpread({}, b), {}, {\n          searchValue: a || \"\"\n        });\n      }, actions.setSearch), ba(a || \"\");\n    }, [N, ba]),\n    da = usePrevious(J),\n    ea = useCallback(function (a, b) {\n      N(function (c) {\n        var d = Math.min(Math.max(0, \"function\" == typeof a ? a(c.highlightedIndex) : a), V - 1);\n        return c.highlightedIndex === d ? c : _objectSpread(_objectSpread({}, c), {}, {\n          highlightedIndex: d,\n          scrollToHighlighted: b\n        });\n      }, actions.highlightIndex);\n    }, [S, N, T]);\n  useLayoutEffect(function () {\n    if (null !== E && !da && J) {\n      var a = $();\n      0 < S.length && scrollToIndex(a, c, W, function () {\n        return ea(0, !1);\n      });\n    }\n  });\n  var fa = function (b, c) {\n      if (b.stopPropagation(), isMultipleParams(a)) {\n        var d,\n          e = null === (d = a.value) || void 0 === d ? void 0 : d.filter(function (a) {\n            return j(a) !== j(c);\n          }),\n          f = null !== e && void 0 !== e && e.length ? e : null;\n        a.onChange(f, {\n          e: b\n        });\n      }\n    },\n    ga = function (b, c) {\n      if (!(r && r(c))) {\n        if (isMultipleParams(a)) {\n          var d = E.some(function (a) {\n              return j(a) === j(c);\n            }) ? E.filter(function (a) {\n              return j(a) !== j(c);\n            }) : [].concat(_toConsumableArray(E), [c]),\n            e = null !== d && void 0 !== d && d.length ? d : null;\n          a.onChange(e, {\n            e: b\n          });\n        }\n        isNotMultipleParams(a) && (a.onChange(c, {\n          e: b\n        }), aa(!1), ca(\"\"));\n      }\n    },\n    ha = function (b) {\n      var c = b.e,\n        d = b.items;\n      if (isMultipleParams(a)) {\n        var e = r ? d.filter(function (a) {\n            return !r(a);\n          }) : d,\n          f = [],\n          g = [];\n        if (E.forEach(function (a) {\n          e.find(function (b) {\n            return j(a) === j(b);\n          }) ? f.push(a) : g.push(a);\n        }), f.length === e.length) a.onChange(g, {\n          e: c\n        });else {\n          var h = [].concat(g, _toConsumableArray(e));\n          a.onChange(h, {\n            e: c\n          });\n        }\n      }\n    },\n    ia = function (b, c) {\n      a.onCreate && a.onCreate(c, {\n        e: b,\n        label: c\n      }), aa(!1), ca(\"\");\n    },\n    ja = function (b) {\n      if (isMultipleParams(a)) {\n        var c = null === E || void 0 === E ? void 0 : E.filter(function (a) {\n            return null === r || void 0 === r ? void 0 : r(a);\n          }),\n          d = c && 0 < c.length ? c : null;\n        a.onChange(d, {\n          e: b\n        });\n      }\n      isNotMultipleParams(a) && a.onChange(null, {\n        e: b\n      }), ca(\"\");\n    },\n    ka = function (a, b) {\n      b.preventDefault(), f || aa(!0), ea(function (a) {\n        return a - 1;\n      }, !0);\n    },\n    la = function (a, b) {\n      b.preventDefault(), f || aa(!0), ea(function (a) {\n        return a + 1;\n      }, !0);\n    },\n    ma = useKeys({\n      ArrowUp: ka,\n      ArrowDown: la,\n      PageUp: ka,\n      PageDown: la,\n      Home: ka,\n      End: la,\n      Enter: function Enter(a, b) {\n        if (J) {\n          (I || S[K]) && b.preventDefault();\n          var c = function (a) {\n              var b,\n                c = 0,\n                d = _createForOfIteratorHelper(U);\n              try {\n                for (d.s(); !(b = d.n()).done;) {\n                  var e = b.value;\n                  if (isOptionForCreate(e)) return c++, [void 0, e];\n                  if (e.items.length + c > a) return [e, e.items[a - c]];\n                  c += e.items.length;\n                }\n              } catch (a) {\n                d.e(a);\n              } finally {\n                d.f();\n              }\n              return [void 0, void 0];\n            },\n            d = c(K),\n            e = _slicedToArray(d, 2),\n            f = e[0],\n            g = e[1];\n          if (isOptionForCreate(g)) return void ia(b, g.label);\n          if (isOptionForSelectAll(g)) {\n            var h;\n            return void ha({\n              e: b,\n              items: null !== (h = null === f || void 0 === f ? void 0 : f.items.filter(function (a) {\n                return !isOptionForSelectAll(a);\n              })) && void 0 !== h ? h : []\n            });\n          }\n          g && ga(b, g);\n        } else aa(!0);\n      },\n      Escape: function Escape() {\n        aa(!1);\n      },\n      Tab: function Tab(a, b) {\n        J && (b.preventDefault(), aa(!1));\n      },\n      Backspace: function Backspace(a, b) {\n        I || (h ? fa(b, E[E.length - 1]) : ja(b));\n      }\n    });\n  useClickOutside({\n    isActive: J,\n    ignoreClicksInsideRefs: [c, d].concat(_toConsumableArray(y || [])),\n    handler: function handler() {\n      aa(!1);\n    }\n  }), useEffect(function () {\n    f && aa(!1);\n  }, [f]), useEffect(function () {\n    var a = $();\n    ea(a, !0);\n  }, [ea]), useEffect(function () {\n    0 < S.length && M && scrollToIndex(K, c, W, function () {\n      return ea(0, !1);\n    });\n  }, [K]);\n  return useEffect(function () {\n    ca(u);\n  }, [u]), useEffect(function () {\n    var a;\n    null === (a = c.current) || void 0 === a ? void 0 : a.scrollTo({\n      top: 0\n    });\n  }, [L]), useEffect(function () {\n    null === v || void 0 === v ? void 0 : v(J);\n  }, [J]), useEffect(function () {\n    var a;\n    null === (a = O.current) || void 0 === a ? void 0 : a.call(O, I);\n  }, [I]), useEffect(function () {\n    aa(x || !1);\n  }, [x]), {\n    isOpen: J,\n    isFocused: C,\n    highlightedIndex: K,\n    visibleItems: U,\n    highlightIndex: ea,\n    getOptionProps: function getOptionProps(a) {\n      var b = a.index,\n        c = a.item,\n        d = a.keyPrefix;\n      if (isOptionForCreate(c)) return {\n        onClick: function onClick(a) {\n          ia(a, c.label);\n        },\n        onMouseEnter: function onMouseEnter() {\n          ea(b, !1);\n        },\n        active: !1,\n        hovered: b === K,\n        key: \"\".concat(d, \"__optionForCreate\")\n      };\n      if (isOptionForSelectAll(c)) {\n        var f = function () {\n          var a,\n            b = _createForOfIteratorHelper(U);\n          try {\n            for (b.s(); !(a = b.n()).done;) {\n              var e = a.value;\n              if (isOptionForCreate(e)) break;\n              if (e.key === c.groupKey) {\n                var d;\n                return null !== (d = null === e || void 0 === e ? void 0 : e.items.filter(function (a) {\n                  return !isOptionForSelectAll(a);\n                })) && void 0 !== d ? d : [];\n              }\n            }\n          } catch (a) {\n            b.e(a);\n          } finally {\n            b.f();\n          }\n          return [];\n        };\n        return {\n          onClick: function onClick(a) {\n            ha({\n              e: a,\n              items: f()\n            });\n          },\n          onMouseEnter: function onMouseEnter() {\n            ea(b, !1);\n          },\n          active: !1,\n          hovered: b === K,\n          key: \"\".concat(d, \"__optionForSelectAll\")\n        };\n      }\n      var e = j(c);\n      return {\n        onClick: function onClick(a) {\n          ga(a, c);\n        },\n        onMouseEnter: function onMouseEnter() {\n          ea(b, !1);\n        },\n        active: !!E.find(function (a) {\n          return j(a) === e;\n        }),\n        hovered: b === K,\n        key: \"\".concat(d).concat(e)\n      };\n    },\n    handleInputFocus: function handleInputFocus(a) {\n      f || (!C && D(!0), \"function\" == typeof s && s(a));\n    },\n    handleInputBlur: function handleInputBlur(a) {\n      if (J) {\n        var b;\n        return void (null === (b = z.current) || void 0 === b ? void 0 : b.focus());\n      }\n      C && D(!1), \"function\" == typeof t && t(a);\n    },\n    handleToggleDropdown: function handleToggleDropdown() {\n      if (J) aa(!1), D(!1);else {\n        var a;\n        aa(!0), D(!0), null === (a = z.current) || void 0 === a ? void 0 : a.focus();\n      }\n    },\n    handleInputClick: function handleInputClick() {\n      if (f || aa(!J), h) {\n        var a;\n        null === (a = z.current) || void 0 === a ? void 0 : a.focus();\n      }\n    },\n    inputRef: z,\n    getKeyProps: ma,\n    handleInputChange: function handleInputChange(a) {\n      f || !h && 0 < E.length || (ca(a.target.value), aa(!0));\n    },\n    searchValue: I,\n    clearValue: ja,\n    getHandleRemoveValue: function getHandleRemoveValue(a) {\n      return function (b) {\n        return fa(b, a);\n      };\n    },\n    notFound: X,\n    hasItems: Y,\n    allItemsSelected: Z,\n    optionsRefs: W\n  };\n}","map":{"version":3,"names":["useCallback","useEffect","useLayoutEffect","useMemo","useRef","useState","useClickOutside","useDebounce","useKeys","useMutableRef","usePrevious","useRefs","getCountedGroups","getGroups","scrollToIndex","useHoistedState","isMultipleParams","a","multiple","isNotMultipleParams","actions","setOpen","setSearch","highlightIndex","initialState","searchValue","resolvedSearchValue","isOpen","highlightedIndex","scrollToHighlighted","isOptionForCreate","Object","prototype","hasOwnProperty","call","isNotOptionForCreate","isOptionForSelectAll","useSelect","b","items","c","dropdownRef","d","controlRef","e","disabled","f","g","h","i","getItemLabel","j","getItemKey","k","searchFunction","l","getItemGroupKey","m","groups","n","selectAll","o","p","getGroupKey","q","sortGroups","r","getItemDisabled","s","onFocus","t","onBlur","u","v","onDropdownOpen","w","onSearchValueChange","x","dropdownOpen","y","ignoreOutsideClicksRefs","z","A","B","_slicedToArray","C","D","E","value","Array","isArray","F","G","H","I","J","K","L","M","N","O","P","searchFunctionDefault","toLocaleLowerCase","indexOf","Q","filter","onCreate","length","label","__optionForCreate","R","S","T","U","concat","_toConsumableArray","V","W","X","group","Y","Z","find","$","getSelectedOptionIndex","_createForOfIteratorHelper","done","aa","_objectSpread","ba","ca","da","ea","Math","min","max","fa","removeValue","stopPropagation","onChange","ga","some","ha","onChangeAll","forEach","push","ia","ja","clearValue","ka","ArrowUp","preventDefault","la","ArrowDown","ma","PageUp","PageDown","Home","End","Enter","getData","Escape","Tab","Backspace","isActive","ignoreClicksInsideRefs","handler","current","scrollTo","top","isFocused","visibleItems","getOptionProps","index","item","keyPrefix","onClick","onMouseEnter","active","hovered","key","getItems","groupKey","handleInputFocus","handleInputBlur","focus","handleToggleDropdown","handleInputClick","inputRef","getKeyProps","handleInputChange","target","getHandleRemoveValue","notFound","hasItems","allItemsSelected","optionsRefs"],"sources":["/Users/leonofv/Documents/GitHub/PurchasesProject/purchase-ui/node_modules/@consta/src/components/SelectComponents/useSelect/useSelect.ts"],"sourcesContent":["import React, {\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\n\nimport { useClickOutside } from '##/hooks/useClickOutside';\nimport { useDebounce } from '##/hooks/useDebounce';\nimport { KeyHandler, useKeys } from '##/hooks/useKeysDepricated';\nimport { useMutableRef } from '##/hooks/useMutableRef';\nimport { usePrevious } from '##/hooks/usePrevious';\nimport { useRefs } from '##/hooks/useRefs';\nimport {\n  CountedGroup,\n  getCountedGroups,\n  getGroups,\n  SelectAllItem,\n} from '##/utils/getGroups';\n\nimport { scrollToIndex, useHoistedState } from './helpers';\n\ntype IndexForHighlight = number | ((oldIndex: number) => number);\n\ntype Group<ITEM, GROUP> = {\n  items: ITEM[];\n  key: string | number;\n  group?: GROUP;\n};\ntype GetItemGroupKey<ITEM> = (item: ITEM) => string | number | undefined;\ntype GetGroupKey<GROUP> = (item: GROUP) => string | number | undefined;\ntype SortGroups<ITEM, GROUP> = (\n  a: Group<ITEM, GROUP>,\n  b: Group<ITEM, GROUP>,\n) => number;\n\ntype OnChangeProp<ITEM, MULTIPLE extends boolean> = (\n  value: (MULTIPLE extends true ? ITEM[] : ITEM) | null,\n  props: {\n    e: React.SyntheticEvent;\n  },\n) => void;\n\ntype ValueProp<ITEM, MULTIPLE extends boolean> =\n  | (MULTIPLE extends true ? ITEM[] : ITEM)\n  | null\n  | undefined;\n\nexport type OptionForCreate = {\n  label: string;\n  __optionForCreate: boolean;\n};\n\nexport type SelectProps<ITEM, GROUP, MULTIPLE extends boolean> = {\n  getItemGroupKey?: GetItemGroupKey<ITEM> | undefined;\n  getGroupKey?: GetGroupKey<GROUP>;\n  sortGroups?: SortGroups<ITEM, GROUP>;\n  groups?: GROUP[];\n  items: ITEM[];\n  dropdownRef: React.MutableRefObject<HTMLDivElement | null>;\n  controlRef: React.MutableRefObject<HTMLDivElement | null>;\n  disabled?: boolean;\n  selectAll?: boolean;\n  getItemLabel: (item: ITEM) => string;\n  getItemKey: (item: ITEM) => string | number;\n  getItemDisabled?: (item: ITEM) => boolean | undefined;\n  searchFunction?: (item: ITEM, searchValue: string) => boolean;\n  onCreate?: (\n    label: string,\n    props: { e: React.SyntheticEvent; label: string },\n  ) => void;\n  onFocus?: React.FocusEventHandler<HTMLInputElement>;\n  onBlur?: React.FocusEventHandler<HTMLInputElement>;\n  multiple: boolean;\n  searchValue?: string;\n  onChange: OnChangeProp<ITEM, MULTIPLE>;\n  value: ValueProp<ITEM, MULTIPLE>;\n  dropdownOpen?: boolean;\n  onDropdownOpen?: (isOpen: boolean) => void;\n  onSearchValueChange?: (value: string) => void;\n  ignoreOutsideClicksRefs?: ReadonlyArray<React.RefObject<HTMLElement>>;\n};\n\nexport type OptionProps<ITEM> = {\n  index: number;\n  item: ITEM | OptionForCreate | SelectAllItem;\n  keyPrefix: string | number;\n};\n\nexport type GetOptionPropsResult = {\n  onClick: (e: React.SyntheticEvent) => void;\n  onMouseEnter: (e: React.SyntheticEvent) => void;\n  active: boolean;\n  hovered: boolean;\n  key: string | number;\n};\n\nconst isMultipleParams = <ITEM, GROUP>(\n  params: SelectProps<ITEM, GROUP, boolean>,\n): params is SelectProps<ITEM, GROUP, true> => {\n  return params.multiple;\n};\n\nconst isNotMultipleParams = <ITEM, GROUP>(\n  params: SelectProps<ITEM, GROUP, boolean>,\n): params is SelectProps<ITEM, GROUP, false> => {\n  return !params.multiple;\n};\n\nconst actions = {\n  setOpen: 'setOpen',\n  setSearch: 'setSearch',\n  highlightIndex: 'highlightIndex',\n};\n\nconst initialState = {\n  searchValue: '',\n  resolvedSearchValue: '',\n  isOpen: false,\n  highlightedIndex: 0,\n  scrollToHighlighted: false,\n};\n\nexport const isOptionForCreate = <ITEM, GROUP>(\n  params: OptionForCreate | Group<ITEM, GROUP> | ITEM,\n): params is OptionForCreate => {\n  return (\n    params && Object.prototype.hasOwnProperty.call(params, '__optionForCreate')\n  );\n};\n\nexport const isNotOptionForCreate = <ITEM, GROUP>(\n  params: OptionForCreate | Group<ITEM, GROUP>,\n): params is Group<ITEM, GROUP> => {\n  return (\n    params && !Object.prototype.hasOwnProperty.call(params, '__optionForCreate')\n  );\n};\n\nexport const isOptionForSelectAll = <ITEM>(\n  params: SelectAllItem | ITEM,\n): params is SelectAllItem => {\n  return (\n    params && Object.prototype.hasOwnProperty.call(params, '__optionSelctAll')\n  );\n};\n\nexport function useSelect<ITEM, GROUP, MULTIPLE extends boolean>(\n  params: SelectProps<ITEM, GROUP, MULTIPLE>,\n) {\n  const {\n    items,\n    dropdownRef,\n    controlRef,\n    disabled = false,\n    multiple = false,\n    getItemLabel,\n    getItemKey,\n    searchFunction,\n    getItemGroupKey,\n    groups,\n    selectAll = false,\n    getGroupKey,\n    sortGroups,\n    getItemDisabled,\n    onFocus,\n    onBlur,\n    searchValue: searchValueProp,\n    onDropdownOpen,\n    onSearchValueChange,\n    dropdownOpen,\n    ignoreOutsideClicksRefs,\n  } = params;\n\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const [isFocused, setIsFocused] = useState(false);\n\n  const value = useMemo(\n    () =>\n      (params.value &&\n        (Array.isArray(params.value) ? params.value : [params.value])) ||\n      [],\n    [params.value],\n  );\n\n  const [\n    {\n      searchValue,\n      isOpen,\n      highlightedIndex,\n      resolvedSearchValue,\n      scrollToHighlighted,\n    },\n    setState,\n  ] = useHoistedState(initialState);\n\n  const onSearchValueChangeRef = useMutableRef(onSearchValueChange);\n\n  const searchFunctionDefault = (item: ITEM, searchValue: string) =>\n    getItemLabel(item)\n      .toLocaleLowerCase()\n      .indexOf(searchValue.toLocaleLowerCase()) !== -1;\n\n  const [filteredOptions, optionForCreate] = useMemo(() => {\n    if (resolvedSearchValue && resolvedSearchValue !== '') {\n      const fiteredOptions = items.filter((item) =>\n        searchFunction\n          ? searchFunction(item, resolvedSearchValue)\n          : searchFunctionDefault(item, resolvedSearchValue),\n      );\n\n      const optionForCreate: OptionForCreate = {\n        label: searchValue,\n        __optionForCreate: true,\n      };\n\n      return [\n        fiteredOptions,\n        params.onCreate && !fiteredOptions.length ? optionForCreate : undefined,\n      ] as const;\n    }\n    return [items, undefined] as const;\n  }, [items, resolvedSearchValue]);\n\n  const visibleItems = useMemo(() => {\n    const resultGroups = getCountedGroups(\n      getGroups(\n        filteredOptions,\n        groups?.length ? getItemGroupKey : undefined,\n        groups,\n        getGroupKey,\n        sortGroups,\n      ),\n      isMultipleParams(params) ? params.value : [],\n      selectAll,\n      getItemKey,\n      getItemDisabled,\n    );\n\n    return optionForCreate ? [optionForCreate, ...resultGroups] : resultGroups;\n  }, [\n    value,\n    selectAll,\n    filteredOptions,\n    groups,\n    getItemGroupKey,\n    getItemDisabled,\n    getGroupKey,\n    sortGroups,\n    optionForCreate,\n  ]);\n\n  const maxHighlightIndex =\n    // колличество опций\n    filteredOptions.length +\n    // кнопка для создания\n    (optionForCreate ? 1 : 0) +\n    // кнопки выбрать все\n    (selectAll ? visibleItems.length : 0);\n\n  const optionsRefs = useRefs<HTMLDivElement>(maxHighlightIndex, [isOpen]);\n\n  const notFound = useMemo(() => {\n    let flag = false;\n    if (searchValue.length > 0) {\n      flag =\n        visibleItems.filter(\n          (group) =>\n            isOptionForCreate(group) || group.items.length > 0 || group.group,\n        ).length === 0 && !params.onCreate;\n    }\n    return flag;\n  }, [visibleItems]);\n\n  const hasItems = items.length !== 0;\n\n  const allItemsSelected = useMemo(() => {\n    if (isNotMultipleParams(params)) {\n      return false;\n    }\n    if (selectAll) {\n      return (\n        items.filter((el) =>\n          value.find((item) => getItemKey(item) === getItemKey(el)),\n        ).length === items.length\n      );\n    }\n\n    return false;\n  }, [selectAll, multiple, value, items]);\n\n  const getSelectedOptionIndex = (): number => {\n    let index = 0;\n    if (value.length > 0) {\n      for (const group of visibleItems) {\n        if (isOptionForCreate(group)) {\n          index++;\n          // eslint-disable-next-line no-continue\n          continue;\n        }\n        for (const item of group.items) {\n          if (isOptionForSelectAll(item)) {\n            return index;\n          }\n          if (getItemKey(item) === getItemKey(value[0])) {\n            return index;\n          }\n          index++;\n        }\n      }\n    }\n\n    return 0;\n  };\n\n  // Actions\n\n  const setOpen = useCallback(\n    (newIsOpen: boolean) => {\n      setState(\n        (old) => ({\n          ...old,\n          isOpen: newIsOpen,\n        }),\n        actions.setOpen,\n      );\n    },\n    [setState],\n  );\n\n  const setResolvedSearch = useDebounce((value: string) => {\n    setState((old) => {\n      if (old.resolvedSearchValue === value) {\n        return old;\n      }\n      return {\n        ...old,\n        resolvedSearchValue: value,\n      };\n    }, actions.setSearch);\n  }, 300);\n\n  const setSearch = useCallback(\n    (value: string | undefined) => {\n      setState((old) => {\n        if (old.searchValue === value) {\n          return old;\n        }\n        return {\n          ...old,\n          searchValue: value || '',\n        };\n      }, actions.setSearch);\n      setResolvedSearch(value || '');\n    },\n    [setState, setResolvedSearch],\n  );\n\n  const prevIsOpen = usePrevious(isOpen);\n\n  const highlightIndex = useCallback(\n    (indexForHighlight: IndexForHighlight, scrollToHighlighted: boolean) => {\n      setState((old) => {\n        const newIndex = Math.min(\n          Math.max(\n            0,\n            typeof indexForHighlight === 'function'\n              ? indexForHighlight(old.highlightedIndex)\n              : indexForHighlight,\n          ),\n          maxHighlightIndex - 1,\n        );\n\n        if (old.highlightedIndex === newIndex) {\n          return old;\n        }\n\n        return {\n          ...old,\n          highlightedIndex: newIndex,\n          scrollToHighlighted,\n        };\n      }, actions.highlightIndex);\n    },\n    [filteredOptions, setState, optionForCreate],\n  );\n\n  useLayoutEffect(() => {\n    if (value !== null && !prevIsOpen && isOpen) {\n      const currentHighlightIndex = getSelectedOptionIndex();\n      if (filteredOptions.length > 0) {\n        scrollToIndex(currentHighlightIndex, dropdownRef, optionsRefs, () =>\n          highlightIndex(0, false),\n        );\n      }\n    }\n  });\n\n  const removeValue = (e: React.SyntheticEvent, valueItem: ITEM) => {\n    e.stopPropagation();\n    if (isMultipleParams(params)) {\n      const newValue = params.value?.filter(\n        (item) => getItemKey(item) !== getItemKey(valueItem),\n      );\n      const val = newValue?.length ? newValue : null;\n      params.onChange(val, {\n        e,\n      });\n    }\n  };\n\n  const onChange = (e: React.SyntheticEvent, item: ITEM) => {\n    if (getItemDisabled && getItemDisabled(item)) {\n      return;\n    }\n    if (isMultipleParams(params)) {\n      const newValue = value.some(\n        (value) => getItemKey(value) === getItemKey(item),\n      )\n        ? value.filter((value) => getItemKey(value) !== getItemKey(item))\n        : [...value, item];\n      const val = newValue?.length ? newValue : null;\n      params.onChange(val, { e });\n    }\n    if (isNotMultipleParams(params)) {\n      params.onChange(item, { e });\n      setOpen(false);\n      setSearch('');\n    }\n  };\n\n  const onChangeAll = (parametrs: {\n    e: React.SyntheticEvent;\n    items: ITEM[];\n  }) => {\n    const { e, items } = parametrs;\n    if (isMultipleParams(params)) {\n      const nonDisabledItems = getItemDisabled\n        ? items.filter((item) => !getItemDisabled(item))\n        : items;\n\n      const currentGroupValues: ITEM[] = [];\n      const withoutGroupValues: ITEM[] = [];\n      value.forEach((el) => {\n        if (\n          nonDisabledItems.find((item) => getItemKey(el) === getItemKey(item))\n        ) {\n          currentGroupValues.push(el);\n        } else {\n          withoutGroupValues.push(el);\n        }\n      });\n      if (currentGroupValues.length === nonDisabledItems.length) {\n        params.onChange(withoutGroupValues, { e });\n      } else {\n        const val = [...withoutGroupValues, ...nonDisabledItems];\n        params.onChange(val, {\n          e,\n        });\n      }\n    }\n  };\n\n  const onCreate = (e: React.SyntheticEvent, label: string) => {\n    params.onCreate && params.onCreate(label, { e, label });\n    setOpen(false);\n    setSearch('');\n  };\n\n  // Handlers\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>): void => {\n    if (!disabled && !(!multiple && value.length > 0)) {\n      setSearch(e.target.value);\n      setOpen(true);\n    }\n  };\n\n  const handleInputClick = (): void => {\n    !disabled && setOpen(!isOpen);\n\n    if (multiple) {\n      inputRef.current?.focus();\n    }\n  };\n\n  const clearValue = (e: React.SyntheticEvent) => {\n    if (isMultipleParams(params)) {\n      const results = value?.filter((item) => getItemDisabled?.(item));\n      const val = results && results.length > 0 ? results : null;\n      params.onChange(val, {\n        e,\n      });\n    }\n    if (isNotMultipleParams(params)) {\n      params.onChange(null, { e });\n    }\n    setSearch('');\n  };\n\n  const getHandleRemoveValue = (item: ITEM) => (e: React.SyntheticEvent) =>\n    removeValue(e, item);\n\n  // Prop Getters\n\n  const ArrowUp: KeyHandler = (_, e): void => {\n    e.preventDefault();\n    !disabled && setOpen(true);\n    highlightIndex((old) => old - 1, true);\n  };\n\n  const ArrowDown: KeyHandler = (_, e): void => {\n    e.preventDefault();\n    !disabled && setOpen(true);\n    highlightIndex((old) => old + 1, true);\n  };\n\n  const Enter: KeyHandler = (_, e): void => {\n    if (isOpen) {\n      if (searchValue || filteredOptions[highlightedIndex]) {\n        e.preventDefault();\n      }\n\n      const getData = (\n        index: number,\n      ): [\n        CountedGroup<ITEM, GROUP> | undefined,\n        SelectAllItem | OptionForCreate | ITEM | undefined,\n      ] => {\n        let couter = 0;\n        for (const group of visibleItems) {\n          if (isOptionForCreate(group)) {\n            couter++;\n            return [undefined, group];\n          }\n          if (group.items.length + couter > index) {\n            return [group, group.items[index - couter]];\n          }\n          couter += group.items.length;\n        }\n        return [undefined, undefined];\n      };\n\n      const [group, item] = getData(highlightedIndex);\n\n      if (isOptionForCreate(item)) {\n        onCreate(e, item.label);\n        return;\n      }\n\n      if (isOptionForSelectAll(item)) {\n        onChangeAll({\n          e,\n          items:\n            (group?.items.filter(\n              (el) => !isOptionForSelectAll(el),\n            ) as ITEM[]) ?? [],\n        });\n        return;\n      }\n\n      if (item) {\n        onChange(e, item);\n      }\n    } else {\n      setOpen(true);\n    }\n  };\n\n  const Escape: KeyHandler = (): void => {\n    setOpen(false);\n  };\n\n  const Tab: KeyHandler = (_, e): void => {\n    if (isOpen) {\n      e.preventDefault();\n      setOpen(false);\n    }\n  };\n\n  const Backspace: KeyHandler = (_, e): void => {\n    if (searchValue) {\n      return;\n    }\n    if (multiple) {\n      removeValue(e, value[value.length - 1]);\n    } else {\n      clearValue(e);\n    }\n  };\n\n  const getKeyProps = useKeys({\n    ArrowUp,\n    ArrowDown,\n    PageUp: ArrowUp,\n    PageDown: ArrowDown,\n    Home: ArrowUp,\n    End: ArrowDown,\n    Enter,\n    Escape,\n    Tab,\n    Backspace,\n  });\n\n  const getOptionProps = ({\n    index,\n    item,\n    keyPrefix,\n  }: OptionProps<ITEM>): GetOptionPropsResult => {\n    if (isOptionForCreate(item)) {\n      return {\n        onClick: (e: React.SyntheticEvent) => {\n          onCreate(e, item.label);\n        },\n        onMouseEnter: () => {\n          highlightIndex(index, false);\n        },\n        active: false,\n        hovered: index === highlightedIndex,\n        key: `${keyPrefix}__optionForCreate`,\n      };\n    }\n    if (isOptionForSelectAll(item)) {\n      const getItems = (): ITEM[] => {\n        for (const group of visibleItems) {\n          if (isOptionForCreate(group)) {\n            break;\n          }\n          if (group.key === item.groupKey) {\n            return (\n              (group?.items.filter(\n                (el) => !isOptionForSelectAll(el),\n              ) as ITEM[]) ?? []\n            );\n          }\n        }\n        return [];\n      };\n      return {\n        onClick: (e: React.SyntheticEvent) => {\n          onChangeAll({ e, items: getItems() });\n        },\n        onMouseEnter: () => {\n          highlightIndex(index, false);\n        },\n        active: false,\n        hovered: index === highlightedIndex,\n        key: `${keyPrefix}__optionForSelectAll`,\n      };\n    }\n    const key = getItemKey(item);\n    return {\n      onClick: (e: React.SyntheticEvent) => {\n        onChange(e, item);\n      },\n      onMouseEnter: () => {\n        highlightIndex(index, false);\n      },\n      active: Boolean(value.find((item) => getItemKey(item) === key)),\n      hovered: index === highlightedIndex,\n      key: `${keyPrefix}${key}`,\n    };\n  };\n\n  useClickOutside({\n    isActive: isOpen,\n    ignoreClicksInsideRefs: [\n      dropdownRef,\n      controlRef,\n      ...(ignoreOutsideClicksRefs || []),\n    ],\n    handler: () => {\n      setOpen(false);\n    },\n  });\n\n  useEffect(() => {\n    if (disabled) {\n      setOpen(false);\n    }\n  }, [disabled]);\n\n  useEffect(() => {\n    const currentHighlightIndex = getSelectedOptionIndex();\n    highlightIndex(currentHighlightIndex, true);\n  }, [highlightIndex]);\n\n  useEffect(() => {\n    if (filteredOptions.length > 0 && scrollToHighlighted) {\n      scrollToIndex(highlightedIndex, dropdownRef, optionsRefs, () =>\n        highlightIndex(0, false),\n      );\n    }\n  }, [highlightedIndex]);\n\n  const handleInputFocus = (e: React.FocusEvent<HTMLInputElement>): void => {\n    if (!disabled) {\n      if (!isFocused) {\n        setIsFocused(true);\n      }\n      if (typeof onFocus === 'function') {\n        onFocus(e);\n      }\n    }\n  };\n\n  const handleInputBlur = (e: React.FocusEvent<HTMLInputElement>): void => {\n    if (isOpen) {\n      inputRef.current?.focus();\n      return;\n    }\n\n    if (isFocused) {\n      setIsFocused(false);\n    }\n\n    if (typeof onBlur === 'function') {\n      onBlur(e);\n    }\n  };\n\n  const handleToggleDropdown = (): void => {\n    if (isOpen) {\n      setOpen(false);\n      setIsFocused(false);\n    } else {\n      setOpen(true);\n      setIsFocused(true);\n      inputRef.current?.focus();\n    }\n  };\n\n  useEffect(() => {\n    setSearch(searchValueProp);\n  }, [searchValueProp]);\n\n  useEffect(() => {\n    dropdownRef.current?.scrollTo({ top: 0 });\n  }, [resolvedSearchValue]);\n\n  useEffect(() => {\n    onDropdownOpen?.(isOpen);\n  }, [isOpen]);\n\n  useEffect(() => {\n    onSearchValueChangeRef.current?.(searchValue);\n  }, [searchValue]);\n\n  useEffect(() => {\n    setOpen(dropdownOpen || false);\n  }, [dropdownOpen]);\n\n  return {\n    isOpen,\n    isFocused,\n    highlightedIndex,\n    visibleItems,\n    highlightIndex,\n    getOptionProps,\n    handleInputFocus,\n    handleInputBlur,\n    handleToggleDropdown,\n    handleInputClick,\n    inputRef,\n    getKeyProps,\n    handleInputChange,\n    searchValue,\n    clearValue,\n    getHandleRemoveValue,\n    notFound,\n    hasItems,\n    allItemsSelected,\n    optionsRefs,\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}