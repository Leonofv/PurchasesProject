{"ast":null,"code":"import { useEffect, useRef } from \"react\";\nexport var useGlobalKeys = function (a) {\n  var b = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : \"keyup\",\n    c = useRef({});\n  useEffect(function () {\n    c.current = a;\n  }, [a]), useEffect(function () {\n    var a = function (a) {\n      var b = c.current,\n        d = b[a.code] || b[a.key];\n      d && d(a);\n    };\n    return document.addEventListener(b, a), function () {\n      document.removeEventListener(b, a);\n    };\n  }, [b]);\n};","map":{"version":3,"names":["useEffect","useRef","useGlobalKeys","a","b","arguments","length","c","current","handler","d","code","key","document","addEventListener","removeEventListener"],"sources":["/Users/leonofv/Documents/GitHub/PurchasesProject/purchase-ui/node_modules/@consta/src/hooks/useGlobalKeys/useGlobalKeys.ts"],"sourcesContent":["import { useEffect, useRef } from 'react';\n\nimport { KeyCode } from '##/utils/types/KeyCode';\n\nexport type KeyHandlers = Partial<\n  Record<KeyCode, (e: KeyboardEvent) => void>\n> & {\n  [key: string]: (e: KeyboardEvent) => void;\n};\n\nexport type EventType = 'keyup' | 'keydown';\n\nexport const useGlobalKeys = (\n  keyHandlers: KeyHandlers,\n  eventType: EventType = 'keyup',\n) => {\n  const keyHandlersRef = useRef<KeyHandlers>({});\n\n  useEffect(() => {\n    keyHandlersRef.current = keyHandlers;\n  }, [keyHandlers]);\n\n  useEffect(() => {\n    const handler = (e: KeyboardEvent) => {\n      const { current } = keyHandlersRef;\n\n      const userHandler =\n        current[e.code as KeyCode] || current[e.key as KeyCode];\n      userHandler && userHandler(e);\n    };\n\n    document.addEventListener(eventType, handler);\n\n    return () => {\n      document.removeEventListener(eventType, handler);\n    };\n  }, [eventType]);\n};\n"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,MAApB,QAAkC,OAAlC;AAYA,OAAO,IAAMC,aAAa,GAAG,SAAAA,CAC3BC,CAD2B,EAGxB;EAAA,IADHC,CACG,OAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,iBAAAA,SAAA,MADoB,OACpB;IACGE,CAAc,GAAGN,MAAM,CAAc,EAAd,CAD1B;EAGHD,SAAS,CAAC,YAAM;IACdO,CAAc,CAACC,OAAf,GAAyBL,CAC1B;EAAA,CAFQ,EAEN,CAACA,CAAD,CAFM,CAHN,EAOHH,SAAS,CAAC,YAAM;IACd,IAAMG,CAAO,GAAG,SAAAM,CAACN,CAAD,EAAsB;MAAA,IAC5BC,CAD4B,GAChBG,CADgB,CAC5BC,OAD4B;QAG9BE,CAAW,GACfN,CAAO,CAACD,CAAC,CAACQ,IAAH,CAAP,IAA8BP,CAAO,CAACD,CAAC,CAACS,GAAH,CAJH;MAKpCF,CAAW,IAAIA,CAAW,CAACP,CAAD,CAC3B;IAAA,CAND;IAUA,OAFAU,QAAQ,CAACC,gBAAT,CAA0BV,CAA1B,EAAqCD,CAArC,CAEA,EAAO,YAAM;MACXU,QAAQ,CAACE,mBAAT,CAA6BX,CAA7B,EAAwCD,CAAxC,CACD;IAAA,CACF;EAAA,CAdQ,EAcN,CAACC,CAAD,CAdM,CAeV;AAAA,CAzBM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}