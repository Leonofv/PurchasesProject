{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nfunction _createForOfIteratorHelper(a, b) {\n  var c = \"undefined\" != typeof Symbol && a[Symbol.iterator] || a[\"@@iterator\"];\n  if (!c) {\n    if (Array.isArray(a) || (c = _unsupportedIterableToArray(a)) || b && a && \"number\" == typeof a.length) {\n      c && (a = c);\n      var d = 0,\n        e = function () {};\n      return {\n        s: e,\n        n: function n() {\n          return d >= a.length ? {\n            done: !0\n          } : {\n            done: !1,\n            value: a[d++]\n          };\n        },\n        e: function e(a) {\n          throw a;\n        },\n        f: e\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var f,\n    g = !0,\n    h = !1;\n  return {\n    s: function s() {\n      c = c.call(a);\n    },\n    n: function n() {\n      var a = c.next();\n      return g = a.done, a;\n    },\n    e: function e(a) {\n      h = !0, f = a;\n    },\n    f: function f() {\n      try {\n        g || null == c[\"return\"] || c[\"return\"]();\n      } finally {\n        if (h) throw f;\n      }\n    }\n  };\n}\nfunction _unsupportedIterableToArray(a, b) {\n  if (a) {\n    if (\"string\" == typeof a) return _arrayLikeToArray(a, b);\n    var c = Object.prototype.toString.call(a).slice(8, -1);\n    return \"Object\" === c && a.constructor && (c = a.constructor.name), \"Map\" === c || \"Set\" === c ? Array.from(a) : \"Arguments\" === c || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c) ? _arrayLikeToArray(a, b) : void 0;\n  }\n}\nfunction _arrayLikeToArray(a, b) {\n  (null == b || b > a.length) && (b = a.length);\n  for (var c = 0, d = Array(b); c < b; c++) d[c] = a[c];\n  return d;\n}\nexport var defaultGroupKey = \"no-group\";\nvar getItemGroupKeyGuard = function (a, b, c) {\n  var d = a(b);\n  return \"undefined\" == typeof d ? c : d;\n};\nexport function getGroups(a, b, c, d, e) {\n  var f = 5 < arguments.length && void 0 !== arguments[5] ? arguments[5] : defaultGroupKey;\n  if (\"function\" != typeof b) return [{\n    items: a,\n    key: f,\n    groupIndex: -1\n  }];\n  var g,\n    h = [],\n    i = _createForOfIteratorHelper(a);\n  try {\n    var j = function _loop() {\n      var a = g.value,\n        e = getItemGroupKeyGuard(b, a, f),\n        i = h.findIndex(function (a) {\n          return a.key === e;\n        });\n      if (0 <= i) h[i].items.push(a);else {\n        var j = d && c ? c.findIndex(function (a) {\n            return d(a) === e;\n          }) : -1,\n          k = {\n            key: e,\n            items: [a],\n            groupIndex: j,\n            group: c ? c[j] : void 0\n          };\n        h.push(k);\n      }\n    };\n    for (i.s(); !(g = i.n()).done;) j();\n  } catch (a) {\n    i.e(a);\n  } finally {\n    i.f();\n  }\n  return \"function\" == typeof e ? h.sort(e) : c && d && h.sort(function (c, a) {\n    return c.groupIndex > a.groupIndex ? 1 : c.groupIndex < a.groupIndex ? -1 : 0;\n  }), h;\n}\nexport function getCountedGroups(a, b, c, d, e) {\n  var f = _toConsumableArray(a);\n  return c && a.forEach(function (a, c) {\n    var g = 0,\n      h = 0;\n    a.items.forEach(function (a) {\n      e && null !== e && void 0 !== e && e(a) || (g += 1), null !== b && void 0 !== b && b.find(function (b) {\n        return d(a) === d(b);\n      }) && (h += 1);\n    }), f[c].items = [{\n      __optionSelctAll: !0,\n      totalCount: g,\n      groupKey: a.key,\n      checkedCount: h\n    }].concat(_toConsumableArray(f[c].items));\n  }), f;\n}","map":{"version":3,"names":["defaultGroupKey","getItemGroupKeyGuard","a","b","c","d","getGroups","e","f","arguments","length","items","key","groupIndex","g","h","i","_createForOfIteratorHelper","j","_loop","value","findIndex","push","k","group","s","n","done","sort","getCountedGroups","_toConsumableArray","forEach","find","__optionSelctAll","totalCount","groupKey","checkedCount","concat"],"sources":["/Users/leonofv/Documents/GitHub/PurchasesProject/purchase-ui/node_modules/@consta/src/utils/getGroups.ts"],"sourcesContent":["export type Group<ITEM, GROUP> = {\n  items: ITEM[];\n  key: string | number;\n  group?: GROUP;\n  groupIndex: number;\n};\n\nexport type SelectAllItem = {\n  checkedCount: number;\n  totalCount: number;\n  groupKey: string | number;\n  __optionSelctAll: true;\n};\n\nexport type CountedGroup<ITEM, GROUP> = Omit<Group<ITEM, GROUP>, 'items'> & {\n  items: Array<SelectAllItem | ITEM>;\n};\n\ntype GetItemGroupKey<ITEM> = (item: ITEM) => string | number | undefined;\ntype GetItemKey<ITEM> = (item: ITEM) => string | number | undefined;\ntype GetItemDisabled<ITEM> = (item: ITEM) => boolean | undefined;\ntype GetGroupKey<GROUP> = (item: GROUP) => string | number | undefined;\ntype SortGroups<ITEM, GROUP> = (\n  a: Group<ITEM, GROUP>,\n  b: Group<ITEM, GROUP>,\n) => number;\ntype GetGroupsResult<ITEM, GROUP> = Group<ITEM, GROUP>[];\n\nexport const defaultGroupKey = 'no-group';\n\nconst getItemGroupKeyGuard = <ITEM>(\n  getter: GetGroupKey<ITEM>,\n  item: ITEM,\n  noGroupKey: string,\n) => {\n  const key = getter(item);\n\n  return typeof key === 'undefined' ? noGroupKey : key;\n};\n\n/**\n * @param items список который нужно групировать\n * @param getItemGroupKey признак принадлежности к группе\n * @param groups список групп\n * @param getGroupKey результат функции должен вернуть уникальный ключ группы\n * @param sortGroups сортировка групп\n * @param noGroupKey ключ группы которая создаться если item небудет принадлежать ни к одной из групп\n */\n\nexport function getGroups<ITEM, GROUP>(\n  items: ITEM[],\n  getItemGroupKey: GetItemGroupKey<ITEM> | undefined,\n  groups: GROUP[] | undefined,\n  getGroupKey: GetGroupKey<GROUP> | undefined,\n  sortGroups: SortGroups<ITEM, GROUP> | undefined,\n  noGroupKey = defaultGroupKey,\n): GetGroupsResult<ITEM, GROUP> {\n  if (typeof getItemGroupKey !== 'function') {\n    return [{ items, key: noGroupKey, groupIndex: -1 }];\n  }\n\n  const resultGroups: GetGroupsResult<ITEM, GROUP> = [];\n  for (const item of items) {\n    const itemGroupKey = getItemGroupKeyGuard(\n      getItemGroupKey,\n      item,\n      noGroupKey,\n    );\n    const resultGroupIndex = resultGroups.findIndex(\n      (group) => group.key === itemGroupKey,\n    );\n\n    if (resultGroupIndex >= 0) {\n      resultGroups[resultGroupIndex].items.push(item);\n    } else {\n      const groupIndex =\n        getGroupKey && groups\n          ? groups.findIndex((g) => getGroupKey(g) === itemGroupKey)\n          : -1;\n\n      const resultGroup: Group<ITEM, GROUP> = {\n        key: itemGroupKey,\n        items: [item],\n        groupIndex,\n        group: groups ? groups[groupIndex] : undefined,\n      };\n\n      resultGroups.push(resultGroup);\n    }\n  }\n\n  if (typeof sortGroups === 'function') {\n    resultGroups.sort(sortGroups);\n  } else if (groups && getGroupKey) {\n    resultGroups.sort((a, b) => {\n      if (a.groupIndex > b.groupIndex) return 1;\n      if (a.groupIndex < b.groupIndex) return -1;\n      return 0;\n    });\n  }\n\n  return resultGroups;\n}\n\nexport function getCountedGroups<ITEM, GROUP>(\n  groups: GetGroupsResult<ITEM, GROUP>,\n  values: ITEM[] | undefined | null,\n  selectAll: boolean,\n  getItemKey: GetItemKey<ITEM>,\n  getItemDisabled?: GetItemDisabled<ITEM>,\n): CountedGroup<ITEM, GROUP>[] {\n  const copyGroups: CountedGroup<ITEM, GROUP>[] = [...groups];\n  if (selectAll) {\n    groups.forEach((group, index) => {\n      let totalCount = 0;\n      let checkedCount = 0;\n      group.items.forEach((item) => {\n        if (!(getItemDisabled && getItemDisabled?.(item))) {\n          totalCount += 1;\n        }\n        if (values?.find((el) => getItemKey(item) === getItemKey(el))) {\n          checkedCount += 1;\n        }\n      });\n      copyGroups[index].items = [\n        {\n          __optionSelctAll: true,\n          totalCount,\n          groupKey: group.key,\n          checkedCount,\n        },\n        ...copyGroups[index].items,\n      ];\n    });\n  }\n  return copyGroups;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}