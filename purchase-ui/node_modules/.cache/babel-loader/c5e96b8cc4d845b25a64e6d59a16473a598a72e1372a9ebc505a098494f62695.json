{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nfunction _createForOfIteratorHelper(a, b) {\n  var c = \"undefined\" != typeof Symbol && a[Symbol.iterator] || a[\"@@iterator\"];\n  if (!c) {\n    if (Array.isArray(a) || (c = _unsupportedIterableToArray(a)) || b && a && \"number\" == typeof a.length) {\n      c && (a = c);\n      var d = 0,\n        e = function () {};\n      return {\n        s: e,\n        n: function n() {\n          return d >= a.length ? {\n            done: !0\n          } : {\n            done: !1,\n            value: a[d++]\n          };\n        },\n        e: function (a) {\n          function b() {\n            return a.apply(this, arguments);\n          }\n          return b.toString = function () {\n            return a.toString();\n          }, b;\n        }(function (a) {\n          throw a;\n        }),\n        f: e\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var f,\n    g = !0,\n    h = !1;\n  return {\n    s: function s() {\n      c = c.call(a);\n    },\n    n: function n() {\n      var a = c.next();\n      return g = a.done, a;\n    },\n    e: function (a) {\n      function b() {\n        return a.apply(this, arguments);\n      }\n      return b.toString = function () {\n        return a.toString();\n      }, b;\n    }(function (a) {\n      h = !0, f = a;\n    }),\n    f: function f() {\n      try {\n        g || null == c[\"return\"] || c[\"return\"]();\n      } finally {\n        if (h) throw f;\n      }\n    }\n  };\n}\nfunction _unsupportedIterableToArray(a, b) {\n  if (a) {\n    if (\"string\" == typeof a) return _arrayLikeToArray(a, b);\n    var c = Object.prototype.toString.call(a).slice(8, -1);\n    return \"Object\" === c && a.constructor && (c = a.constructor.name), \"Map\" === c || \"Set\" === c ? Array.from(a) : \"Arguments\" === c || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c) ? _arrayLikeToArray(a, b) : void 0;\n  }\n}\nfunction _arrayLikeToArray(a, b) {\n  (null == b || b > a.length) && (b = a.length);\n  for (var c = 0, d = Array(b); c < b; c++) d[c] = a[c];\n  return d;\n}\nimport { isNotNil } from \"../../utils/type-guards\";\nfunction isMultiple(a) {\n  return a.multiple;\n}\nfunction isNotMultiple(a) {\n  return !a.multiple;\n}\nfunction formatValue(a, b, c) {\n  var d = {};\n  if (!isNotNil(a) && !Array.isArray(a)) return d;\n  var e = c ? a : [a];\n  if (e && 0 < e.length) {\n    var f,\n      g = _createForOfIteratorHelper(e);\n    try {\n      for (g.s(); !(f = g.n()).done;) {\n        var h = f.value;\n        d[b(h)] = h;\n      }\n    } catch (a) {\n      g.e(a);\n    } finally {\n      g.f();\n    }\n  }\n  return d;\n}\nexport function useChoiceGroup(a) {\n  var b = formatValue(a.value, a.getKey, a.multiple),\n    c = function (c) {\n      return Object.prototype.hasOwnProperty.call(b, a.getKey(c));\n    };\n  return {\n    getOnChange: function getOnChange(b) {\n      return function (d) {\n        if (isMultiple(a)) {\n          var e, f;\n          if (c(b)) {\n            var h = a.value || [];\n            f = h.filter(function (c) {\n              return a.getKey(c) !== a.getKey(b);\n            }), 0 === f.length && (f = null);\n          } else f = a.value ? _toConsumableArray(a.value) : [], f.push(b);\n          null === (e = a.callBack) || void 0 === e ? void 0 : e.call(a, f, {\n            e: d\n          });\n        }\n        if (isNotMultiple(a)) {\n          var g;\n          null === (g = a.callBack) || void 0 === g ? void 0 : g.call(a, b, {\n            e: d\n          });\n        }\n      };\n    },\n    getChecked: c\n  };\n}","map":{"version":3,"names":["isNotNil","isMultiple","a","multiple","isNotMultiple","formatValue","b","c","d","Array","isArray","e","length","f","g","_createForOfIteratorHelper","s","n","done","h","value","useChoiceGroup","getKey","getChecked","Object","prototype","hasOwnProperty","call","getOnChange","filter","_toConsumableArray","push","callBack"],"sources":["/Users/leonofv/Desktop/purchase-ui/node_modules/@consta/src/hooks/useChoiceGroup/useChoiceGroup.tsx"],"sourcesContent":["import { isNotNil } from '##/utils/type-guards';\n\ntype GetKey<ITEM> = (item: ITEM) => string | number;\n\ntype GetOnChange<ITEM, EVENT> = (item: ITEM) => (e: EVENT) => void;\n\ntype GetChecked<ITEM> = (item: ITEM) => boolean;\n\ntype UseChoiceGroupValues<ITEM, EVENT> = {\n  getOnChange: GetOnChange<ITEM, EVENT>;\n  getChecked: GetChecked<ITEM>;\n};\n\nexport type CallbackWithMultiple<ITEM, EVENT> = (\n  value: ITEM[] | null,\n  props: {\n    e: EVENT;\n  },\n) => void;\n\nexport type CallbackWithoutMultiple<ITEM, EVENT> = (\n  value: ITEM,\n  props: {\n    e: EVENT;\n  },\n) => void;\n\ntype PropsWithMultiple<ITEM, EVENT> = {\n  multiple: true;\n  value: ITEM[] | null;\n  callBack?: CallbackWithMultiple<ITEM, EVENT>;\n};\n\ntype PropsWithoutMultiple<ITEM, EVENT> = {\n  multiple: false;\n  value: ITEM | null;\n  callBack?: CallbackWithoutMultiple<ITEM, EVENT>;\n};\n\ntype CommonProps<ITEM> = {\n  getKey: GetKey<ITEM>;\n};\n\ntype UseChoiceGroupProps<ITEM, EVENT> = CommonProps<ITEM> &\n  (PropsWithMultiple<ITEM, EVENT> | PropsWithoutMultiple<ITEM, EVENT>);\n\ntype FormatedItems<ITEM> = { [value: string]: ITEM };\n\nfunction isMultiple<ITEM, EVENT>(\n  params: UseChoiceGroupProps<ITEM, EVENT>,\n): params is CommonProps<ITEM> & PropsWithMultiple<ITEM, EVENT> {\n  return params.multiple;\n}\n\nfunction isNotMultiple<ITEM, EVENT>(\n  params: UseChoiceGroupProps<ITEM, EVENT>,\n): params is CommonProps<ITEM> & PropsWithoutMultiple<ITEM, EVENT> {\n  return !params.multiple;\n}\n\nfunction formatValue<ITEM>(\n  valueProp: ITEM | ITEM[] | null,\n  getKey: GetKey<ITEM>,\n  multiple?: boolean,\n) {\n  const valueByKey: FormatedItems<ITEM> = {};\n  if (!isNotNil(valueProp) && !Array.isArray(valueProp)) {\n    return valueByKey;\n  }\n  const value = multiple ? (valueProp as ITEM[]) : [valueProp as ITEM];\n  if (value && value.length > 0) {\n    for (const item of value) {\n      valueByKey[getKey(item)] = item;\n    }\n  }\n  return valueByKey;\n}\n\nexport function useChoiceGroup<ITEM, EVENT>(\n  props: UseChoiceGroupProps<ITEM, EVENT>,\n): UseChoiceGroupValues<ITEM, EVENT> {\n  const formatedValue = formatValue(props.value, props.getKey, props.multiple);\n\n  const getChecked: GetChecked<ITEM> = (item) =>\n    Object.prototype.hasOwnProperty.call(formatedValue, props.getKey(item));\n\n  const getOnChange: GetOnChange<ITEM, EVENT> = (selectedItem) => (e) => {\n    if (isMultiple(props)) {\n      let newValue: ITEM[] | null;\n\n      if (getChecked(selectedItem)) {\n        const value = props.value || [];\n        newValue = value.filter(\n          (item) => props.getKey(item) !== props.getKey(selectedItem),\n        );\n        if (newValue.length === 0) {\n          newValue = null;\n        }\n      } else {\n        newValue = props.value ? [...props.value] : [];\n        newValue.push(selectedItem);\n      }\n      props.callBack?.(newValue, { e });\n    }\n\n    if (isNotMultiple(props)) {\n      props.callBack?.(selectedItem, { e });\n    }\n  };\n\n  return {\n    getOnChange,\n    getChecked,\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}