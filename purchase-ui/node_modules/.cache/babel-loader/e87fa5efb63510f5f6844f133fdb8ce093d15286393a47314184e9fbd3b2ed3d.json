{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { useMutableRef } from \"../useMutableRef\";\nimport { isEq } from \"../../utils/object/isEq\";\nimport { mapping } from \"./mapping\";\nexport var useComponentBreakpoints = function (a) {\n  var b = a.ref,\n    c = a.map,\n    d = a.isActive,\n    e = useMutableRef(c),\n    f = useCallback(function () {\n      var a;\n      return mapping((null === b || void 0 === b || null === (a = b.current) || void 0 === a ? void 0 : a.getBoundingClientRect().width) || 0, e.current);\n    }, []),\n    g = useState(f),\n    h = _slicedToArray(g, 2),\n    i = h[0],\n    j = h[1];\n  return useEffect(function () {\n    f();\n    var a = new ResizeObserver(function () {\n      var a = f();\n      j(function (b) {\n        return isEq(b, a) ? b : a;\n      });\n    });\n    return d && (null === b || void 0 === b ? void 0 : b.current) && a.observe(b.current), function () {\n      a.disconnect();\n    };\n  }, [null === b || void 0 === b ? void 0 : b.current, d]), i;\n};","map":{"version":3,"names":["useCallback","useEffect","useState","useMutableRef","isEq","mapping","useComponentBreakpoints","a","b","ref","c","map","d","isActive","e","f","current","getBoundingClientRect","width","g","h","_slicedToArray","i","j","ResizeObserver","observe","disconnect"],"sources":["/Users/leonofv/Documents/GitHub/PurchasesProject/purchase-ui/node_modules/@consta/src/hooks/useBreakpoints/useComponentBreakpoints.ts"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react';\n\nimport { useMutableRef } from '##/hooks/useMutableRef';\nimport { isEq } from '##/utils/object/isEq';\n\nimport { mapping } from './mapping';\nimport { Map, Returned } from './types';\n\nexport const useComponentBreakpoints = <POINTS extends string>({\n  ref,\n  map,\n  isActive,\n}: {\n  ref?: React.RefObject<HTMLElement | SVGGraphicsElement>;\n  map: Map<POINTS>;\n  isActive?: boolean;\n}) => {\n  const mapRef = useMutableRef(map);\n  const mappingRun = useCallback(\n    () =>\n      mapping(ref?.current?.getBoundingClientRect().width || 0, mapRef.current),\n    [],\n  );\n  const [points, setSetPoints] = useState<Returned<POINTS>>(mappingRun);\n\n  useEffect(() => {\n    mappingRun();\n\n    const resizeObserver = new ResizeObserver(() => {\n      const newPoints = mappingRun();\n      setSetPoints((state) => (isEq(state, newPoints) ? state : newPoints));\n    });\n\n    isActive && ref?.current && resizeObserver.observe(ref.current);\n\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, [ref?.current, isActive]);\n\n  return points;\n};\n"],"mappings":";AAAA,SAASA,WAAT,EAAsBC,SAAtB,EAAiCC,QAAjC,QAAiD,OAAjD;AAEA,SAASC,aAAT;AACA,SAASC,IAAT;AAEA,SAASC,OAAT;AAGA,OAAO,IAAMC,uBAAuB,GAAG,SAAAA,CAAAC,CAAA,EAQjC;EAAA,IAPJC,CAOI,GAAAD,CAAA,CAPJE,GAOI;IANJC,CAMI,GAAAH,CAAA,CANJI,GAMI;IALJC,CAKI,GAAAL,CAAA,CALJM,QAKI;IACEC,CAAM,GAAGX,aAAa,CAACO,CAAD,CADxB;IAEEK,CAAU,GAAGf,WAAW,CAC5B;MAAA,IAAAO,CAAA;MAAA,OACEF,OAAO,CAAC,UAAAG,CAAG,eAAHA,CAAA,cAAAD,CAAA,GAAAC,CAAG,CAAEQ,OAAL,gBAAAT,CAAA,YAAAA,CAAA,CAAcU,qBAAd,GAAsCC,KAAtC,KAA+C,CAAhD,EAAmDJ,CAAM,CAACE,OAA1D,CADT;IAAA,CAD4B,EAG5B,EAH4B,CAF1B;IAAAG,CAAA,GAO2BjB,QAAQ,CAAmBa,CAAnB,CAPnC;IAAAK,CAAA,GAAAC,cAAA,CAAAF,CAAA;IAOGG,CAPH,GAAAF,CAAA;IAOWG,CAPX,GAAAH,CAAA;EAwBJ,OAfAnB,SAAS,CAAC,YAAM;IACdc,CAAU,EADI;IAGd,IAAMR,CAAc,GAAG,IAAIiB,cAAJ,CAAmB,YAAM;MAC9C,IAAMjB,CAAS,GAAGQ,CAAU,EAA5B;MACAQ,CAAY,CAAC,UAACf,CAAD;QAAA,OAAYJ,IAAI,CAACI,CAAD,EAAQD,CAAR,CAAJ,GAAyBC,CAAzB,GAAiCD,CAA7C;MAAA,CAAD,CACb;IAAA,CAHsB,CAAvB;IAOA,OAFAK,CAAQ,cAAIJ,CAAJ,eAAIA,CAAJ,YAAIA,CAAG,CAAEQ,OAAT,CAAR,IAA4BT,CAAc,CAACkB,OAAf,CAAuBjB,CAAG,CAACQ,OAA3B,CAE5B,EAAO,YAAM;MACXT,CAAc,CAACmB,UAAf,EACD;IAAA,CACF;EAAA,CAbQ,EAaN,UAAClB,CAAD,eAACA,CAAD,YAACA,CAAG,CAAEQ,OAAN,EAAeJ,CAAf,CAbM,CAeT,EAAOU,CACR;AAAA,CAjCM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}