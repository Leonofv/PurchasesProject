{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction _createForOfIteratorHelper(a, b) {\n  var c = \"undefined\" != typeof Symbol && a[Symbol.iterator] || a[\"@@iterator\"];\n  if (!c) {\n    if (Array.isArray(a) || (c = _unsupportedIterableToArray(a)) || b && a && \"number\" == typeof a.length) {\n      c && (a = c);\n      var d = 0,\n        e = function () {};\n      return {\n        s: e,\n        n: function n() {\n          return d >= a.length ? {\n            done: !0\n          } : {\n            done: !1,\n            value: a[d++]\n          };\n        },\n        e: function e(a) {\n          throw a;\n        },\n        f: e\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var f,\n    g = !0,\n    h = !1;\n  return {\n    s: function s() {\n      c = c.call(a);\n    },\n    n: function n() {\n      var a = c.next();\n      return g = a.done, a;\n    },\n    e: function e(a) {\n      h = !0, f = a;\n    },\n    f: function f() {\n      try {\n        g || null == c[\"return\"] || c[\"return\"]();\n      } finally {\n        if (h) throw f;\n      }\n    }\n  };\n}\nfunction _unsupportedIterableToArray(a, b) {\n  if (a) {\n    if (\"string\" == typeof a) return _arrayLikeToArray(a, b);\n    var c = Object.prototype.toString.call(a).slice(8, -1);\n    return \"Object\" === c && a.constructor && (c = a.constructor.name), \"Map\" === c || \"Set\" === c ? Array.from(a) : \"Arguments\" === c || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c) ? _arrayLikeToArray(a, b) : void 0;\n  }\n}\nfunction _arrayLikeToArray(a, b) {\n  (null == b || b > a.length) && (b = a.length);\n  for (var c = 0, d = Array(b); c < b; c++) d[c] = a[c];\n  return d;\n}\nimport React, { useLayoutEffect } from \"react\";\nexport var useResizeObserved = function (a, b) {\n  var c = React.useState(function () {\n      return a.map(function (a) {\n        return b(a.current);\n      });\n    }),\n    d = _slicedToArray(c, 2),\n    e = d[0],\n    f = d[1],\n    g = React.useRef(b);\n  return useLayoutEffect(function () {\n    g.current = b;\n  }, [b]), useLayoutEffect(function () {\n    var b,\n      c = new ResizeObserver(function () {\n        f(a.map(function (a) {\n          return g.current(a.current);\n        }));\n      }),\n      d = _createForOfIteratorHelper(a);\n    try {\n      for (d.s(); !(b = d.n()).done;) {\n        var e = b.value;\n        e.current && c.observe(e.current);\n      }\n    } catch (a) {\n      d.e(a);\n    } finally {\n      d.f();\n    }\n    return function () {\n      c.disconnect();\n    };\n  }, [a]), e;\n};","map":{"version":3,"names":["React","useLayoutEffect","useResizeObserved","a","b","c","useState","map","current","d","_slicedToArray","e","f","g","useRef","ResizeObserver","_createForOfIteratorHelper","s","n","done","value","observe","disconnect"],"sources":["/Users/leonofv/Documents/GitHub/PurchasesProject/purchase-ui/node_modules/@consta/src/hooks/useResizeObserved/useResizeObserved.ts"],"sourcesContent":["import React, { RefObject, useLayoutEffect } from 'react';\n\nexport const useResizeObserved = <\n  ELEMENT extends HTMLElement | SVGGraphicsElement,\n  RETURN_TYPE,\n>(\n  refs: Array<RefObject<ELEMENT>>,\n  mapper: (el: ELEMENT | null) => RETURN_TYPE,\n): RETURN_TYPE[] => {\n  const [dimensions, setDimensions] = React.useState<RETURN_TYPE[]>(() =>\n    refs.map((ref) => mapper(ref.current)),\n  );\n\n  // Храним маппер в рефке, чтобы если его передадут инлайн-функцией, это не вызвало бесконечные перерендеры\n  const mapperRef = React.useRef(mapper);\n  useLayoutEffect(() => {\n    mapperRef.current = mapper;\n  }, [mapper]);\n\n  useLayoutEffect(() => {\n    const resizeObserver = new ResizeObserver(() => {\n      setDimensions(refs.map((ref) => mapperRef.current(ref.current)));\n    });\n\n    for (const ref of refs) {\n      ref.current && resizeObserver.observe(ref.current);\n    }\n\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, [refs]);\n\n  return dimensions;\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAA2BC,eAA3B,QAAkD,OAAlD;AAEA,OAAO,IAAMC,iBAAiB,GAAG,SAAAA,CAI/BC,CAJ+B,EAK/BC,CAL+B,EAMb;EAAA,IAAAC,CAAA,GACkBL,KAAK,CAACM,QAAN,CAA8B;MAAA,OAChEH,CAAI,CAACI,GAAL,CAAS,UAACJ,CAAD;QAAA,OAASC,CAAM,CAACD,CAAG,CAACK,OAAL,CAAf;MAAA,CAAT,CADgE;IAAA,CAA9B,CADlB;IAAAC,CAAA,GAAAC,cAAA,CAAAL,CAAA;IACXM,CADW,GAAAF,CAAA;IACCG,CADD,GAAAH,CAAA;IAMZI,CAAS,GAAGb,KAAK,CAACc,MAAN,CAAaV,CAAb,CANA;EAyBlB,OAlBAH,eAAe,CAAC,YAAM;IACpBY,CAAS,CAACL,OAAV,GAAoBJ,CACrB;EAAA,CAFc,EAEZ,CAACA,CAAD,CAFY,CAkBf,EAdAH,eAAe,CAAC,YAAM;IAAA,IAAAG,CAAA;MACdC,CAAc,GAAG,IAAIU,cAAJ,CAAmB,YAAM;QAC9CH,CAAa,CAACT,CAAI,CAACI,GAAL,CAAS,UAACJ,CAAD;UAAA,OAASU,CAAS,CAACL,OAAV,CAAkBL,CAAG,CAACK,OAAtB,CAAT;QAAA,CAAT,CAAD,CACd;MAAA,CAFsB,CADH;MAAAC,CAAA,GAAAO,0BAAA,CAKFb,CALE;IAAA;MAKpB,KAAAM,CAAA,CAAAQ,CAAA,MAAAb,CAAA,GAAAK,CAAA,CAAAS,CAAA,IAAAC,IAAA,GAAwB;QAAA,IAAbR,CAAa,GAAAP,CAAA,CAAAgB,KAAA;QACtBT,CAAG,CAACH,OAAJ,IAAeH,CAAc,CAACgB,OAAf,CAAuBV,CAAG,CAACH,OAA3B,CAChB;MAAA;IAPmB,SAAAL,CAAA;MAAAM,CAAA,CAAAE,CAAA,CAAAR,CAAA;IAAA;MAAAM,CAAA,CAAAG,CAAA;IAAA;IASpB,OAAO,YAAM;MACXP,CAAc,CAACiB,UAAf,EACD;IAAA,CACF;EAAA,CAZc,EAYZ,CAACnB,CAAD,CAZY,CAcf,EAAOQ,CACR;AAAA,CAhCM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}