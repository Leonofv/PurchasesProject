import _defineProperty from"@babel/runtime/helpers/defineProperty";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";const _excluded=["items","menuHideButtonText","menuMaxElements","menuShowButtonText","menuTitle","onItemClick","getItemAs","getItemKey","getItemAttributes","getItemSubMenu","getItemIconLeft","getItemLabel","getItemOnClick","banners","bannerPosition","onBannerClick","getBannerAs","getBannerAttributes","getBannerDescription","getBannerImage","getBannerLabel","getBannerOnClick","className"];function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}import"./MegaMenu.css";import{IconArrowRight}from"@consta/icons/IconArrowRight";import React,{useCallback,useEffect,useMemo,useState}from"react";import{cn}from"../../utils/bem";import{getItemsDepth,separateItemsByDepth,withDefaultGetters}from"./helper";import{MegaMenuBannerBar}from"./MegaMenuBannerBar";import{MegaMenuGlobal}from"./MegaMenuGlobal";import{MegaMenuNavBar}from"./MegaMenuNavBar";const cnMegaMenu=cn("MegaMenu");export const MegaMenu=a=>{const b=withDefaultGetters(a),{items:c,menuHideButtonText:w="\u0421\u043A\u0440\u044B\u0442\u044C",menuMaxElements:d,menuShowButtonText:x="\u0415\u0449\u0451",menuTitle:e,onItemClick:f,getItemAs:g,getItemKey:h,getItemAttributes:i,getItemSubMenu:j,getItemIconLeft:k,getItemLabel:l,getItemOnClick:m,banners:n,bannerPosition:y="right",onBannerClick:o,getBannerAs:p,getBannerAttributes:q,getBannerDescription:r,getBannerImage:s,getBannerLabel:t,getBannerOnClick:u,className:v}=b,z=_objectWithoutProperties(b,_excluded),[A,B]=useState(),C=useCallback(a=>!!A&&h(A)===h(a),[A]),D=useMemo(()=>getItemsDepth(c,j),[c]),[E,F,G]=useMemo(()=>separateItemsByDepth({items:c,getItemKey:h,getItemSubMenu:j,getItemActive:C,depth:D}),[c,A]),{navItems:H,items:I,groups:J}=useMemo(()=>({navItems:2>D||2<D?E:void 0,groups:3>D?E:F,items:3>D?F:G}),[D,E,F,G]),K=(a,b)=>{null===f||void 0===f?void 0:f(b,{e:a}),j(b)&&B(b)},L=(a,b)=>{var c;const d=null===(c=i(b))||void 0===c?void 0:c.onMouseEnter;null===d||void 0===d?void 0:d(a),j(b)&&B(b)};return useEffect(()=>{2<D&&j(c[0])&&B(c[0])},[D]),React.createElement("div",Object.assign({className:cnMegaMenu({withGlobalMenu:1<D,withBannersBar:0<(null!==n&&void 0!==n?n:[]).length,withNavBar:2!==D,bannerPosition:y},[v])},z),H&&React.createElement(MegaMenuNavBar,{items:H,className:cnMegaMenu("NavBar"),getItemActive:({item:a})=>C(a),getItemAs:({item:a})=>g(a),getItemAttributes:({item:a})=>_objectSpread(_objectSpread({},i(a)),{},{onMouseEnter:b=>L(b,a)}),getItemIconLeft:({item:a})=>k(a),getItemLabel:({item:a})=>l(a),getItemOnClick:({item:a})=>m(a),onItemClick:({item:a},{e:b})=>K(b,a),getItemIconRight:({item:a})=>j(a)?IconArrowRight:void 0}),React.createElement("div",{className:cnMegaMenu("Wrapper")},2<=D&&React.createElement(MegaMenuGlobal,{className:cnMegaMenu("GlobalMenu"),items:I,groups:J,title:null!==e&&void 0!==e?e:A?l(A):void 0,getGroupKey:({item:a})=>h(a),getGroupLabel:({item:a})=>l(a),getItemAs:({item:a})=>g(a),getItemAttributes:({item:a})=>i(a),getItemGroupId:({groupId:a})=>a,getItemLabel:({item:a})=>l(a),getItemOnClick:({item:a})=>m(a),getGroupOnClick:({item:a})=>m(a),onGroupClick:f?({item:a},{e:b})=>{null===f||void 0===f?void 0:f(a,{e:b})}:void 0,onItemClick:f?({item:a},{e:b})=>null===f||void 0===f?void 0:f(a,{e:b}):void 0,maxElements:d,showButtonText:x,hideButtonText:w}),n&&React.createElement(MegaMenuBannerBar,{className:cnMegaMenu("BannerBar"),items:n,view:"right"===y?"vertical":"horizontal",onItemClick:o,getItemAs:p,getItemAttributes:q,getItemDescription:r,getItemImage:s,getItemLabel:t,getItemOnClick:u})))};export*from"./types";
//# sourceMappingURL=MegaMenu.js.map