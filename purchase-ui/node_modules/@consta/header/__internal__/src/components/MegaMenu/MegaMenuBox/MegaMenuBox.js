import _defineProperty from"@babel/runtime/helpers/defineProperty";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";const _excluded=["isOpen","onClickOutside","onEsc","offset","style","anchorRef","className","children","maxContentWidth"];function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}import"./MegaMenuBox.css";import{PortalWithTheme,usePortalContext}from"@consta/uikit/PortalWithTheme";import{useTheme}from"@consta/uikit/Theme";import{useClickOutside}from"@consta/uikit/useClickOutside";import React,{useMemo,useRef}from"react";import{Transition}from"react-transition-group";import{cn}from"../../../utils/bem";const cnMegaMenuBox=cn("MegaMenuBox"),ContextConsumer=({onClickOutside:a,children:b,ignoreClicksInsideRefs:c})=>{const{refs:d}=usePortalContext();return useClickOutside({isActive:!!a,ignoreClicksInsideRefs:[...(c||[]),...(d||[])],handler:a}),b};export const MegaMenuBox=a=>{const{isOpen:b,onClickOutside:c,onEsc:d,offset:j=0,style:e,anchorRef:f,className:g,children:h,maxContentWidth:i}=a,k=_objectWithoutProperties(a,_excluded),l=useRef(null),m=useRef(null),{theme:n}=useTheme(),o=useMemo(()=>{var a,b,c,d;return(null!==(a=null===f||void 0===f||null===(b=f.current)||void 0===b?void 0:b.offsetTop)&&void 0!==a?a:0)+(null!==(c=null===f||void 0===f||null===(d=f.current)||void 0===d?void 0:d.offsetHeight)&&void 0!==c?c:0)+j},[j,null===f||void 0===f?void 0:f.current]);return React.createElement(Transition,{in:b,unmountOnExit:!0,timeout:240,nodeRef:l},a=>React.createElement(PortalWithTheme,Object.assign({preset:n,style:_objectSpread({"--mega-menu-offset":`${o}px`},e),className:cnMegaMenuBox(null,[g]),ref:l},k),React.createElement("div",{className:cnMegaMenuBox("Overlay",{animate:a})}),React.createElement(ContextConsumer,{onClickOutside:c,ignoreClicksInsideRefs:[m]},React.createElement("div",{ref:m,className:cnMegaMenuBox("Window",{animate:a})},React.createElement("div",{className:cnMegaMenuBox("Wrapper"),style:{"--mega-menu-content-width":i?`${i}px`:"100%"}},h)))))};
//# sourceMappingURL=MegaMenuBox.js.map