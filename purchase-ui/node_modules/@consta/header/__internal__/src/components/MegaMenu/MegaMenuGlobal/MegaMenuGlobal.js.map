{"version":3,"file":"MegaMenuGlobal.js","names":["getGroups","cnMixSpace","Text","getLastPoint","useBreakpoints","useForkRef","React","forwardRef","useMemo","useRef","cn","withDefaultGetters","MegaMenuGlobalGroup","cnMegaMenuGlobal","noGroupKey","MegaMenuGlobalRender","props","ref","c","items","getItemAs","getItemAttributes","getItemGroupId","title","getItemLabel","columns","columnsProp","getItemOnClick","getGroupKey","onItemClick","onGroupClick","getGroupLabel","getGroupOnClick","groups","groupsProp","showButtonText","hideButtonText","maxElements","className","otherProps","_objectWithoutProperties","_excluded","MegaMenuGlobalRef","map","isActive","sortedGroups","cols","arr","forEach","group","i","index","push","createElement","Object","assign","weight","transform","mB","lineHeight","size","view","style","\"--global-menu-columns\"","key","onClickGroup","hasClickableGroup","onClick","e","MegaMenuGlobal"],"sources":["../../../../../../src/components/MegaMenu/MegaMenuGlobal/MegaMenuGlobal.tsx"],"sourcesContent":["import './MegaMenuGlobal.css';\n\nimport { getGroups } from '@consta/uikit/__internal__/src/utils/getGroups';\nimport { cnMixSpace } from '@consta/uikit/MixSpace';\nimport { Text } from '@consta/uikit/Text';\nimport { getLastPoint, useBreakpoints } from '@consta/uikit/useBreakpoints';\nimport { useForkRef } from '@consta/uikit/useForkRef';\nimport React, { forwardRef, useMemo, useRef } from 'react';\n\nimport { cn } from '##/utils/bem';\n\nimport { withDefaultGetters } from './helper';\nimport { MegaMenuGlobalGroup } from './MegaMenuGlobalGroup';\nimport { MegaMenuGlobalComponent, MegaMenuGlobalProps } from './types';\n\nconst cnMegaMenuGlobal = cn('MegaMenuGlobal');\nconst noGroupKey = 'no-group';\n\nconst MegaMenuGlobalRender = (\n  props: MegaMenuGlobalProps,\n  ref: React.Ref<HTMLDivElement>,\n) => {\n  const {\n    items,\n    getItemAs,\n    getItemAttributes,\n    getItemGroupId,\n    title,\n    getItemLabel,\n    columns: columnsProp,\n    getItemOnClick,\n    getGroupKey,\n    onItemClick,\n    onGroupClick,\n    getGroupLabel,\n    getGroupOnClick,\n    groups: groupsProp = [],\n    showButtonText = 'Ещё',\n    hideButtonText = 'Скрыть',\n    maxElements,\n    className,\n    ...otherProps\n  } = withDefaultGetters(props);\n\n  const MegaMenuGlobalRef = useRef<HTMLDivElement>(null);\n\n  const columns = getLastPoint(\n    useBreakpoints({\n      ref: MegaMenuGlobalRef,\n      map: {\n        1: 0,\n        2: 600,\n        3: 1000,\n        4: 1600,\n      },\n      isActive: true,\n    }),\n  );\n\n  const sortedGroups = useMemo(() => {\n    const cols = columnsProp ?? Number(columns);\n\n    const groups = getGroups(\n      items,\n      getItemGroupId,\n      groupsProp,\n      getGroupKey,\n      undefined,\n      noGroupKey,\n    );\n    const arr: Array<typeof groups> = [];\n    groups.forEach((group, i) => {\n      const index = i % cols;\n      if (!arr[index]) {\n        arr[index] = [];\n      }\n      arr[index].push(group);\n    });\n    return arr;\n  }, [items, groupsProp, columns, columnsProp]);\n\n  return (\n    <div\n      ref={useForkRef([ref, MegaMenuGlobalRef])}\n      className={cnMegaMenuGlobal(null, [className])}\n      {...otherProps}\n    >\n      {title && (\n        <Text\n          weight=\"semibold\"\n          transform=\"uppercase\"\n          className={cnMixSpace({ mB: 'xl' })}\n          lineHeight=\"m\"\n          size=\"xl\"\n          view=\"primary\"\n        >\n          {title}\n        </Text>\n      )}\n      <div\n        style={{\n          ['--global-menu-columns' as string]: columns,\n        }}\n        className={cnMegaMenuGlobal('Content')}\n      >\n        {sortedGroups.map((groups, index) => (\n          <div\n            key={cnMegaMenuGlobal('Column', { index })}\n            className={cnMegaMenuGlobal('Column')}\n          >\n            {groups.map((group, i) => {\n              const onClickGroup = group.group\n                ? getGroupOnClick(group.group)\n                : undefined;\n              const hasClickableGroup =\n                group.group && (!!onClickGroup || !!onGroupClick);\n              const onClick = (e: React.MouseEvent) => {\n                onClickGroup?.(e);\n                group.group && onGroupClick?.(group.group, { e });\n              };\n\n              return (\n                <MegaMenuGlobalGroup\n                  title={group.group ? getGroupLabel(group.group) : undefined}\n                  key={cnMegaMenuGlobal('Group', { index, i })}\n                  onClick={hasClickableGroup ? onClick : undefined}\n                  className={cnMegaMenuGlobal('Group')}\n                  items={group.items}\n                  showButtonText={showButtonText}\n                  hideButtonText={hideButtonText}\n                  onItemClick={onItemClick}\n                  maxElements={maxElements}\n                  getItemAs={getItemAs}\n                  getItemAttributes={getItemAttributes}\n                  getItemGroupId={getItemGroupId}\n                  getItemLabel={getItemLabel}\n                  getItemOnClick={getItemOnClick}\n                />\n              );\n            })}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport const MegaMenuGlobal = forwardRef(\n  MegaMenuGlobalRender,\n) as MegaMenuGlobalComponent;\n"],"mappings":"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"}