{"version":3,"file":"NotificationsActions.js","names":["IconMeatball","Button","ContextMenu","useFlag","useForkRef","useMutableRef","withTooltip","React","forwardRef","useEffect","useRef","getItemClick","withDefaultGetters","ButtonWithTooltip","NotificationsActionsRender","props","ref","c","d","items","className","children","mainButtonOnlyIcon","opened","onOpen","onOpenProp","getItemIcon","getItemLabel","getItemOnClick","onItemClick","otherProps","_objectWithoutProperties","_excluded","buttonRef","visibleMenu","setVisibleMenu","menuRef","elementZIndex","style","zIndex","a","current","call","length","createElement","Object","assign","size","view","iconLeft","onClick","tooltipProps","content","Fragment","toggle","isOpen","item","e","getItemKey","getItemLeftIcon","anchorRef","onClickOutside","off","possibleDirections","direction","width","label","NotificationsActions"],"sources":["../../../../../../src/components/Notifications/NotificationsActions/NotificationsActions.tsx"],"sourcesContent":["import { IconMeatball } from '@consta/icons/IconMeatball';\nimport { Button } from '@consta/uikit/Button';\nimport { ContextMenu } from '@consta/uikit/ContextMenu';\nimport { useFlag } from '@consta/uikit/useFlag';\nimport { useForkRef } from '@consta/uikit/useForkRef';\nimport { useMutableRef } from '@consta/uikit/useMutableRef';\nimport { withTooltip } from '@consta/uikit/withTooltip';\nimport React, { forwardRef, useEffect, useRef } from 'react';\n\nimport { getItemClick } from '##/helpers/getItemClick';\n\nimport { withDefaultGetters } from './helpers';\nimport {\n  NotificationsActionsComponent,\n  NotificationsActionsProps,\n} from './types';\n\nconst ButtonWithTooltip = withTooltip()(Button);\n\nconst NotificationsActionsRender = (\n  props: NotificationsActionsProps,\n  ref: React.Ref<HTMLButtonElement>,\n) => {\n  const {\n    items = [],\n    className,\n    children,\n    mainButtonOnlyIcon,\n    opened = false,\n    onOpen: onOpenProp,\n    getItemIcon,\n    getItemLabel,\n    getItemOnClick,\n    onItemClick,\n    ...otherProps\n  } = withDefaultGetters(props);\n  const buttonRef = useRef(null);\n\n  const [visibleMenu, setVisibleMenu] = useFlag(opened);\n\n  const onOpen = useMutableRef(onOpenProp);\n  const menuRef = useForkRef([buttonRef, ref]);\n\n  const elementZIndex =\n    typeof props.style?.zIndex === 'number'\n      ? props.style.zIndex + 1\n      : undefined;\n\n  useEffect(() => {\n    setVisibleMenu[opened ? 'on' : 'off']();\n  }, [opened]);\n\n  useEffect(() => {\n    onOpen.current?.(visibleMenu);\n  }, [visibleMenu, onOpen]);\n\n  if (items.length === 1 && !mainButtonOnlyIcon) {\n    return (\n      <Button\n        {...otherProps}\n        className={className}\n        size=\"xs\"\n        view=\"clear\"\n        iconLeft={getItemIcon(items[0])}\n        onClick={getItemClick(items[0], getItemOnClick, onItemClick)}\n        label={getItemLabel(items[0])}\n        ref={ref}\n      />\n    );\n  }\n\n  if (items.length === 1 && getItemIcon(items[0]) && mainButtonOnlyIcon) {\n    return (\n      <ButtonWithTooltip\n        {...otherProps}\n        className={className}\n        size=\"xs\"\n        view=\"clear\"\n        iconLeft={getItemIcon(items[0])}\n        onClick={getItemClick(items[0], getItemOnClick, onItemClick)}\n        tooltipProps={{\n          content: getItemLabel(items[0]),\n        }}\n        ref={ref}\n      />\n    );\n  }\n\n  return (\n    <>\n      <Button\n        {...otherProps}\n        className={className}\n        size=\"xs\"\n        view=\"clear\"\n        iconLeft={IconMeatball}\n        ref={menuRef}\n        onClick={setVisibleMenu.toggle}\n      />\n      <ContextMenu\n        isOpen={visibleMenu}\n        items={items}\n        getItemLabel={getItemLabel}\n        onItemClick={(item, { e }) =>\n          getItemClick(item, getItemOnClick, onItemClick)(e)\n        }\n        getItemKey={getItemLabel}\n        getItemLeftIcon={getItemIcon}\n        anchorRef={buttonRef}\n        onClickOutside={setVisibleMenu.off}\n        possibleDirections={['downStartRight', 'upStartRight']}\n        direction=\"downStartRight\"\n        style={{ width: 280, zIndex: elementZIndex }}\n      />\n    </>\n  );\n};\n\nexport const NotificationsActions = forwardRef(\n  NotificationsActionsRender,\n) as NotificationsActionsComponent;\n"],"mappings":"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"}