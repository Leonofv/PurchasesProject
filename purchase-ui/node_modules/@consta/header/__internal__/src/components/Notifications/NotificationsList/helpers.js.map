{"version":3,"file":"helpers.js","names":["getGroups","constaGetGroups","format","isToday","isYesterday","startOfDay","defaultGetActionIcon","action","icon","defaultGetActionLabel","label","defaultGetActionOnClick","onClick","defaultGetGroupId","group","id","defaultGetGroupLabel","defaultGetItemActions","item","actions","defaultGetItemBadges","badges","defaultGetItemDate","date","defaultGetItemDescription","description","defaultGetItemGroup","defaultGetItemImage","image","defaultGetItemLabel","defaultGetItemRead","read","defaultGetItemView","view","withDefaultGetters","props","_objectSpread","getActionIcon","getActionLabel","getActionOnClick","getGroupId","getGroupLabel","getItemActions","getItemBadges","getItemDate","getItemDescription","getItemGroup","getItemImage","getItemLabel","getItemRead","getItemView","noGroupKey","defaultGroupLabelFormat","timestamp","sortGroup","a","b","key","items","groups","groupByDay","getTime"],"sources":["../../../../../../src/components/Notifications/NotificationsList/helpers.ts"],"sourcesContent":["import { getGroups as constaGetGroups } from '@consta/uikit/__internal__/src/utils/getGroups';\nimport { format, isToday, isYesterday, startOfDay } from 'date-fns';\n\nimport { NotificationsItemAction } from '../NotificationsItem';\nimport {\n  NotificationsListDefaultGroup,\n  NotificationsListDefaultItem,\n  NotificationsListPropGetActionIcon,\n  NotificationsListPropGetActionLabel,\n  NotificationsListPropGetActionOnClick,\n  NotificationsListPropGetGroupId,\n  NotificationsListPropGetGroupLabel,\n  NotificationsListPropGetItemActions,\n  NotificationsListPropGetItemBadges,\n  NotificationsListPropGetItemDate,\n  NotificationsListPropGetItemDescription,\n  NotificationsListPropGetItemGroup,\n  NotificationsListPropGetItemImage,\n  NotificationsListPropGetItemLabel,\n  NotificationsListPropGetItemRead,\n  NotificationsListPropGetItemView,\n  NotificationsListPropGroupLabelFormat,\n  NotificationsListProps,\n} from './types';\n\nconst defaultGetActionIcon: NotificationsListPropGetActionIcon<\n  NotificationsItemAction\n> = (action) => action.icon;\nconst defaultGetActionLabel: NotificationsListPropGetActionLabel<\n  NotificationsItemAction\n> = (action) => action.label;\nconst defaultGetActionOnClick: NotificationsListPropGetActionOnClick<\n  NotificationsItemAction\n> = (action) => action.onClick;\nconst defaultGetGroupId: NotificationsListPropGetGroupId<\n  NotificationsListDefaultGroup\n> = (group) => group.id;\nconst defaultGetGroupLabel: NotificationsListPropGetGroupLabel<\n  NotificationsListDefaultGroup\n> = (group) => group.label;\nconst defaultGetItemActions: NotificationsListPropGetItemActions<\n  NotificationsListDefaultItem\n> = (item) => item.actions;\nconst defaultGetItemBadges: NotificationsListPropGetItemBadges<\n  NotificationsListDefaultItem\n> = (item) => item.badges;\nconst defaultGetItemDate: NotificationsListPropGetItemDate<\n  NotificationsListDefaultItem\n> = (item) => item.date;\nconst defaultGetItemDescription: NotificationsListPropGetItemDescription<\n  NotificationsListDefaultItem\n> = (item) => item.description;\nconst defaultGetItemGroup: NotificationsListPropGetItemGroup<\n  NotificationsListDefaultItem\n> = (item) => item.group;\nconst defaultGetItemImage: NotificationsListPropGetItemImage<\n  NotificationsListDefaultItem\n> = (item) => item.image;\nconst defaultGetItemLabel: NotificationsListPropGetItemLabel<\n  NotificationsListDefaultItem\n> = (item) => item.label;\nconst defaultGetItemRead: NotificationsListPropGetItemRead<\n  NotificationsListDefaultItem\n> = (item) => item.read;\nconst defaultGetItemView: NotificationsListPropGetItemView<\n  NotificationsListDefaultItem\n> = (item) => item.view;\n\nexport function withDefaultGetters<ITEM, GROUP, ACTION>(\n  props: NotificationsListProps<ITEM, GROUP, ACTION>,\n) {\n  return {\n    ...props,\n    getActionIcon: props.getActionIcon || defaultGetActionIcon,\n    getActionLabel: props.getActionLabel || defaultGetActionLabel,\n    getActionOnClick: props.getActionOnClick || defaultGetActionOnClick,\n    getGroupId: props.getGroupId || defaultGetGroupId,\n    getGroupLabel: props.getGroupLabel || defaultGetGroupLabel,\n    getItemActions: props.getItemActions || defaultGetItemActions,\n    getItemBadges: props.getItemBadges || defaultGetItemBadges,\n    getItemDate: props.getItemDate || defaultGetItemDate,\n    getItemDescription: props.getItemDescription || defaultGetItemDescription,\n    getItemGroup: props.getItemGroup || defaultGetItemGroup,\n    getItemImage: props.getItemImage || defaultGetItemImage,\n    getItemLabel: props.getItemLabel || defaultGetItemLabel,\n    getItemRead: props.getItemRead || defaultGetItemRead,\n    getItemView: props.getItemView || defaultGetItemView,\n  };\n}\n\ntype ReturnedGroup<ITEM, GROUP> = {\n  items: ITEM[];\n  key: string | number;\n  group?: GROUP;\n  groupIndex: number;\n};\n\nexport const noGroupKey = 'no-group';\n\nexport const defaultGroupLabelFormat: NotificationsListPropGroupLabelFormat<\n  true\n> = (timestamp) => {\n  if (isToday(timestamp)) {\n    return 'Сегодня';\n  }\n  if (isYesterday(timestamp)) {\n    return 'Вчера';\n  }\n  return format(timestamp, 'dd.MM.yyyy');\n};\n\nconst sortGroup = (\n  a: { key: string | number },\n  b: { key: string | number },\n) => {\n  if (a.key < b.key) {\n    return 1;\n  }\n  if (a.key > b.key) {\n    return -1;\n  }\n  return 0;\n};\n\nexport const getGroups = <ITEM, GROUP>(\n  items: ITEM[],\n  groups: GROUP[] | undefined,\n  groupByDay: boolean,\n  getItemGroup: NotificationsListPropGetItemGroup<ITEM>,\n  getItemDate: NotificationsListPropGetItemDate<ITEM>,\n  getGroupId: NotificationsListPropGetGroupId<GROUP>,\n): Array<ReturnedGroup<ITEM, GROUP>> => {\n  if (groupByDay) {\n    const getItemGroupByDate = (item: ITEM) => {\n      const date = getItemDate(item);\n      return date ? startOfDay(date).getTime() : undefined;\n    };\n\n    return constaGetGroups<ITEM, GROUP>(\n      items,\n      getItemGroupByDate,\n      undefined,\n      undefined,\n      sortGroup,\n      noGroupKey,\n    );\n  }\n  return constaGetGroups(\n    items,\n    getItemGroup,\n    groups,\n    getGroupId,\n    undefined,\n    noGroupKey,\n  );\n};\n"],"mappings":"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"}