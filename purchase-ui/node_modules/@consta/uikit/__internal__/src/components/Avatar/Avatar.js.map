{"version":3,"file":"Avatar.js","names":["React","useMemo","cn","forwardRefWithAs","avatarPropSize","avatarPropSizeDefault","avatarPropForm","avatarPropFormDefault","cnAvatar","MAX_COLOR_INDEX","getRandomInt","max","Math","floor","random","getColorIndexForName","name","maxIndex","monochrome","index","split","map","c","charCodeAt","reduce","acc","code","getInitialsForName","words","firstLetter","secondLatter","toUpperCase","Avatar","props","ref","as","className","size","form","url","style","otherProps","initials","colorIndex"],"sources":["../../../../../src/components/Avatar/Avatar.tsx"],"sourcesContent":["import './Avatar.css';\n\nimport React, { useMemo } from 'react';\n\nimport { cn } from '../../utils/bem';\nimport { forwardRefWithAs } from '../../utils/types/PropsWithAsAttributes';\n\nexport const avatarPropSize = ['m', 's', 'xs', 'l'] as const;\nexport type AvatarPropSize = typeof avatarPropSize[number];\nexport const avatarPropSizeDefault: AvatarPropSize = avatarPropSize[0];\n\nexport const avatarPropForm = ['round', 'brick', 'default'] as const;\nexport type AvatarPropForm = typeof avatarPropForm[number];\nexport const avatarPropFormDefault: AvatarPropForm = avatarPropForm[0];\n\ntype Props = {\n  url?: string;\n  name?: string;\n  size?: AvatarPropSize;\n  form?: AvatarPropForm;\n  children?: never;\n  monochrome?: boolean;\n};\n\nexport const cnAvatar = cn('Avatar');\n\nconst MAX_COLOR_INDEX = 17;\n\nconst getRandomInt = (max: number) => {\n  return Math.floor(Math.random() * Math.floor(max));\n};\n\nexport const getColorIndexForName = (\n  name: string | undefined,\n  maxIndex: number = MAX_COLOR_INDEX,\n  monochrome?: boolean,\n) => {\n  if (monochrome) {\n    return MAX_COLOR_INDEX + 1;\n  }\n\n  let index = 0;\n\n  if (name) {\n    index =\n      name\n        .split('')\n        .map((c) => c.charCodeAt(0))\n        .reduce((acc, code) => acc + code, 0) % maxIndex;\n  } else {\n    index = getRandomInt(maxIndex);\n  }\n\n  return index;\n};\n\nexport const getInitialsForName = (name: string | undefined) => {\n  if (!name) {\n    return '';\n  }\n\n  const words = name.split(' ');\n  const firstLetter = words[0] ? words[0][0] : '';\n  const secondLatter = words[1] ? words[1][0] : '';\n\n  return `${firstLetter.toUpperCase()}${secondLatter.toUpperCase()}`;\n};\n\nexport const Avatar = forwardRefWithAs<Props>((props, ref) => {\n  const {\n    as = 'div',\n    className,\n    size = avatarPropSizeDefault,\n    form = avatarPropFormDefault,\n    url,\n    name,\n    monochrome,\n    style,\n    ...otherProps\n  } = props;\n  const Tag = as as string;\n  const initials = useMemo(() => getInitialsForName(name), [name]);\n  const colorIndex = useMemo(\n    () => getColorIndexForName(name, MAX_COLOR_INDEX, monochrome),\n    [name, monochrome],\n  );\n\n  return (\n    <Tag\n      {...otherProps}\n      style={\n        !url\n          ? { ...style, '--avatar-color': `var(--avatar-color-${colorIndex})` }\n          : style\n      }\n      className={cnAvatar(\n        { size, form, monochrome: url ? monochrome : undefined },\n        [className],\n      )}\n      ref={ref}\n    >\n      {url && <img className={cnAvatar('Image')} src={url} alt={name} />}\n      {!url && initials}\n    </Tag>\n  );\n});\n"],"mappings":"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"}