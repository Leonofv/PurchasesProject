{"version":3,"file":"AvatarGroup.js","names":["React","forwardRef","useForkRef","getHiddenCount","useHideElementsInLine","cn","Avatar","avatarPropFormDefault","cnAvatar","withDefaultGetters","avatarGroupPropSizeDefault","cnAvatarGroup","AvatarGroupRender","props","ref","items","form","size","visibleCount","getItemName","getItemUrl","monochrome","otherProps","itemLenght","length","elementsRefs","parentRef","visibleMap","autoMode","itemsForRender","reverse","slice","hidden","map","item","index","AvatarGroup"],"sources":["../../../../../src/components/AvatarGroup/AvatarGroup.tsx"],"sourcesContent":["import './AvatarGroup.css';\n\nimport React, { forwardRef } from 'react';\n\nimport { useForkRef } from '##/hooks/useForkRef';\nimport {\n  getHiddenCount,\n  useHideElementsInLine,\n} from '##/hooks/useHideElementsInLine';\n\nimport { cn } from '../../utils/bem';\nimport { Avatar, avatarPropFormDefault, cnAvatar } from '../Avatar/Avatar';\nimport { withDefaultGetters } from './helpers';\nimport {\n  AvatarGroupComponent,\n  AvatarGroupProps,\n  avatarGroupPropSizeDefault,\n} from './types';\n\nconst cnAvatarGroup = cn('AvatarGroup');\n\nconst AvatarGroupRender = (\n  props: AvatarGroupProps,\n  ref: React.Ref<HTMLDivElement>,\n) => {\n  const {\n    items = [],\n    form = avatarPropFormDefault,\n    size = avatarGroupPropSizeDefault,\n    visibleCount = 4,\n    getItemName,\n    getItemUrl,\n    monochrome,\n    ...otherProps\n  } = withDefaultGetters(props);\n\n  const itemLenght = items.length;\n  const elementsLength = itemLenght + 1;\n\n  const { elementsRefs, parentRef, visibleMap } = useHideElementsInLine(\n    elementsLength,\n    0,\n    0,\n    [visibleCount],\n  );\n\n  const autoMode = visibleCount === 'auto';\n\n  const itemsForRender = autoMode\n    ? [...items].reverse()\n    : [...items].slice(0, visibleCount).reverse();\n\n  return (\n    <div\n      className={cnAvatarGroup({ size })}\n      ref={useForkRef([parentRef, ref])}\n      {...otherProps}\n    >\n      {(autoMode || itemLenght > visibleCount) && (\n        <div\n          className={cnAvatar({ size, form }, [\n            cnAvatarGroup('More', {\n              hidden: !visibleMap[0] && autoMode,\n            }),\n          ])}\n          ref={elementsRefs[0]}\n        >\n          {`+${\n            autoMode ? getHiddenCount(visibleMap) : itemLenght - visibleCount\n          }`}\n        </div>\n      )}\n      {itemsForRender.map((item, index) => {\n        return (\n          <Avatar\n            key={cnAvatarGroup({ index })}\n            url={getItemUrl(item)}\n            name={getItemName(item)}\n            className={cnAvatarGroup('Avatar', {\n              hidden: !visibleMap[index + 1] && autoMode,\n            })}\n            size={size}\n            form={form}\n            ref={elementsRefs[index + 1]}\n            monochrome={monochrome}\n          />\n        );\n      })}\n    </div>\n  );\n};\n\nexport const AvatarGroup = forwardRef(\n  AvatarGroupRender,\n) as AvatarGroupComponent;\n\nexport * from './types';\n"],"mappings":"2PAAA,0BAEA,MAAOA,MAAP,EAAgBC,UAAhB,KAAkC,OAAlC,CAEA,OAASC,UAAT,8BACA,OACEC,cADF,CAEEC,qBAFF,yCAKA,OAASC,EAAT,uBACA,OAASC,MAAT,CAAiBC,qBAAjB,CAAwCC,QAAxC,wBACA,OAASC,kBAAT,iBACA,OAGEC,0BAHF,e,GAMMC,cAAa,CAAGN,EAAE,CAAC,aAAD,C,CAElBO,iBAAiB,CAAG,SACxBC,CADwB,CAExBC,CAFwB,CAGrB,OAUCL,kBAAkB,CAACI,CAAD,CAVnB,KAEDE,KAFC,CAEDA,CAFC,YAEO,EAFP,OAGDC,IAHC,CAGDA,CAHC,YAGMT,qBAHN,OAIDU,IAJC,CAIDA,CAJC,YAIMP,0BAJN,OAKDQ,YALC,CAKDA,CALC,YAKc,CALd,GAMDC,CANC,GAMDA,WANC,CAODC,CAPC,GAODA,UAPC,CAQDC,CARC,GAQDA,UARC,CASEC,CATF,uCAYGC,CAAU,CAAGR,CAAK,CAACS,MAZtB,GAe6CpB,qBAAqB,CAF9CmB,CAAU,CAAG,CAEiC,CAEnE,CAFmE,CAGnE,CAHmE,CAInE,CAACL,CAAD,CAJmE,CAflE,CAeKO,CAfL,GAeKA,YAfL,CAemBC,CAfnB,GAemBA,SAfnB,CAe8BC,CAf9B,GAe8BA,UAf9B,CAsBGC,CAAQ,CAAoB,MAAjB,GAAAV,CAtBd,CAwBGW,CAAc,CAAGD,CAAQ,CAC3B,mBAAIb,CAAJ,EAAWe,OAAX,EAD2B,CAE3B,mBAAIf,CAAJ,EAAWgB,KAAX,CAAiB,CAAjB,CAAoBb,CAApB,EAAkCY,OAAlC,EA1BD,CA4BH,MACE,0CACE,SAAS,CAAEnB,aAAa,CAAC,CAAEM,IAAI,CAAJA,CAAF,CAAD,CAD1B,CAEE,GAAG,CAAEf,UAAU,CAAC,CAACwB,CAAD,CAAYZ,CAAZ,CAAD,CAFjB,EAGMQ,CAHN,EAKG,CAACM,CAAQ,EAAIL,CAAU,CAAGL,CAA1B,GACC,2BACE,SAAS,CAAEV,QAAQ,CAAC,CAAES,IAAI,CAAJA,CAAF,CAAQD,IAAI,CAAJA,CAAR,CAAD,CAAiB,CAClCL,aAAa,CAAC,MAAD,CAAS,CACpBqB,MAAM,CAAE,CAACL,CAAU,CAAC,CAAD,CAAX,EAAkBC,CADN,CAAT,CADqB,CAAjB,CADrB,CAME,GAAG,CAAEH,CAAY,CAAC,CAAD,CANnB,aASIG,CAAQ,CAAGzB,cAAc,CAACwB,CAAD,CAAjB,CAAgCJ,CAAU,CAAGL,CATzD,EANJ,CAmBGW,CAAc,CAACI,GAAf,CAAmB,SAACC,CAAD,CAAOC,CAAP,CAAiB,CACnC,MACE,qBAAC,MAAD,EACE,GAAG,CAAExB,aAAa,CAAC,CAAEwB,KAAK,CAALA,CAAF,CAAD,CADpB,CAEE,GAAG,CAAEf,CAAU,CAACc,CAAD,CAFjB,CAGE,IAAI,CAAEf,CAAW,CAACe,CAAD,CAHnB,CAIE,SAAS,CAAEvB,aAAa,CAAC,QAAD,CAAW,CACjCqB,MAAM,CAAE,CAACL,CAAU,CAACQ,CAAK,CAAG,CAAT,CAAX,EAA0BP,CADD,CAAX,CAJ1B,CAOE,IAAI,CAAEX,CAPR,CAQE,IAAI,CAAED,CARR,CASE,GAAG,CAAES,CAAY,CAACU,CAAK,CAAG,CAAT,CATnB,CAUE,UAAU,CAAEd,CAVd,EAaH,CAfA,CAnBH,CAqCH,C,CAED,MAAO,IAAMe,YAAW,CAAGnC,UAAU,CACnCW,iBADmC,CAA9B,CAIP"}