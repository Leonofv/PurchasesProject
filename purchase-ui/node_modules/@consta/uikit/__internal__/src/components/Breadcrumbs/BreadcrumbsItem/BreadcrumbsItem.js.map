{"version":3,"file":"BreadcrumbsItem.js","names":["IconArrowRight","IconSelect","React","forwardRef","useRef","useFlag","cnMixSpace","cn","getByMap","Button","ContextMenu","Text","contextMenuSizeMap","getItemAs","getItemAttributes","iconSizeMap","cnBreadcrumbsItem","BreadcrumbsItemRender","props","ref","className","onItemClickProp","onItemClick","item","size","onlyIconProp","onlyIcon","delimiter","active","getItemHref","getItemIcon","getItemLabel","getItemSubMenu","children","otherProps","open","setOpen","buttonRef","Icon","href","label","subMenu","iconSize","linkProps","as","mH","handleClick","e","mR","toggle","off","BreadcrumbsItem"],"sources":["../../../../../../src/components/Breadcrumbs/BreadcrumbsItem/BreadcrumbsItem.tsx"],"sourcesContent":["import './BreadcrumbsItem.css';\n\nimport { IconArrowRight } from '@consta/icons/IconArrowRight';\nimport { IconSelect } from '@consta/icons/IconSelect';\nimport React, { forwardRef, useRef } from 'react';\n\nimport { useFlag } from '../../../hooks/useFlag/useFlag';\nimport { cnMixSpace } from '../../../mixs/MixSpace/MixSpace';\nimport { cn } from '../../../utils/bem';\nimport { getByMap } from '../../../utils/getByMap';\nimport { Button } from '../../Button/Button';\nimport { ContextMenu } from '../../ContextMenu/ContextMenu';\nimport { Text } from '../../Text/Text';\nimport {\n  contextMenuSizeMap,\n  getItemAs,\n  getItemAttributes,\n} from '../BreadcrumbsMore/BreadcrumbsMore';\nimport { iconSizeMap } from '../helpers';\nimport {\n  BreadcrumbsItemComponent,\n  BreadcrumbsItemProps,\n  BreadcrumbsPropOnItemClick,\n} from '../types';\n\nexport const cnBreadcrumbsItem = cn('BreadcrumbsItem');\n\nfunction BreadcrumbsItemRender<ITEM>(\n  props: BreadcrumbsItemProps<ITEM>,\n  ref: React.Ref<HTMLLIElement>,\n) {\n  const {\n    className,\n    onItemClick: onItemClickProp,\n    item,\n    size,\n    onlyIcon: onlyIconProp,\n    delimiter,\n    active,\n    getItemHref,\n    getItemIcon,\n    getItemLabel,\n    getItemSubMenu,\n    children,\n    ...otherProps\n  } = props;\n\n  const [open, setOpen] = useFlag();\n\n  const buttonRef = useRef<HTMLButtonElement>(null);\n\n  const Icon = item && getItemIcon?.(item);\n  const onlyIcon = Icon && onlyIconProp;\n  const href = item && getItemHref?.(item);\n  const label = item && getItemLabel?.(item);\n  const subMenu = item && getItemSubMenu?.(item);\n\n  const iconSize = getByMap(iconSizeMap, size);\n  const linkProps = href\n    ? ({\n        as: 'a',\n        href,\n      } as const)\n    : ({\n        as: 'span',\n      } as const);\n\n  const handleClick: React.MouseEventHandler = (e) => {\n    item && onItemClickProp?.(item, { e });\n  };\n\n  const onItemClick: BreadcrumbsPropOnItemClick<ITEM> = (item, { e }) => {\n    setOpen.off();\n    item && onItemClickProp?.(item, { e });\n  };\n\n  return (\n    <li\n      className={cnBreadcrumbsItem(null, [className])}\n      ref={ref}\n      {...otherProps}\n    >\n      {delimiter && (\n        <IconArrowRight\n          className={cnBreadcrumbsItem('Delimiter', [cnMixSpace({ mH: size })])}\n          view=\"ghost\"\n          size={iconSize}\n        />\n      )}\n      {children || (\n        <>\n          <Text\n            className={cnBreadcrumbsItem('Link', { active })}\n            view={active ? 'primary' : 'secondary'}\n            onClick={handleClick}\n            size={size}\n            truncate={!onlyIcon}\n            lineHeight=\"m\"\n            {...linkProps}\n          >\n            {Icon &&\n              (onlyIcon ? (\n                <Button\n                  type=\"button\"\n                  view=\"clear\"\n                  onlyIcon\n                  iconLeft={Icon}\n                  size={iconSize}\n                />\n              ) : (\n                <Icon\n                  className={cnBreadcrumbsItem('Icon', [\n                    cnMixSpace({ mR: 'xs' }),\n                  ])}\n                  size={iconSize}\n                />\n              ))}\n            {!onlyIcon && label}\n          </Text>\n          {subMenu && (\n            <button\n              ref={buttonRef}\n              onClick={setOpen.toggle}\n              type=\"button\"\n              className={cnBreadcrumbsItem('SelectButton')}\n            >\n              <IconSelect size=\"xs\" view={active ? 'primary' : 'secondary'} />\n            </button>\n          )}\n        </>\n      )}\n      {subMenu && (\n        <ContextMenu\n          isOpen={open}\n          items={subMenu}\n          getItemLabel={getItemLabel}\n          getItemSubMenu={getItemSubMenu}\n          getItemLeftIcon={getItemIcon}\n          onItemClick={onItemClick}\n          getItemAs={getItemAs(getItemHref)}\n          getItemAttributes={getItemAttributes(getItemHref)}\n          direction=\"downStartRight\"\n          possibleDirections={[\n            'downStartLeft',\n            'upStartLeft',\n            'downStartRight',\n            'upStartRight',\n          ]}\n          anchorRef={buttonRef}\n          offset=\"xs\"\n          onClickOutside={setOpen.off}\n          size={contextMenuSizeMap[size]}\n        />\n      )}\n    </li>\n  );\n}\n\nexport const BreadcrumbsItem = forwardRef(\n  BreadcrumbsItemRender,\n) as BreadcrumbsItemComponent;\n"],"mappings":"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"}