import _defineProperty from"@babel/runtime/helpers/defineProperty";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["size","items","className","style","getItemHref","getItemIcon","getItemLabel","getItemOnClick","getItemSubMenu","onItemClick"];function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}import"./BreadcrumbsMore.css";import{IconMeatball}from"@consta/icons/IconMeatball";import React,{forwardRef,useEffect,useRef}from"react";import{useFlag}from"../../../hooks/useFlag/useFlag";import{cn}from"../../../utils/bem";import{getByMap}from"../../../utils/getByMap";import{Button}from"../../Button/Button";import{ContextMenu}from"../../ContextMenu/ContextMenu";import{BreadcrumbsItem}from"../BreadcrumbsItem/BreadcrumbsItem";import{iconSizeMap}from"../helpers";var cnBreadcrumbsMore=cn("BreadcrumbsMore");export function getLeftSideBar(a,b){return function(c){var d=null===b||void 0===b?void 0:b(c);return d?React.createElement(d,{size:a}):void 0}}export function getItemAs(a){return function(b){var c=null===a||void 0===a?void 0:a(b);return c?"a":"span"}}export function getItemAttributes(a){return function(b){return a&&{href:a(b)}}}export var contextMenuSizeMap={xs:"s",s:"s",m:"m",l:"l"};function BreadcrumbsMoreRender(a,b){var c=a.size,d=a.items,e=a.className,f=a.style,g=a.getItemHref,h=a.getItemIcon,i=a.getItemLabel,j=a.getItemOnClick,k=a.getItemSubMenu,l=a.onItemClick,m=_objectWithoutProperties(a,_excluded),n=useFlag(),o=_slicedToArray(n,2),p=o[0],q=o[1],r=useRef(null),s=getByMap(iconSizeMap,c);useEffect(q.off,[d]);return React.createElement(BreadcrumbsItem,Object.assign({},m,{className:cnBreadcrumbsMore(null,[e]),delimiter:!0,size:c,ref:b,style:_objectSpread(_objectSpread({},f),{},_defineProperty({},"--breadcrumbs-more-font-size","var(--size-text-".concat(c,")")))}),React.createElement(Button,{className:cnBreadcrumbsMore("Button"),view:"clear",type:"button",onlyIcon:!0,iconLeft:IconMeatball,size:s,ref:r,onClick:q.toggle}),React.createElement(ContextMenu,{items:d,isOpen:p,getItemLabel:i,getItemSubMenu:k,getItemOnClick:j,onItemClick:function onItemClick(a,b){var c,d=b.e;null===l||void 0===l?void 0:l(a,{e:d}),null===j||void 0===j||null===(c=j(a))||void 0===c?void 0:c(d)},getItemLeftIcon:h,anchorRef:r,onClickOutside:q.off,getItemAs:getItemAs(g),getItemAttributes:getItemAttributes(g),direction:"downCenter",possibleDirections:["downCenter","upCenter","downStartLeft","upStartLeft","downStartRight","upStartRight"],offset:"xs",size:contextMenuSizeMap[c]}))}export var BreadcrumbsMore=forwardRef(BreadcrumbsMoreRender);
//# sourceMappingURL=BreadcrumbsMore.js.map