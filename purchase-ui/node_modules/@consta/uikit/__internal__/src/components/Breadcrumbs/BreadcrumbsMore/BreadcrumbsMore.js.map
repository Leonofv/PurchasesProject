{"version":3,"file":"BreadcrumbsMore.js","names":["IconMeatball","React","forwardRef","useEffect","useRef","useFlag","cn","getByMap","Button","ContextMenu","BreadcrumbsItem","iconSizeMap","cnBreadcrumbsMore","getLeftSideBar","iconSize","getItemIcon","item","Icon","getItemAs","getItemHref","href","getItemAttributes","contextMenuSizeMap","xs","s","m","l","BreadcrumbsMoreRender","props","ref","size","items","className","style","getItemLabel","getItemOnClick","getItemSubMenu","onItemClickProp","onItemClick","otherProps","open","setOpen","buttonRef","off","toggle","e","BreadcrumbsMore"],"sources":["../../../../../../src/components/Breadcrumbs/BreadcrumbsMore/BreadcrumbsMore.tsx"],"sourcesContent":["import './BreadcrumbsMore.css';\n\nimport { IconMeatball } from '@consta/icons/IconMeatball';\nimport React, { forwardRef, useEffect, useRef } from 'react';\n\nimport { useFlag } from '../../../hooks/useFlag/useFlag';\nimport { cn } from '../../../utils/bem';\nimport { getByMap } from '../../../utils/getByMap';\nimport { Button } from '../../Button/Button';\nimport {\n  ContextMenu,\n  ContextMenuPropOnItemClick,\n} from '../../ContextMenu/ContextMenu';\nimport { BreadcrumbsItem } from '../BreadcrumbsItem/BreadcrumbsItem';\nimport { iconSizeMap } from '../helpers';\nimport {\n  BreadcrumbsMoreComponent,\n  BreadcrumbsMoreProps,\n  BreadcrumbsPropGetItemHref,\n  BreadcrumbsPropGetItemIcon,\n} from '../types';\n\nconst cnBreadcrumbsMore = cn('BreadcrumbsMore');\n\nexport function getLeftSideBar<ITEM>(\n  iconSize: 'xs' | 'm',\n  getItemIcon?: BreadcrumbsPropGetItemIcon<ITEM>,\n) {\n  return function (item: ITEM) {\n    const Icon = getItemIcon?.(item);\n    if (Icon) {\n      return <Icon size={iconSize} />;\n    }\n    return undefined;\n  };\n}\n\nexport function getItemAs<ITEM>(\n  getItemHref?: BreadcrumbsPropGetItemHref<ITEM>,\n) {\n  return (item: ITEM) => {\n    const href = getItemHref?.(item);\n    return href ? 'a' : 'span';\n  };\n}\n\nexport function getItemAttributes<ITEM>(\n  getItemHref?: BreadcrumbsPropGetItemHref<ITEM>,\n) {\n  return (item: ITEM) => {\n    return getItemHref && { href: getItemHref(item) };\n  };\n}\n\nexport const contextMenuSizeMap = {\n  xs: 's',\n  s: 's',\n  m: 'm',\n  l: 'l',\n} as const;\n\nfunction BreadcrumbsMoreRender<ITEM>(\n  props: BreadcrumbsMoreProps<ITEM>,\n  ref: React.Ref<HTMLLIElement>,\n) {\n  const {\n    size,\n    items,\n    className,\n    style,\n    getItemHref,\n    getItemIcon,\n    getItemLabel,\n    getItemOnClick,\n    getItemSubMenu,\n    onItemClick: onItemClickProp,\n    ...otherProps\n  } = props;\n\n  const [open, setOpen] = useFlag();\n\n  const buttonRef = useRef<HTMLButtonElement>(null);\n\n  const iconSize = getByMap(iconSizeMap, size);\n\n  useEffect(setOpen.off, [items]);\n\n  const onItemClick: ContextMenuPropOnItemClick<ITEM> = (item, { e }) => {\n    onItemClickProp?.(item, { e });\n    getItemOnClick?.(item)?.(e);\n  };\n\n  return (\n    <BreadcrumbsItem\n      {...otherProps}\n      className={cnBreadcrumbsMore(null, [className])}\n      delimiter\n      size={size}\n      ref={ref}\n      style={{\n        ...style,\n        ['--breadcrumbs-more-font-size' as string]: `var(--size-text-${size})`,\n      }}\n    >\n      <Button\n        className={cnBreadcrumbsMore('Button')}\n        view=\"clear\"\n        type=\"button\"\n        onlyIcon\n        iconLeft={IconMeatball}\n        size={iconSize}\n        ref={buttonRef}\n        onClick={setOpen.toggle}\n      />\n      <ContextMenu\n        items={items}\n        isOpen={open}\n        getItemLabel={getItemLabel}\n        getItemSubMenu={getItemSubMenu}\n        getItemOnClick={getItemOnClick}\n        onItemClick={onItemClick}\n        getItemLeftIcon={getItemIcon}\n        anchorRef={buttonRef}\n        onClickOutside={setOpen.off}\n        getItemAs={getItemAs(getItemHref)}\n        getItemAttributes={getItemAttributes(getItemHref)}\n        direction=\"downCenter\"\n        possibleDirections={[\n          'downCenter',\n          'upCenter',\n          'downStartLeft',\n          'upStartLeft',\n          'downStartRight',\n          'upStartRight',\n        ]}\n        offset=\"xs\"\n        size={contextMenuSizeMap[size]}\n      />\n    </BreadcrumbsItem>\n  );\n}\n\nexport const BreadcrumbsMore = forwardRef(\n  BreadcrumbsMoreRender,\n) as BreadcrumbsMoreComponent;\n"],"mappings":"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"}