{"version":3,"file":"useElements.js","names":["useMemo","useHideElementsInLine","useRefs","useResizeObserved","useReadyToHideItems","items","returnedItems","first","shift","last","pop","getLastWidth","wrapperWidth","fistWidth","itemsDimensions","visibleMap","widthExceptLast","reduce","previous","current","currentIndex","getCompression","componentWidth","useElements","firstItem","readyToHideItems","lastItem","noHideElementsRef","noHideElementsSize","el","parseInt","getComputedStyle","marginRight","marginLeft","offsetWidth","noHideElementsSizeSum","length","elementsSizes","parentSize","parentRef","elementsRefs","lastWidth","compression","hiddenItems","map","element","index","filter","item","firstItemRef","lastItemRef"],"sources":["../../../../../src/components/Breadcrumbs/useElements.ts"],"sourcesContent":["import { useMemo } from 'react';\n\nimport { useHideElementsInLine } from '##/hooks/useHideElementsInLine';\nimport { useRefs } from '##/hooks/useRefs';\nimport { useResizeObserved } from '##/hooks/useResizeObserved';\n\nconst useReadyToHideItems = <ITEM>(items: ITEM[]) =>\n  useMemo(() => {\n    const returnedItems = [...items];\n    const first = returnedItems.shift();\n    const last = returnedItems.pop();\n    return [first, returnedItems, last] as const;\n  }, [items]);\n\nconst getLastWidth = (\n  wrapperWidth: number,\n  fistWidth: number,\n  itemsDimensions: number[],\n  visibleMap: boolean[],\n) => {\n  const widthExceptLast =\n    fistWidth +\n    itemsDimensions.reduce(\n      (previous, current, currentIndex) =>\n        previous + (!visibleMap[currentIndex] ? 0 : current),\n      0,\n    );\n\n  const lastWidthCalculate = wrapperWidth - widthExceptLast;\n\n  return `${lastWidthCalculate}px`;\n};\n\nconst getCompression = (componentWidth: number) => {\n  if (componentWidth <= 380) {\n    return 's';\n  }\n  if (componentWidth <= 900) {\n    return 'm';\n  }\n  if (componentWidth <= 1200) {\n    return 'l';\n  }\n  return 'xl';\n};\n\nexport const useElements = <ITEM>(items: ITEM[]) => {\n  const [firstItem, readyToHideItems, lastItem] = useReadyToHideItems(items);\n\n  const noHideElementsRef = useRefs<HTMLLIElement>(2);\n\n  const noHideElementsSize = useResizeObserved(noHideElementsRef, (el) =>\n    el\n      ? parseInt(getComputedStyle(el).marginRight, 10) +\n        parseInt(getComputedStyle(el).marginLeft, 10) +\n        el.offsetWidth\n      : 0,\n  );\n\n  const noHideElementsSizeSum = noHideElementsSize.reduce(\n    (previous, current) => previous + current,\n    0,\n  );\n\n  const { elementsSizes, parentSize, visibleMap, parentRef, elementsRefs } =\n    useHideElementsInLine<HTMLLIElement, HTMLUListElement>(\n      readyToHideItems.length + 1,\n      0,\n      noHideElementsSizeSum,\n    );\n\n  const lastWidth = getLastWidth(\n    parentSize,\n    noHideElementsSize[0],\n    elementsSizes,\n    visibleMap,\n  );\n\n  const compression = getCompression(parentSize);\n\n  const hiddenItems = visibleMap\n    .map((element, index) => {\n      if (!element && index !== 0) {\n        return items[index];\n      }\n    })\n    .filter((item) => Boolean(item)) as ITEM[];\n\n  return {\n    firstItem,\n    lastItem,\n    readyToHideItems,\n    hiddenItems,\n    visibleMap,\n    firstItemRef: noHideElementsRef[0],\n    lastItemRef: noHideElementsRef[1],\n    lastWidth,\n    compression,\n    parentRef,\n    elementsRefs,\n  };\n};\n"],"mappings":"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"}