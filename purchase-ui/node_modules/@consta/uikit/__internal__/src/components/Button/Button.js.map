{"version":3,"file":"Button.js","names":["React","useRef","useForkRef","cnMixFocus","cn","getByMap","forwardRefWithAs","usePropsHandler","Loader","buttonPropSize","buttonPropSizeDefault","buttonPropView","buttonPropViewDefault","buttonPropWidth","buttonPropWidthDefault","buttonPropForm","mapStableForm","defaultClear","defaultBrick","brick","brickDefault","brickClear","brickRound","round","roundClear","roundBrick","clearRound","clearDefault","clearBrick","clearClear","buttonPropFormDefault","COMPONENT_NAME","cnButton","sizeMap","xs","s","m","l","sizeMapOnlyIcon","Button","props","ref","buttonRef","size","view","width","form","iconLeft","iconRight","label","className","onClick","disabled","loading","type","tabIndex","as","onlyIcon","iconSizeProp","iconSize","formId","otherProps","IconOnly","IconLeft","IconRight","title","handleClick","e","withIcon","position"],"sources":["../../../../../src/components/Button/Button.tsx"],"sourcesContent":["import './Button.css';\n\nimport { IconComponent, IconPropSize } from '@consta/icons/Icon';\nimport React, { HTMLProps, useRef } from 'react';\n\nimport { useForkRef } from '../../hooks/useForkRef/useForkRef';\nimport { cnMixFocus } from '../../mixs/MixFocus/MixFocus';\nimport { cn } from '../../utils/bem';\nimport { getByMap } from '../../utils/getByMap';\nimport { forwardRefWithAs } from '../../utils/types/PropsWithAsAttributes';\nimport { usePropsHandler } from '../EventInterceptor/usePropsHandler';\nimport { Loader } from '../LoaderDeprecated/LoaderDeprecated';\n\nexport const buttonPropSize = ['m', 'xs', 's', 'l'] as const;\nexport type ButtonPropSize = typeof buttonPropSize[number];\nexport const buttonPropSizeDefault: ButtonPropSize = buttonPropSize[0];\n\nexport const buttonPropView = [\n  'primary',\n  'clear',\n  'ghost',\n  'secondary',\n] as const;\nexport type ButtonPropView = typeof buttonPropView[number];\nexport const buttonPropViewDefault: ButtonPropView = buttonPropView[0];\n\nexport const buttonPropWidth = ['default', 'full'] as const;\nexport type ButtonPropWidth = typeof buttonPropWidth[number];\nexport const buttonPropWidthDefault: ButtonPropWidth = buttonPropWidth[0];\n\nexport const buttonPropForm = [\n  'default',\n  'brick',\n  'round',\n  'brickRound',\n  'roundBrick',\n  'brickDefault',\n  'defaultBrick',\n] as const;\n\nexport type ButtonPropForm = typeof buttonPropForm[number];\n\ntype GlobalForm =\n  | 'default'\n  | 'brick'\n  | 'round'\n  | 'brickRound'\n  | 'roundBrick'\n  | 'brickDefault'\n  | 'defaultBrick'\n  | 'defaultClear'\n  | 'brickClear'\n  | 'roundClear'\n  | 'clearRound'\n  | 'clearDefault'\n  | 'clearBrick'\n  | 'clearClear';\n\nconst mapStableForm: Record<GlobalForm, ButtonPropForm> = {\n  default: 'default',\n  defaultClear: 'defaultBrick',\n  defaultBrick: 'defaultBrick',\n  brick: 'brick',\n  brickDefault: 'brickDefault',\n  brickClear: 'brick',\n  brickRound: 'brickRound',\n  round: 'round',\n  roundClear: 'roundBrick',\n  roundBrick: 'roundBrick',\n  clearRound: 'brickRound',\n  clearDefault: 'brickDefault',\n  clearBrick: 'brick',\n  clearClear: 'brick',\n};\n\nexport const buttonPropFormDefault = buttonPropForm[0];\n\nexport type Props = {\n  size?: ButtonPropSize;\n  view?: ButtonPropView;\n  width?: ButtonPropWidth;\n  form?: ButtonPropForm;\n  tabIndex?: number;\n  disabled?: boolean;\n  loading?: boolean;\n  label?: string | number;\n  onClick?: React.EventHandler<React.MouseEvent>;\n  iconLeft?: IconComponent;\n  iconRight?: IconComponent;\n  onlyIcon?: boolean;\n  iconSize?: IconPropSize;\n  title?: string;\n  children?: never;\n  type?: 'button' | 'reset' | 'submit';\n  formId?: HTMLProps<HTMLButtonElement>['form'];\n};\n\nexport const COMPONENT_NAME = 'Button' as const;\nexport const cnButton = cn(COMPONENT_NAME);\n\nconst sizeMap: Record<ButtonPropSize, IconPropSize> = {\n  xs: 'xs',\n  s: 'xs',\n  m: 's',\n  l: 'm',\n};\n\nconst sizeMapOnlyIcon: Record<ButtonPropSize, IconPropSize> = {\n  xs: 'xs',\n  s: 's',\n  m: 'm',\n  l: 'm',\n};\n\nexport const Button = forwardRefWithAs<Props, 'button'>((props, ref) => {\n  const buttonRef = useRef<HTMLButtonElement | null>(null);\n\n  const {\n    size = buttonPropSizeDefault,\n    view = buttonPropViewDefault,\n    width = buttonPropWidthDefault,\n    form = buttonPropFormDefault,\n    iconLeft,\n    iconRight,\n    label,\n    className,\n    onClick,\n    disabled,\n    loading,\n    type = 'button',\n    tabIndex,\n    as = 'button',\n    onlyIcon,\n    iconSize: iconSizeProp,\n    formId,\n    ...otherProps\n  } = usePropsHandler(COMPONENT_NAME, props, buttonRef);\n\n  const Tag = as as string;\n  const IconOnly = (!label || onlyIcon) && (iconLeft || iconRight);\n  const IconLeft = iconLeft;\n  const IconRight = iconRight;\n  const withIcon = !!iconLeft || !!iconRight;\n  const title = props.title || (!!IconOnly && label) || undefined;\n  const iconSize = IconOnly\n    ? getByMap(sizeMapOnlyIcon, size, iconSizeProp)\n    : getByMap(sizeMap, size, iconSizeProp);\n\n  const handleClick = (e: React.MouseEvent<HTMLElement>) => {\n    if (!disabled && !loading && onClick) {\n      onClick(e);\n    }\n  };\n\n  return (\n    <Tag\n      {...otherProps}\n      onClick={onClick ? handleClick : undefined}\n      form={formId}\n      type={type}\n      className={cnButton(\n        {\n          size,\n          view,\n          width,\n          form: mapStableForm[form],\n          loading,\n          disabled,\n          withIcon,\n          onlyIcon: !!IconOnly,\n        },\n        [!(disabled || loading) ? cnMixFocus() : undefined, className],\n      )}\n      disabled={disabled}\n      tabIndex={tabIndex}\n      title={title}\n      ref={useForkRef([ref, buttonRef])}\n    >\n      {IconOnly && <IconOnly className={cnButton('Icon')} size={iconSize} />}\n      {!IconOnly &&\n        ((IconLeft || IconRight) && label ? (\n          <>\n            {IconLeft && (\n              <IconLeft\n                className={cnButton('Icon', { position: 'left' })}\n                size={iconSize}\n              />\n            )}\n            <span className={cnButton('Label')}>{label}</span>\n            {IconRight && (\n              <IconRight\n                className={cnButton('Icon', { position: 'right' })}\n                size={iconSize}\n              />\n            )}\n          </>\n        ) : (\n          label\n        ))}\n      {loading && <Loader className={cnButton('Loader')} size=\"s\" />}\n    </Tag>\n  );\n});\n"],"mappings":"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"}