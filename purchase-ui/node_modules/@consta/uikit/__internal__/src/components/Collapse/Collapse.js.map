{"version":3,"file":"Collapse.js","names":["IconArrowDown","React","useRef","useComponentSize","useForkRef","cn","usePropsHandler","Text","CollapseIcon","collapsePropCloseDirectionIconDefault","collapsePropDirectionIconDefault","collapsePropFormDefault","collapsePropIconPositionDefault","collapsePropIconViewDefault","collapsePropSizeDefault","collapsePropViewDefault","COMPONENT_NAME","cnCollapse","sizeIconMap","renderSide","side","sides","Array","isArray","map","item","index","getMaxHeight","height","maxHeight","collapseViewMap","clear","ghost","primary","secondary","Collapse","forwardRef","props","ref","collapseRef","contentRef","contentHeight","label","size","view","viewProp","className","maxContentHeight","isOpen","form","children","hoverEffect","divider","icon","closeIcon","rightSide","horizontalSpace","iconPosition","directionIcon","closeDirectionIcon","style","iconView","otherProps","iconProps","position","direction","closeDirection"],"sources":["../../../../../src/components/Collapse/Collapse.tsx"],"sourcesContent":["import './Collapse.css';\n\nimport { IconArrowDown } from '@consta/icons/IconArrowDown';\nimport React, { useRef } from 'react';\n\nimport { useComponentSize } from '##/hooks/useComponentSize';\nimport { useForkRef } from '##/hooks/useForkRef/useForkRef';\nimport { cn } from '##/utils/bem';\n\nimport { usePropsHandler } from '../EventInterceptor/usePropsHandler';\nimport { Text } from '../Text/Text';\nimport { CollapseIcon } from './CollapseIcon/CollapseIcon';\nimport {\n  CollapseComponent,\n  collapsePropCloseDirectionIconDefault,\n  collapsePropDirectionIconDefault,\n  collapsePropFormDefault,\n  collapsePropIconPositionDefault,\n  collapsePropIconViewDefault,\n  CollapseProps,\n  CollapsePropSize,\n  collapsePropSizeDefault,\n  CollapsePropView,\n  collapsePropViewDefault,\n} from './types';\n\nexport const COMPONENT_NAME = 'Collapse' as const;\n\nexport const cnCollapse = cn('Collapse');\n\nexport const sizeIconMap: Record<CollapsePropSize, 'xs' | 's'> = {\n  '2xs': 'xs',\n  'xs': 'xs',\n  's': 'xs',\n  'm': 's',\n  'l': 's',\n};\n\nfunction renderSide(side: React.ReactNode): React.ReactNode {\n  const sides = side ? [...(Array.isArray(side) ? side : [side])] : [];\n\n  return sides.map((item, index) => (\n    <div className={cnCollapse('Side')} key={index}>\n      {item}\n    </div>\n  ));\n}\n\nconst getMaxHeight = (height: number, maxHeight?: number | string) => {\n  if (maxHeight) {\n    return typeof maxHeight === 'string' ? maxHeight : `${maxHeight}px`;\n  }\n  return `${height}px`;\n};\n\nconst collapseViewMap: Record<CollapsePropView, 'clear' | 'ghost'> = {\n  clear: 'clear',\n  ghost: 'ghost',\n  primary: 'clear',\n  secondary: 'ghost',\n};\n\nexport const Collapse: CollapseComponent = React.forwardRef<\n  HTMLDivElement,\n  CollapseProps\n>((props, ref) => {\n  const collapseRef = useRef<HTMLDivElement>(null);\n  const contentRef = useRef<HTMLDivElement>(null);\n  const { height: contentHeight } = useComponentSize(contentRef);\n\n  const {\n    label,\n    size = collapsePropSizeDefault,\n    view: viewProp = collapsePropViewDefault,\n    className,\n    maxContentHeight,\n    isOpen,\n    form = collapsePropFormDefault,\n    children,\n    hoverEffect,\n    divider,\n    icon = IconArrowDown,\n    closeIcon,\n    rightSide,\n    horizontalSpace,\n    iconPosition = collapsePropIconPositionDefault,\n    directionIcon = collapsePropDirectionIconDefault,\n    closeDirectionIcon = collapsePropCloseDirectionIconDefault,\n    style,\n    iconView = collapsePropIconViewDefault,\n    ...otherProps\n  } = usePropsHandler(COMPONENT_NAME, props, collapseRef);\n\n  const view = collapseViewMap[viewProp];\n\n  const iconProps = {\n    className: cnCollapse('Icon', { position: iconPosition }),\n    size: sizeIconMap[size],\n    icon,\n    closeIcon,\n    isOpen,\n    direction: directionIcon,\n    closeDirection: closeDirectionIcon,\n    view: iconView,\n  };\n\n  return (\n    <div\n      ref={useForkRef([ref, collapseRef])}\n      className={cnCollapse({ size, view }, [className])}\n      style={{\n        ...style,\n        ['--horizontal-space' as string]: horizontalSpace\n          ? `var(--space-${horizontalSpace})`\n          : `0px`,\n      }}\n    >\n      <div\n        className={cnCollapse('Label', {\n          hoverEffect,\n          view,\n          form,\n        })}\n        {...otherProps}\n      >\n        {iconPosition === 'left' && <CollapseIcon {...iconProps} />}\n        {typeof label === 'object' ? (\n          <div className={cnCollapse('LabelText')}>{label}</div>\n        ) : (\n          <Text\n            view=\"primary\"\n            className={cnCollapse('LabelText')}\n            size={size}\n            lineHeight=\"m\"\n          >\n            {label}\n          </Text>\n        )}\n        {renderSide(rightSide)}\n        {iconPosition === 'right' && <CollapseIcon {...iconProps} />}\n      </div>\n      <div\n        style={{\n          ['--collapse-body-max-height' as string]: getMaxHeight(\n            contentHeight,\n            maxContentHeight,\n          ),\n        }}\n        className={cnCollapse('Body', { isOpen, divider })}\n      >\n        <div ref={contentRef} className={cnCollapse('Content')}>\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n});\n\nexport * from './types';\n"],"mappings":"mjCAAA,uBAEA,OAASA,aAAT,KAA8B,6BAA9B,CACA,MAAOC,MAAP,EAAgBC,MAAhB,KAA8B,OAA9B,CAEA,OAASC,gBAAT,oCACA,OAASC,UAAT,yCACA,OAASC,EAAT,uBAEA,OAASC,eAAT,2CACA,OAASC,IAAT,oBACA,OAASC,YAAT,mCACA,OAEEC,qCAFF,CAGEC,gCAHF,CAIEC,uBAJF,CAKEC,+BALF,CAMEC,2BANF,CASEC,uBATF,CAWEC,uBAXF,eAcA,MAAO,IAAMC,eAAc,CAAG,UAAvB,CAEP,MAAO,IAAMC,WAAU,CAAGZ,EAAE,CAAC,UAAD,CAArB,CAEP,MAAO,IAAMa,YAAiD,CAAG,CAC/D,MAAO,IADwD,CAE/D,GAAM,IAFyD,CAG/D,EAAK,IAH0D,CAI/D,EAAK,GAJ0D,CAK/D,EAAK,GAL0D,CAA1D,CAQP,QAASC,WAAT,CAAoBC,CAApB,CAA4D,CAC1D,GAAMC,EAAK,CAAGD,CAAI,oBAAQE,KAAK,CAACC,OAAN,CAAcH,CAAd,EAAsBA,CAAtB,CAA6B,CAACA,CAAD,CAArC,EAAgD,EAAlE,CAEA,MAAOC,EAAK,CAACG,GAAN,CAAU,SAACC,CAAD,CAAOC,CAAP,QACf,4BAAK,SAAS,CAAET,UAAU,CAAC,MAAD,CAA1B,CAAoC,GAAG,CAAES,CAAzC,EACGD,CADH,CADe,CAAV,CAKR,C,GAEKE,aAAY,CAAG,SAACC,CAAD,CAAiBC,CAAjB,CAAiD,OAChEA,EADgE,CAEtC,QAArB,QAAOA,EAAP,CAAgCA,CAAhC,WAA+CA,CAA/C,MAF2D,WAI1DD,CAJ0D,MAKrE,C,CAEKE,eAA4D,CAAG,CACnEC,KAAK,CAAE,OAD4D,CAEnEC,KAAK,CAAE,OAF4D,CAGnEC,OAAO,CAAE,OAH0D,CAInEC,SAAS,CAAE,OAJwD,C,CAOrE,MAAO,IAAMC,SAA2B,CAAGlC,KAAK,CAACmC,UAAN,CAGzC,SAACC,CAAD,CAAQC,CAAR,CAAgB,IACVC,EAAW,CAAGrC,MAAM,CAAiB,IAAjB,CADV,CAEVsC,CAAU,CAAGtC,MAAM,CAAiB,IAAjB,CAFT,GAGkBC,gBAAgB,CAACqC,CAAD,CAHlC,CAGAC,CAHA,GAGRb,MAHQ,GA0BZtB,eAAe,CAACU,cAAD,CAAiBqB,CAAjB,CAAwBE,CAAxB,CA1BH,CAMdG,CANc,GAMdA,KANc,KAOdC,IAPc,CAOdA,CAPc,YAOP7B,uBAPO,OAQd8B,IARc,CAQRC,CARQ,YAQG9B,uBARH,GASd+B,CATc,GASdA,SATc,CAUdC,CAVc,GAUdA,gBAVc,CAWdC,CAXc,GAWdA,MAXc,KAYdC,IAZc,CAYdA,CAZc,YAYPtC,uBAZO,GAaduC,CAbc,GAadA,QAbc,CAcdC,CAdc,GAcdA,WAdc,CAedC,CAfc,GAedA,OAfc,KAgBdC,IAhBc,CAgBdA,CAhBc,YAgBPrD,aAhBO,GAiBdsD,CAjBc,GAiBdA,SAjBc,CAkBdC,CAlBc,GAkBdA,SAlBc,CAmBdC,CAnBc,GAmBdA,eAnBc,KAoBdC,YApBc,CAoBdA,CApBc,YAoBC7C,+BApBD,OAqBd8C,aArBc,CAqBdA,CArBc,YAqBEhD,gCArBF,OAsBdiD,kBAtBc,CAsBdA,CAtBc,YAsBOlD,qCAtBP,GAuBdmD,CAvBc,GAuBdA,KAvBc,KAwBdC,QAxBc,CAwBdA,CAxBc,YAwBHhD,2BAxBG,GAyBXiD,CAzBW,uCA4BVlB,CAAI,CAAGd,eAAe,CAACe,CAAD,CA5BZ,CA8BVkB,CAAS,CAAG,CAChBjB,SAAS,CAAE7B,UAAU,CAAC,MAAD,CAAS,CAAE+C,QAAQ,CAAEP,CAAZ,CAAT,CADL,CAEhBd,IAAI,CAAEzB,WAAW,CAACyB,CAAD,CAFD,CAGhBU,IAAI,CAAJA,CAHgB,CAIhBC,SAAS,CAATA,CAJgB,CAKhBN,MAAM,CAANA,CALgB,CAMhBiB,SAAS,CAAEP,CANK,CAOhBQ,cAAc,CAAEP,CAPA,CAQhBf,IAAI,CAAEiB,CARU,CA9BF,CAyChB,MACE,4BACE,GAAG,CAAEzD,UAAU,CAAC,CAACkC,CAAD,CAAMC,CAAN,CAAD,CADjB,CAEE,SAAS,CAAEtB,UAAU,CAAC,CAAE0B,IAAI,CAAJA,CAAF,CAAQC,IAAI,CAAJA,CAAR,CAAD,CAAiB,CAACE,CAAD,CAAjB,CAFvB,CAGE,KAAK,gCACAc,CADA,wBAEF,oBAFE,CAE+BJ,CAAe,uBAC9BA,CAD8B,WAF9C,EAHP,EAUE,yCACE,SAAS,CAAEvC,UAAU,CAAC,OAAD,CAAU,CAC7BkC,WAAW,CAAXA,CAD6B,CAE7BP,IAAI,CAAJA,CAF6B,CAG7BK,IAAI,CAAJA,CAH6B,CAAV,CADvB,EAMMa,CANN,EAQoB,MAAjB,GAAAL,CAAY,EAAe,oBAAC,YAAD,CAAkBM,CAAlB,CAR9B,CASoB,QAAjB,QAAOrB,EAAP,CACC,2BAAK,SAAS,CAAEzB,UAAU,CAAC,WAAD,CAA1B,EAA0CyB,CAA1C,CADD,CAGC,oBAAC,IAAD,EACE,IAAI,CAAC,SADP,CAEE,SAAS,CAAEzB,UAAU,CAAC,WAAD,CAFvB,CAGE,IAAI,CAAE0B,CAHR,CAIE,UAAU,CAAC,GAJb,EAMGD,CANH,CAZJ,CAqBGvB,UAAU,CAACoC,CAAD,CArBb,CAsBoB,OAAjB,GAAAE,CAAY,EAAgB,oBAAC,YAAD,CAAkBM,CAAlB,CAtB/B,CAVF,CAkCE,2BACE,KAAK,oBACF,4BADE,CACuCpC,YAAY,CACpDc,CADoD,CAEpDM,CAFoD,CADnD,CADP,CAOE,SAAS,CAAE9B,UAAU,CAAC,MAAD,CAAS,CAAE+B,MAAM,CAANA,CAAF,CAAUI,OAAO,CAAPA,CAAV,CAAT,CAPvB,EASE,2BAAK,GAAG,CAAEZ,CAAV,CAAsB,SAAS,CAAEvB,UAAU,CAAC,SAAD,CAA3C,EACGiC,CADH,CATF,CAlCF,CAiDH,CA9F0C,CAApC,CAgGP"}