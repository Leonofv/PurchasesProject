import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import{useEffect,useLayoutEffect,useRef,useState}from"react";import{usePrevious}from"../../hooks/usePrevious";import{useRefs}from"../../hooks/useRefs";import{animateTimeout}from"../../mixs/MixPopoverAnimate";export var useMenuNavigation=function(a){var b=a.items,c=a.addLevel,d=a.deleteLevel,e=a.active,f=a.getItemSubMenu,g=a.level,h=void 0===g?0:g,i=a.onEsc,j=a.isMobile,k=useState(-1),l=_slicedToArray(k,2),m=l[0],n=l[1],o=useState(),p=_slicedToArray(o,2),q=p[0],r=p[1],s=useRefs(b.length),t=useRef(null),u=useRef(null),v=usePrevious(e);useLayoutEffect(function(){setTimeout(function(){var a;return null===(a=t.current)||void 0===a?void 0:a.focus()},2*animateTimeout)},[]),useLayoutEffect(function(){setTimeout(function(){var a;null===(a=(0<=m?s[m]:u).current)||void 0===a?void 0:a.focus()},v?2*animateTimeout:0),e&&setTimeout(function(){var a;null===(a=t.current)||void 0===a?void 0:a.focus()},j?animateTimeout:0)},[e]),useEffect(function(){setTimeout(function(){var a;null===(a=(0<=m?s[m]:u).current)||void 0===a?void 0:a.focus()},j?animateTimeout:0)},[m]);return{refs:s,activeIndex:m,onKeyDown:function onKeyDown(a){a.stopPropagation(),a.preventDefault();var e=a.code;if("ArrowUp"===e){if(j&&0>m-1){var g;u&&(null===(g=u.current)||void 0===g?void 0:g.focus())}n(Math.max(m-1,j?-1:0))}if("ArrowRight"===e&&0<=m){if(j)return void(!f(b[m])||c(b[m]));null!==q&&void 0!==q&&q.includes("left")&&!f(b[m])?d():c(b[m])}if("ArrowDown"===e&&n(Math.min(m+1,b.length-1)),"ArrowLeft"===e&&(null!==q&&void 0!==q&&q.includes("right")||j)&&d(),"Enter"===e)if(!(0<=m)){var k;null===(k=u.current)||void 0===k?void 0:k.click()}else if(f(b[m]))c(b[m]);else{var l;null===(l=s[m].current)||void 0===l?void 0:l.click()}if("Space"===e){var o;null===(o=(0<=m?s[m]:u).current)||void 0===o?void 0:o.click()}"Escape"===e&&(0===h?null===i||void 0===i?void 0:i(a):d())},setActiveIndex:n,setDirection:r,parentRef:u,containerRef:t}};
//# sourceMappingURL=useMenuNavigation.js.map