import _toConsumableArray from"@babel/runtime/helpers/toConsumableArray";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["events","dateTimeView","locale","dropdownForm","onFocus","dropdownClassName","onBlur","leftSide","rightSide","currentVisibleDate","onChangeCurrentVisibleDate","renderAdditionalControls","inputRef","name","placeholder","onDropdownOpen","dropdownOpen","ignoreOutsideClicksRefs","disabled"];import addYears from"date-fns/addYears";import startOfYear from"date-fns/startOfYear";import React,{forwardRef,useCallback,useEffect,useRef,useState}from"react";import{useClickOutside}from"../../../hooks/useClickOutside";import{useForkRef}from"../../../hooks/useForkRef";import{DatePickerDropdown}from"../DatePickerDropdown/DatePickerDropdown";import{DatePickerFieldTypeMonthRange}from"../DatePickerFieldTypeMonthRange/DatePickerFieldTypeMonthRange";import{getDropdownZIndex,normalizeRangeValue}from"../helpers";import{datePickerPropDateTimeViewDefault}from"../types";import{useCalendarVisible}from"../useCalendarVisible";import{useCurrentVisibleDate}from"../useCurrentVisibleDate";export var DatePickerTypeMonthRange=forwardRef(function(a,b){var c,d,e,f,g=a.events,h=a.dateTimeView,i=void 0===h?datePickerPropDateTimeViewDefault:h,j=a.locale,k=a.dropdownForm,l=a.onFocus,m=a.dropdownClassName,n=a.onBlur,o=a.leftSide,p=a.rightSide,q=a.currentVisibleDate,r=a.onChangeCurrentVisibleDate,s=a.renderAdditionalControls,t=a.inputRef,u=a.name,v=a.placeholder,w=a.onDropdownOpen,x=a.dropdownOpen,y=a.ignoreOutsideClicksRefs,z=a.disabled,A=_objectWithoutProperties(a,_excluded),B=useRef(null),C=useRef(null),D=useRef(null),E=useRef(null),F=useRef(null),G=useState(!1),H=_slicedToArray(G,2),I=H[0],J=H[1],K="start"===I,L="end"===I,M=useCalendarVisible({dropdownOpen:x,onDropdownOpen:w,disabled:z,startRef:D,endRef:E}),N=_slicedToArray(M,2),O=N[0],P=N[1],Q=useCurrentVisibleDate({currentVisibleDate:q,maxDate:a.maxDate,minDate:a.minDate,value:a.value,startOfUnit:startOfYear,onChangeCurrentVisibleDate:r,calendarVisible:O}),R=_slicedToArray(Q,2),S=R[0],T=R[1];return useEffect(function(){var b,c;if(null!==(b=a.value)&&void 0!==b&&b[0]&&"classic"===i&&K){var d=startOfYear(a.value[0]);return void(d.getTime()!==(null===S||void 0===S?void 0:S.getTime())&&T(d))}if(null!==(c=a.value)&&void 0!==c&&c[0]&&"classic"!==i&&K){var e=startOfYear(a.value[0]);e.getTime()!==(null===S||void 0===S?void 0:S.getTime())&&e.getTime()!==(S&&addYears(S,1).getTime())&&T(e)}},[null===(c=a.value)||void 0===c||null===(d=c[0])||void 0===d?void 0:d.getTime(),O,K]),useEffect(function(){var b,c;if(null!==(b=a.value)&&void 0!==b&&b[1]&&"classic"===i&&L){var d=startOfYear(a.value[1]);return void(d.getTime()!==(null===S||void 0===S?void 0:S.getTime())&&T(d))}if(null!==(c=a.value)&&void 0!==c&&c[1]&&"classic"!==i&&L){var e=startOfYear(a.value[1]);e.getTime()!==(null===S||void 0===S?void 0:S.getTime())&&e.getTime()!==(S&&addYears(S,1).getTime())&&T(addYears(e,-1))}},[null===(e=a.value)||void 0===e||null===(f=e[1])||void 0===f?void 0:f.getTime(),O,L]),useClickOutside({isActive:O,ignoreClicksInsideRefs:[B,C,F].concat(_toConsumableArray(null!==y&&void 0!==y?y:[])),handler:useCallback(function(){J(!1),P.off()},[])}),React.createElement(React.Fragment,null,React.createElement(DatePickerFieldTypeMonthRange,Object.assign({},A,{ref:b,startFieldRef:B,endFieldRef:C,startFieldInputRef:useForkRef([D,null===t||void 0===t?void 0:t[0]]),endFieldInputRef:useForkRef([E,null===t||void 0===t?void 0:t[1]]),startFieldOnFocus:function startFieldOnFocusHandler(a){var b;J("start"),Array.isArray(l)?null===(b=l[0])||void 0===b?void 0:b.call(l,a):null===l||void 0===l?void 0:l(a)},endFieldOnFocus:function endFieldOnFocusHandler(a){var b;J("end"),Array.isArray(l)?null===(b=l[1])||void 0===b?void 0:b.call(l,a):null===l||void 0===l?void 0:l(a)},startFieldLeftSide:Array.isArray(o)?null===o||void 0===o?void 0:o[0]:o,startFieldRightSide:Array.isArray(p)?null===p||void 0===p?void 0:p[0]:void 0,endFieldLeftSide:Array.isArray(o)?null===o||void 0===o?void 0:o[1]:void 0,endFieldRightSide:Array.isArray(p)?null===p||void 0===p?void 0:p[1]:p,startFieldOnBlur:function startFieldOnBlurHandler(a){var b;return Array.isArray(n)?null===(b=n[0])||void 0===b?void 0:b.call(n,a):null===n||void 0===n?void 0:n(a)},endFieldOnBlur:function endFieldOnBlurHandler(a){var b;return Array.isArray(n)?null===(b=n[1])||void 0===b?void 0:b.call(n,a):null===n||void 0===n?void 0:n(a)},startFocused:K,endFocused:L,startFieldOnClick:P.on,endFieldOnClick:P.on,startFieldName:Array.isArray(u)?u[0]:"".concat(u,"_start"),endFieldName:Array.isArray(u)?u[1]:"".concat(u,"_end"),disabled:z,startFieldPlaceholder:Array.isArray(v)?null===v||void 0===v?void 0:v[0]:v,endFieldPlaceholder:Array.isArray(v)?null===v||void 0===v?void 0:v[1]:v})),React.createElement(DatePickerDropdown,{type:"month",ref:F,anchorRef:B,isOpen:O,onChangeCurrentVisibleDate:T,currentVisibleDate:S,value:a.value||void 0,view:i,events:g,className:m,locale:j,minDate:a.minDate,maxDate:a.maxDate,form:k,onChange:function hadleChange(b,c){var d=c.e;if(K){var e,f,g=normalizeRangeValue([b,null===a||void 0===a||null===(e=a.value)||void 0===e?void 0:e[1]]);null===(f=a.onChange)||void 0===f?void 0:f.call(a,g,{e:d})}if(L){var h,i,j=normalizeRangeValue([null===a||void 0===a||null===(h=a.value)||void 0===h?void 0:h[0],b]);null===(i=a.onChange)||void 0===i?void 0:i.call(a,j,{e:d})}},renderAdditionalControls:s,zIndex:getDropdownZIndex(a.style)}))});
//# sourceMappingURL=DatePickerTypeMonthRange.js.map