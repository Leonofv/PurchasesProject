import _toConsumableArray from"@babel/runtime/helpers/toConsumableArray";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["events","dateTimeView","locale","dropdownForm","dropdownClassName","currentVisibleDate","onChangeCurrentVisibleDate","renderAdditionalControls","onDropdownOpen","dropdownOpen","disabled","ignoreOutsideClicksRefs","inputRef"];import{addYears,startOfDecade}from"date-fns";import React,{forwardRef,useEffect,useRef}from"react";import{useClickOutside}from"../../../hooks/useClickOutside/useClickOutside";import{useForkRef}from"../../../hooks/useForkRef";import{setRef}from"../../../utils/setRef";import{DatePickerDropdown}from"../DatePickerDropdown/DatePickerDropdown";import{DatePickerFieldTypeYear}from"../DatePickerFieldTypeYear/DatePickerFieldTypeYear";import{getDropdownZIndex}from"../helpers";import{datePickerPropDateTimeViewDefault}from"../types";import{useCalendarVisible}from"../useCalendarVisible";import{useCurrentVisibleDate}from"../useCurrentVisibleDate";export var DatePickerTypeYear=forwardRef(function(a,b){var c=a.events,d=a.dateTimeView,e=void 0===d?datePickerPropDateTimeViewDefault:d,f=a.locale,g=a.dropdownForm,h=a.dropdownClassName,i=a.currentVisibleDate,j=a.onChangeCurrentVisibleDate,k=a.renderAdditionalControls,l=a.onDropdownOpen,m=a.dropdownOpen,n=a.disabled,o=a.ignoreOutsideClicksRefs,p=a.inputRef,q=_objectWithoutProperties(a,_excluded),r=useRef(null),s=useRef(null),t=useRef(null),u=useCalendarVisible({dropdownOpen:m,onDropdownOpen:l,disabled:n,startRef:t}),v=_slicedToArray(u,2),w=v[0],x=v[1],y=useCurrentVisibleDate({currentVisibleDate:i,maxDate:a.maxDate,minDate:a.minDate,value:a.value,startOfUnit:startOfDecade,onChangeCurrentVisibleDate:j,calendarVisible:w}),z=_slicedToArray(y,2),A=z[0],B=z[1];return useEffect(function(){b&&setRef(b,r.current)},[b,r]),useEffect(function(){if(a.value&&"classic"===e&&A){var b=startOfDecade(a.value);return void(b.getTime()!==A.getTime()&&B(b))}if(a.value&&"classic"!==e&&A){var c=startOfDecade(a.value);c.getTime()!==A.getTime()&&c.getTime()!==addYears(A,10).getTime()&&B(c)}},[a.value]),useClickOutside({isActive:w,ignoreClicksInsideRefs:[r,s].concat(_toConsumableArray(null!==o&&void 0!==o?o:[])),handler:x.off}),React.createElement(React.Fragment,null,React.createElement(DatePickerFieldTypeYear,Object.assign({},q,{ref:r,inputRef:useForkRef([t,p]),disabled:n,onClick:x.on})),React.createElement(DatePickerDropdown,{ref:s,anchorRef:r,className:h,isOpen:w,value:a.value||void 0,type:"year",view:e,events:c,locale:f,minDate:a.minDate,maxDate:a.maxDate,currentVisibleDate:A,form:g,onChange:function onChange(){for(var b,c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];null===(b=a.onChange)||void 0===b?void 0:b.call.apply(b,[a].concat(d)),x.off()},renderAdditionalControls:k,zIndex:getDropdownZIndex(a.style),onChangeCurrentVisibleDate:B}))});
//# sourceMappingURL=DatePickerTypeYear.js.map