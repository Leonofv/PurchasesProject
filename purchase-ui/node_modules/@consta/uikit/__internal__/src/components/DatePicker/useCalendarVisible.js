import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import{useEffect,useRef}from"react";import{useFlag}from"../../hooks/useFlag";import{useKeysRef}from"../../hooks/useKeysRef";var useFlagWithDisabled=function(){var a=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0],b=1<arguments.length?arguments[1]:void 0,c=useFlag(a),d=_slicedToArray(c,2),e=d[0],f=d[1];return useEffect(function(){b&&f.off()},[b]),[e,{on:function on(){b||f.on()},off:function off(){return f.off()},toggle:function toggle(){b||f.toggle()},set:function set(a){b||f.set(a)}}]};export var useCalendarVisible=function(a){var b=a.onDropdownOpen,c=a.dropdownOpen,d=a.disabled,e=a.startRef,f=a.endRef,g=useFlagWithDisabled(!1,d),h=_slicedToArray(g,2),i=h[0],j=h[1],k=useRef(!0),l=function(a){a.preventDefault(),j.on()},m={ArrowUp:l,ArrowDown:l,PageUp:l,PageDown:l,Home:l,End:l,Enter:function Enter(){d||j.on()},Escape:function Escape(){j.off()},Tab:function Tab(a){i&&(a.preventDefault(),j.off())}},n=function(a){var b=a.key;"Tab"!==b&&"Escape"!==b&&j.on()};return useKeysRef({ref:e,keys:m,eventHandler:n,isActive:!d}),useKeysRef({ref:f,keys:m,eventHandler:n,isActive:!d}),useEffect(function(){return function(){k.current=!0}},[]),useEffect(function(){return k.current?void(k.current=!1):void(!d&&(null===b||void 0===b?void 0:b(i)))},[i]),useEffect(function(){d||j.set(null!==c&&void 0!==c&&c)},[c]),[i,j]};
//# sourceMappingURL=useCalendarVisible.js.map