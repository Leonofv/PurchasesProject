import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["className","minDate","maxDate","value","disableDates","onChange","onChangeRange","currentVisibleDate","events","locale","view","multiplicityHours","multiplicityMinutes","multiplicitySeconds","onMove","onChangeCurrentVisibleDate"];import{addMonths,startOfMonth}from"date-fns";import ruLocale from"date-fns/locale/ru";import React,{forwardRef,useEffect}from"react";import{useFlag}from"../../../hooks/useFlag/useFlag";import{DateTimeLabel}from"../DateTimeLabel/DateTimeLabel";import{DateTimeMonth}from"../DateTimeMonth/DateTimeMonth";import{DateTimeToggler}from"../DateTimeToggler/DateTimeToggler";import{DateTimeTypeMonth}from"../DateTimeTypeMonth/DateTimeTypeMonth";import{DateTimeYearSlider}from"../DateTimeYearSlider/DateTimeYearSlider";import{getDaysOfMonth,getDaysOfWeek,getHandleSelectDate,getMouthLabelWithYear,isEqualDay,moveTypes,useCurrentVisibleDate}from"../helpers";import{dateTimePropView,dateTimePropViewDefault}from"../helpers/types";import{cnDateTimeMixLayout}from"../mixs";export var DateTimeTypeDate=forwardRef(function(a,b){var c=a.className,d=a.minDate,e=a.maxDate,f=a.value,g=a.disableDates,h=a.onChange,i=a.onChangeRange,j=a.currentVisibleDate,k=a.events,l=a.locale,m=void 0===l?ruLocale:l,n=a.view,o=void 0===n?dateTimePropViewDefault:n,p=a.multiplicityHours,q=a.multiplicityMinutes,r=a.multiplicitySeconds,s=a.onMove,t=a.onChangeCurrentVisibleDate,u=_objectWithoutProperties(a,_excluded),v=useFlag(),w=_slicedToArray(v,2),x=w[0],y=w[1];useEffect(function(){x||(null===s||void 0===s?void 0:s(moveTypes[2]))},[x]);var z=useCurrentVisibleDate({currentVisibleDate:j,maxDate:e,minDate:d,value:f,startOfUnit:startOfMonth,onChangeCurrentVisibleDate:t}),A=_slicedToArray(z,2),B=A[0],C=A[1];if(x)return React.createElement(DateTimeTypeMonth,Object.assign({},u,{ref:b,className:c,minDate:d,maxDate:e,locale:m,events:k,currentVisibleDate:B,view:o,onChange:function(a){C(a),y.off()},onMove:s}));var D=getHandleSelectDate({minDate:d,maxDate:e,value:f,onChange:h,onChangeRange:i,isEqualUnit:isEqualDay}),E=getDaysOfMonth({date:B,disableDates:g,handleDayClick:D,value:f,events:k,minDate:d,maxDate:e,locale:m}),F=getMouthLabelWithYear(B,m),G=getDaysOfWeek(m),H=function(){return C(addMonths(B,1))},I=function(){return C(addMonths(B,-1))};if(o===dateTimePropView[0])return React.createElement("div",Object.assign({},u,{ref:b,className:cnDateTimeMixLayout({view:o},[c])}),React.createElement(DateTimeToggler,{className:cnDateTimeMixLayout("Label"),prevOnClick:I,nextOnClick:H,label:F,onLabelClick:y.on}),React.createElement(DateTimeMonth,{daysOfWeek:G,daysOfMonth:E}));var J=addMonths(B,1),K=getDaysOfMonth({date:J,handleDayClick:D,value:f,events:k,minDate:d,maxDate:e,locale:m}),L=getMouthLabelWithYear(J,m);return o===dateTimePropView[1]?React.createElement("div",Object.assign({},u,{ref:b,className:cnDateTimeMixLayout({view:o},[c])}),React.createElement("div",{className:cnDateTimeMixLayout("Page")},React.createElement(DateTimeToggler,{className:cnDateTimeMixLayout("Label"),prevOnClick:I,label:F,onLabelClick:y.on}),React.createElement(DateTimeMonth,{daysOfWeek:G,daysOfMonth:E})),React.createElement("div",{className:cnDateTimeMixLayout("Page")},React.createElement(DateTimeToggler,{className:cnDateTimeMixLayout("Label"),nextOnClick:H,label:L,onLabelClick:y.on}),React.createElement(DateTimeMonth,{daysOfWeek:G,daysOfMonth:K}))):React.createElement("div",Object.assign({},u,{ref:b,className:cnDateTimeMixLayout({view:o},[c])}),React.createElement(DateTimeYearSlider,{className:cnDateTimeMixLayout("Slider"),currentVisibleDate:B,onChange:C,value:f,locale:m}),React.createElement("div",{className:cnDateTimeMixLayout("PageWrapper")},React.createElement("div",{className:cnDateTimeMixLayout("Page")},React.createElement(DateTimeLabel,{className:cnDateTimeMixLayout("Label"),label:F,onClick:y.on,cursor:"pointer"}),React.createElement(DateTimeMonth,{daysOfWeek:G,daysOfMonth:E})),React.createElement("div",{className:cnDateTimeMixLayout("Page")},React.createElement(DateTimeLabel,{className:cnDateTimeMixLayout("Label"),label:L,onClick:y.on,cursor:"pointer"}),React.createElement(DateTimeMonth,{daysOfWeek:G,daysOfMonth:K}))))});
//# sourceMappingURL=DateTimeTypeDate.js.map