{"version":3,"file":"helpers.js","names":["addHours","addMinutes","addSeconds","endOfHour","endOfMinute","endOfSecond","startOfDay","startOfHour","startOfMinute","startOfSecond","startOfToday","useMemo","useMutableRef","range","isDisableDate","isInMinMaxDate","getLabelHours","getLabelMinutes","getLabelSeconds","dateTimeTimePropLocaleDefault","hours","minutes","seconds","getItemData","timeType","multiplicity","startOfUnits","startOfUnit","endOfUnit","addUnits","getItemLabel","value","minDate","maxDate","disableDates","onChangeRef","length","numbers","Math","ceil","startDate","map","number","date","label","selected","disabled","mode","onClick","e","current","useTimeItems","multiplicityHours","multiplicityMinutes","multiplicitySeconds","onChange","getTime"],"sources":["../../../../../../src/components/DateTime/DateTimeTypeTime/helpers.ts"],"sourcesContent":["import {\n  addHours,\n  addMinutes,\n  addSeconds,\n  endOfHour,\n  endOfMinute,\n  endOfSecond,\n  startOfDay,\n  startOfHour,\n  startOfMinute,\n  startOfSecond,\n  startOfToday,\n} from 'date-fns';\nimport { useMemo } from 'react';\n\nimport { useMutableRef } from '../../../hooks/useMutableRef/useMutableRef';\nimport { range } from '../../../utils/array';\nimport { isDisableDate, isInMinMaxDate } from '../../../utils/date';\nimport {\n  DateTimePropDisableDates,\n  getLabelHours,\n  getLabelMinutes,\n  getLabelSeconds,\n} from '../helpers';\n\nexport const dateTimeTimePropLocaleDefault = {\n  hours: 'Час',\n  minutes: 'Мин',\n  seconds: 'Сек',\n} as const;\n\ntype DateTimeTimePropOnChange = (\n  value: Date,\n  props: {\n    e: React.MouseEvent<HTMLButtonElement>;\n  },\n) => void;\n\ntype ResultItem = {\n  label: string;\n  onClick?: (e: React.MouseEvent<HTMLButtonElement>) => void;\n  disabled?: boolean;\n  selected?: boolean;\n};\n\nconst getItemData = (\n  timeType: 'hours' | 'minutes' | 'seconds',\n  multiplicity = 1,\n  startOfUnits: (date: Date) => Date,\n  startOfUnit: (date: Date) => Date,\n  endOfUnit: (date: Date) => Date,\n  addUnits: typeof addHours,\n  getItemLabel: (date: Date) => string,\n  value?: Date,\n  minDate?: Date,\n  maxDate?: Date,\n  disableDates?: DateTimePropDisableDates,\n  onChangeRef?: React.MutableRefObject<DateTimeTimePropOnChange | undefined>,\n): ResultItem[] => {\n  const length = timeType === 'hours' ? 24 : 60;\n  const numbers = range(multiplicity ? Math.ceil(length / multiplicity) : 0);\n\n  if (numbers.length === 0) {\n    return [];\n  }\n\n  const startDate = startOfUnits(value || startOfToday());\n\n  return numbers.map((number) => {\n    const date = addUnits(startDate, number * multiplicity);\n    const label = getItemLabel(date);\n    const selected = value ? getItemLabel(date) === getItemLabel(value) : false;\n    const disabled =\n      !isInMinMaxDate(date, minDate, maxDate, startOfUnit, endOfUnit) ||\n      isDisableDate({ date, disableDates, mode: 'time', timeType });\n    const onClick = (e: React.MouseEvent<HTMLButtonElement>) =>\n      !disabled && onChangeRef?.current?.(date, { e });\n\n    return {\n      label,\n      selected,\n      disabled,\n      onClick,\n    };\n  });\n};\n\nexport const useTimeItems = (\n  value?: Date,\n  multiplicityHours?: number,\n  multiplicityMinutes?: number,\n  multiplicitySeconds?: number,\n  onChange?: DateTimeTimePropOnChange,\n  minDate?: Date,\n  maxDate?: Date,\n  disableDates?: DateTimePropDisableDates,\n): ResultItem[][] => {\n  const onChangeRef = useMutableRef(onChange);\n\n  return useMemo(\n    () => [\n      getItemData(\n        'hours',\n        multiplicityHours,\n        startOfDay,\n        startOfHour,\n        endOfHour,\n        addHours,\n        getLabelHours,\n        value,\n        minDate,\n        maxDate,\n        disableDates,\n        onChangeRef,\n      ),\n      getItemData(\n        'minutes',\n        multiplicityMinutes,\n        startOfHour,\n        startOfMinute,\n        endOfMinute,\n        addMinutes,\n        getLabelMinutes,\n        value,\n        minDate,\n        maxDate,\n        disableDates,\n        onChangeRef,\n      ),\n      getItemData(\n        'seconds',\n        multiplicitySeconds,\n        startOfMinute,\n        startOfSecond,\n        endOfSecond,\n        addSeconds,\n        getLabelSeconds,\n        value,\n        minDate,\n        maxDate,\n        disableDates,\n        onChangeRef,\n      ),\n    ],\n    [\n      value?.getTime(),\n      minDate?.getTime(),\n      maxDate?.getTime(),\n      multiplicityHours,\n      multiplicityMinutes,\n      multiplicitySeconds,\n      disableDates,\n    ],\n  );\n};\n"],"mappings":"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"}