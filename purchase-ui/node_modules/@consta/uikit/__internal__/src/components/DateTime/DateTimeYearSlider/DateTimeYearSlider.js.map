{"version":3,"file":"DateTimeYearSlider.js","names":["addMonths","addYears","endOfYear","format","getMonth","getYear","startOfYear","ruLocale","React","range","cn","DateTimeSlider","getMonthTitleAbbreviated","getSliderValueRange","cnDateTimeYearSlider","isCurrentVisibleYear","currentDate","month","isCurrentVisibleMonth","getYearItems","currentVisibleDate","date","locale","map","monthDate","label","current","getSliderData","value","currentYear","items","valueRange","DateTimeYearSlider","props","className","onChange","otherProps","data","handleNext","handlePrev"],"sources":["../../../../../../src/components/DateTime/DateTimeYearSlider/DateTimeYearSlider.tsx"],"sourcesContent":["import './DateTimeYearSlider.css';\n\nimport {\n  addMonths,\n  addYears,\n  endOfYear,\n  format,\n  getMonth,\n  getYear,\n  Locale,\n  startOfYear,\n} from 'date-fns';\nimport ruLocale from 'date-fns/locale/ru';\nimport React from 'react';\n\nimport { range } from '../../../utils/array';\nimport { cn } from '../../../utils/bem';\nimport { DateRange } from '../../../utils/types/Date';\nimport { PropsWithHTMLAttributes } from '../../../utils/types/PropsWithHTMLAttributes';\nimport { DateTimeSlider } from '../DateTimeSlider/DateTimeSlider';\nimport { getMonthTitleAbbreviated } from '../helpers';\nimport { getSliderValueRange } from '../helpers/getSliderValueRange';\n\nexport type DateTimeYearSliderProps = PropsWithHTMLAttributes<\n  {\n    currentVisibleDate: Date;\n    onChange: (date: Date) => void;\n    children?: never;\n    value?: Date | DateRange;\n    locale?: Locale;\n  },\n  HTMLDivElement\n>;\n\nexport const cnDateTimeYearSlider = cn('DateTimeYearSlider');\n\nconst isCurrentVisibleYear = (currentDate: Date, month: Date) =>\n  getYear(currentDate) === getYear(month);\n\nconst isCurrentVisibleMonth = (currentDate: Date, month: Date) =>\n  isCurrentVisibleYear(currentDate, month) &&\n  getMonth(currentDate) === getMonth(month);\n\nconst getYearItems = (currentVisibleDate: Date, date: Date, locale: Locale) =>\n  range(12).map((month) => {\n    const monthDate = addMonths(date, month);\n    return {\n      date: monthDate,\n      label: getMonthTitleAbbreviated(monthDate, locale),\n      current: isCurrentVisibleMonth(currentVisibleDate, monthDate),\n    };\n  });\n\nconst getSliderData = (\n  currentVisibleDate: Date,\n  value: Date | DateRange | undefined,\n  locale: Locale,\n) => {\n  const currentYear = startOfYear(currentVisibleDate);\n\n  return [\n    addYears(currentYear, -1),\n    currentYear,\n    addYears(currentYear, 1),\n    addYears(currentYear, 2),\n  ].map((date) => ({\n    label: format(date, 'yyyy', { locale }),\n    date,\n    items: getYearItems(currentVisibleDate, date, locale),\n    current: isCurrentVisibleYear(currentVisibleDate, date),\n    valueRange: getSliderValueRange(date, value, startOfYear, endOfYear),\n  }));\n};\n\nexport const DateTimeYearSlider: React.FC<DateTimeYearSliderProps> = (\n  props,\n) => {\n  const {\n    currentVisibleDate,\n    className,\n    onChange,\n    value,\n    locale = ruLocale,\n    ...otherProps\n  } = props;\n\n  const handlePrev = () => onChange(addYears(currentVisibleDate, -1));\n  const handleNext = () => onChange(addYears(currentVisibleDate, 1));\n\n  const data = getSliderData(currentVisibleDate, value, locale);\n\n  return (\n    <DateTimeSlider\n      className={cnDateTimeYearSlider(null, [className])}\n      onNext={handleNext}\n      onPrev={handlePrev}\n      data={data}\n      onChange={onChange}\n      {...otherProps}\n    />\n  );\n};\n"],"mappings":"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"}