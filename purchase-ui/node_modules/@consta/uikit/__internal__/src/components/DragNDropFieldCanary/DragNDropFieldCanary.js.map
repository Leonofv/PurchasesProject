{"version":3,"file":"DragNDropFieldCanary.js","names":["React","forwardRef","useCallback","useDropzone","useForkRef","useMutableRef","cnCanary","withDefaultLocale","renderCildren","cnDragNDropField","DragNDropField","props","ref","accept","maxSize","minSize","multiple","maxFiles","children","localeProp","locale","disabled","onClick","onDrop","onDropAccepted","onDropRejected","onError","className","otherProps","onClickRef","getRootProps","getInputProps","rootRef","openFileDialog","open","isDragActive","otherStateProps","active","e","target","current","stopPropagation"],"sources":["../../../../../src/components/DragNDropFieldCanary/DragNDropFieldCanary.tsx"],"sourcesContent":["import './DragNDropField.css';\n\nimport React, { forwardRef, useCallback } from 'react';\nimport { useDropzone } from 'react-dropzone';\n\nimport { useForkRef } from '##/hooks/useForkRef/useForkRef';\nimport { useMutableRef } from '##/hooks/useMutableRef/useMutableRef';\nimport { cnCanary } from '##/utils/bem';\n\nimport { withDefaultLocale } from './locale';\nimport { renderCildren } from './renderCildren';\nimport { DragNDropFieldProps } from './types';\n\nconst cnDragNDropField = cnCanary('DragNDropField');\n\nexport const DragNDropField = forwardRef<HTMLDivElement, DragNDropFieldProps>(\n  (props, ref) => {\n    const {\n      accept,\n      maxSize,\n      minSize,\n      multiple = false,\n      maxFiles,\n      children,\n      locale: localeProp,\n      disabled,\n      onClick,\n      onDrop,\n      onDropAccepted,\n      onDropRejected,\n      onError,\n      className,\n      ...otherProps\n    } = props;\n\n    const onClickRef = useMutableRef(onClick);\n\n    const locale = withDefaultLocale(localeProp);\n\n    const {\n      getRootProps,\n      getInputProps,\n      rootRef,\n      open: openFileDialog,\n      isDragActive,\n      ...otherStateProps\n    } = useDropzone({\n      accept,\n      maxSize: maxSize || undefined,\n      minSize: minSize || undefined,\n      maxFiles: maxFiles || undefined,\n      multiple,\n      disabled,\n      onDrop,\n      onDropAccepted,\n      onDropRejected,\n      onError,\n    });\n\n    return (\n      <div\n        {...getRootProps({\n          ...otherProps,\n          className: cnDragNDropField({ active: isDragActive, disabled }, [\n            className,\n          ]),\n          onClick: useCallback<React.MouseEventHandler<HTMLDivElement>>((e) => {\n            if (e.target !== rootRef.current) {\n              e.stopPropagation();\n            }\n            onClickRef.current?.(e);\n          }, []),\n          ref: useForkRef([ref, rootRef]),\n        })}\n      >\n        <input {...getInputProps()} />\n        {renderCildren(children, {\n          ...otherStateProps,\n          accept,\n          maxSize,\n          minSize,\n          multiple,\n          openFileDialog,\n          locale,\n          disabled,\n          isDragActive,\n        })}\n      </div>\n    );\n  },\n);\n\nexport * from './types';\n"],"mappings":"m/BAAA,6BAEA,MAAOA,MAAP,EAAgBC,UAAhB,CAA4BC,WAA5B,KAA+C,OAA/C,CACA,OAASC,WAAT,KAA4B,gBAA5B,CAEA,OAASC,UAAT,yCACA,OAASC,aAAT,+CACA,OAASC,QAAT,uBAEA,OAASC,iBAAT,gBACA,OAASC,aAAT,uBAGA,GAAMC,iBAAgB,CAAGH,QAAQ,CAAC,gBAAD,CAAjC,CAEA,MAAO,IAAMI,eAAc,CAAGT,UAAU,CACtC,SAACU,CAAD,CAAQC,CAAR,CAAgB,IAEZC,EAFY,CAiBVF,CAjBU,CAEZE,MAFY,CAGZC,CAHY,CAiBVH,CAjBU,CAGZG,OAHY,CAIZC,CAJY,CAiBVJ,CAjBU,CAIZI,OAJY,GAiBVJ,CAjBU,CAKZK,QALY,CAKZA,CALY,eAMZC,CANY,CAiBVN,CAjBU,CAMZM,QANY,CAOZC,CAPY,CAiBVP,CAjBU,CAOZO,QAPY,CAQJC,CARI,CAiBVR,CAjBU,CAQZS,MARY,CASZC,CATY,CAiBVV,CAjBU,CASZU,QATY,CAUZC,CAVY,CAiBVX,CAjBU,CAUZW,OAVY,CAWZC,CAXY,CAiBVZ,CAjBU,CAWZY,MAXY,CAYZC,CAZY,CAiBVb,CAjBU,CAYZa,cAZY,CAaZC,CAbY,CAiBVd,CAjBU,CAaZc,cAbY,CAcZC,CAdY,CAiBVf,CAjBU,CAcZe,OAdY,CAeZC,CAfY,CAiBVhB,CAjBU,CAeZgB,SAfY,CAgBTC,CAhBS,0BAiBVjB,CAjBU,YAmBRkB,CAAU,CAAGxB,aAAa,CAACiB,CAAD,CAnBlB,CAqBRF,CAAM,CAAGb,iBAAiB,CAACY,CAAD,CArBlB,GA8BVhB,WAAW,CAAC,CACdU,MAAM,CAANA,CADc,CAEdC,OAAO,CAAEA,CAAO,QAFF,CAGdC,OAAO,CAAEA,CAAO,QAHF,CAIdE,QAAQ,CAAEA,CAAQ,QAJJ,CAKdD,QAAQ,CAARA,CALc,CAMdK,QAAQ,CAARA,CANc,CAOdE,MAAM,CAANA,CAPc,CAQdC,cAAc,CAAdA,CARc,CASdC,cAAc,CAAdA,CATc,CAUdC,OAAO,CAAPA,CAVc,CAAD,CA9BD,CAwBZI,CAxBY,GAwBZA,YAxBY,CAyBZC,CAzBY,GAyBZA,aAzBY,CA0BZC,CA1BY,GA0BZA,OA1BY,CA2BNC,CA3BM,GA2BZC,IA3BY,CA4BZC,CA5BY,GA4BZA,YA5BY,CA6BTC,CA7BS,wCA2Cd,MACE,2BACMN,CAAY,gCACXF,CADW,MAEdD,SAAS,CAAElB,gBAAgB,CAAC,CAAE4B,MAAM,CAAEF,CAAV,CAAwBd,QAAQ,CAARA,CAAxB,CAAD,CAAqC,CAC9DM,CAD8D,CAArC,CAFb,CAKdL,OAAO,CAAEpB,WAAW,CAA0C,SAACoC,CAAD,CAAO,OAC/DA,CAAC,CAACC,MAAF,GAAaP,CAAO,CAACQ,OAD0C,EAEjEF,CAAC,CAACG,eAAF,EAFiE,WAInEZ,CAAU,CAACW,OAJwD,qBAInE,OAAAX,CAAU,CAAWS,CAAX,CACX,CALmB,CAKjB,EALiB,CALN,CAWd1B,GAAG,CAAER,UAAU,CAAC,CAACQ,CAAD,CAAMoB,CAAN,CAAD,CAXD,GADlB,CAeE,4BAAWD,CAAa,EAAxB,CAfF,CAgBGvB,aAAa,CAACU,CAAD,gCACTkB,CADS,MAEZvB,MAAM,CAANA,CAFY,CAGZC,OAAO,CAAPA,CAHY,CAIZC,OAAO,CAAPA,CAJY,CAKZC,QAAQ,CAARA,CALY,CAMZiB,cAAc,CAAdA,CANY,CAOZb,MAAM,CAANA,CAPY,CAQZC,QAAQ,CAARA,CARY,CASZc,YAAY,CAAZA,CATY,GAhBhB,CA6BH,CA1EqC,CAAjC,CA6EP"}