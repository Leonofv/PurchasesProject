{"version":3,"file":"useSelectEventsHandler.js","names":["useEffect","useFlag","defaultGetItemLabel","useSelectEventsHandler","props","handler","ref","newProps","valueChanged","setValueChanged","on","value","onFocus","off","onfocusArgs","onBlur","component","event","options","placeholder","label","getItemLabel","pageURL","window","location","href","DOMRef","current","onBlurArgs"],"sources":["../../../../../../src/components/EventInterceptor/propsHandlers/useSelectEventsHandler.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\n\nimport { useFlag } from '##/hooks/useFlag';\n\nimport {\n  defaultGetItemLabel,\n  SelectProps,\n} from '../../SelectDeprecated/helpers';\nimport { EventInterceptorHandler } from '../EventInterceptor';\n\nexport const useSelectEventsHandler = <PROPS extends SelectProps>(\n  props: PROPS,\n  handler: EventInterceptorHandler,\n  ref: React.RefObject<HTMLDivElement | null>,\n) => {\n  const newProps: PROPS = { ...props };\n  const [valueChanged, setValueChanged] = useFlag();\n\n  useEffect(() => {\n    setValueChanged.on();\n  }, [newProps.value]);\n\n  newProps.onFocus = (...onfocusArgs) => {\n    setValueChanged.off();\n    return props.onFocus?.(...onfocusArgs);\n  };\n\n  newProps.onBlur = (...onBlurArgs) => {\n    const value = {\n      component: 'Select' as const,\n      event: 'change',\n      options: {\n        placeholder: newProps.placeholder,\n        label: newProps.value\n          ? (newProps.getItemLabel ?? defaultGetItemLabel)(newProps.value)\n          : undefined,\n        value: newProps.value,\n        pageURL: window.location.href,\n        DOMRef: ref.current,\n        props: newProps,\n      },\n    };\n    valueChanged && handler!(value);\n    return props.onBlur?.(...onBlurArgs);\n  };\n\n  return newProps;\n};\n"],"mappings":"suBAAA,OAAgBA,SAAhB,KAAiC,OAAjC,CAEA,OAASC,OAAT,8BAEA,OACEC,mBADF,sCAMA,MAAO,IAAMC,uBAAsB,CAAG,SACpCC,CADoC,CAEpCC,CAFoC,CAGpCC,CAHoC,CAIjC,IACGC,EAAe,kBAAQH,CAAR,CADlB,GAEqCH,OAAO,EAF5C,uBAEIO,CAFJ,MAEkBC,CAFlB,MAgCH,MA5BAT,UAAS,CAAC,UAAM,CACdS,CAAe,CAACC,EAAhB,EACD,CAFQ,CAEN,CAACH,CAAQ,CAACI,KAAV,CAFM,CA4BT,CAxBAJ,CAAQ,CAACK,OAAT,CAAmB,UAAoB,OACrCH,CAAe,CAACI,GAAhB,EADqC,4BAAhBC,CAAgB,sBAAhBA,CAAgB,iBAErC,iBAAOV,CAAK,CAACQ,OAAb,qBAAO,gBAAAR,CAAK,QAAL,CAAmBU,CAAnB,EACR,CAqBD,CAnBAP,CAAQ,CAACQ,MAAT,CAAkB,UAAmB,SAC7BJ,CAAK,CAAG,CACZK,SAAS,CAAE,QADC,CAEZC,KAAK,CAAE,QAFK,CAGZC,OAAO,CAAE,CACPC,WAAW,CAAEZ,CAAQ,CAACY,WADf,CAEPC,KAAK,CAAEb,CAAQ,CAACI,KAAT,CACH,WAACJ,CAAQ,CAACc,YAAV,gBAA0BnB,mBAA1B,EAA+CK,CAAQ,CAACI,KAAxD,CADG,OAFA,CAKPA,KAAK,CAAEJ,CAAQ,CAACI,KALT,CAMPW,OAAO,CAAEC,MAAM,CAACC,QAAP,CAAgBC,IANlB,CAOPC,MAAM,CAAEpB,CAAG,CAACqB,OAPL,CAQPvB,KAAK,CAAEG,CARA,CAHG,CADqB,CAenCC,CAAY,EAAIH,CAAO,CAAEM,CAAF,CAfY,4BAAfiB,CAAe,sBAAfA,CAAe,iBAgBnC,iBAAOxB,CAAK,CAACW,MAAb,qBAAO,gBAAAX,CAAK,QAAL,CAAkBwB,CAAlB,EACR,CAED,CAAOrB,CACR,CArCM"}