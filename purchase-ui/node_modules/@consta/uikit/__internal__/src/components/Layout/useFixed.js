import _defineProperty from"@babel/runtime/helpers/defineProperty";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}import{useCallback,useEffect,useState}from"react";var verticalAlign=["top","bottom"],verticalAlignDefault=verticalAlign[0],horizontalAlign=["left","right"],horizontalAlignDefault=horizontalAlign[0],getHTMLElement=function(a){return a&&!(a instanceof HTMLElement||a instanceof Window)?null===a||void 0===a?void 0:a.current:a},getStationingElement=function(a){return a instanceof HTMLElement?{offsetTop:a.offsetTop,offsetHeight:a.offsetHeight,offsetLeft:a.offsetLeft,offsetWidth:a.offsetWidth,clientHeight:a.clientHeight,clientWidth:a.clientWidth,scrollTop:a.scrollTop,scrollHeight:a.scrollHeight}:a instanceof Window?{offsetTop:0,offsetHeight:a.innerHeight,offsetLeft:0,offsetWidth:a.innerWidth,clientHeight:a.innerHeight,clientWidth:a.innerWidth,scrollTop:a.scrollY,scrollHeight:Math.max(document.body.scrollHeight,document.body.offsetHeight)}:void 0},isElementScrollible=function(a,b,c,d,e){return d?b.scrollTop>=e&&b.scrollTop<=b.scrollHeight-b.offsetHeight+a.offsetHeight:c?b.scrollTop+c.offsetHeight>=e&&b.scrollTop<=b.scrollHeight-b.offsetHeight+a.offsetHeight:b.scrollTop+b.offsetHeight<=e+a.offsetHeight&&b.scrollTop<=b.scrollHeight-b.offsetHeight};export var positioningElement=function(a,b,c,d,e,f){var g={top:0,left:0,width:null===b||void 0===b?void 0:b.offsetWidth,height:null===b||void 0===b?void 0:b.offsetHeight,maxWidth:null===c||void 0===c?void 0:c.clientWidth,maxHeight:null===c||void 0===c?void 0:c.clientHeight,position:"unset"};if(b&&c&&"undefined"!=typeof a){var h={top:c.offsetTop,bottom:c.offsetTop+c.clientHeight,left:c.offsetLeft,right:c.offsetLeft+c.clientWidth,width:c.clientWidth,height:c.clientHeight};g.width=b.offsetWidth,g.height=b.offsetHeight,g.maxWidth=h.width,g.maxHeight=h.height,isElementScrollible(b,c,d,"top"===e,a)?(g.position="fixed",g.top="top"===e?d?d.offsetTop:h.top:d?d.offsetTop+d.offsetHeight:h.bottom-b.offsetHeight,g.left="left"===f?d?d.offsetLeft:-window.scrollX+h.left:d?d.offsetLeft+d.offsetWidth-b.offsetWidth:-window.scrollX+h.right-b.offsetWidth):g.position="unset"}return g};export var useFixed=function(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:verticalAlignDefault,e=4<arguments.length&&arguments[4]!==void 0?arguments[4]:horizontalAlignDefault,f=useState({}),g=_slicedToArray(f,2),h=g[0],i=g[1],j=useState({}),k=_slicedToArray(j,2),l=k[0],m=k[1];useEffect(function(){var c=0;return setTimeout(function(){if(a&&a.current&&a.current.parentElement){var d=b?getHTMLElement(b):a.current.parentElement,e=getStationingElement(d);e&&(c=0<=a.current.offsetTop-e.offsetTop?a.current.offsetTop-e.offsetTop:0),o(c),document.addEventListener("resize",n),"function"==typeof(null===d||void 0===d?void 0:d.addEventListener)&&(null===d||void 0===d?void 0:d.addEventListener("resize",n),null===d||void 0===d?void 0:d.addEventListener("scroll",function(){return o(c)}))}},"undefined"==typeof b?500:0),function(){if(a&&a.current&&a.current.parentElement){var d=b?getHTMLElement(b):a.current.parentElement;document.removeEventListener("resize",n),"function"==typeof(null===d||void 0===d?void 0:d.removeEventListener)&&(null===d||void 0===d?void 0:d.removeEventListener("resize",n),null===d||void 0===d?void 0:d.removeEventListener("scroll",function(){return o(c)}))}}},[d,e,a,b,c]),useEffect(function(){m(_objectSpread({},h))},[h.top,h.left,h.position,h.width,h.height,h.maxHeight,h.maxWidth]);var n=function(){if(a&&a.current&&a.current.parentElement){var c=b?getHTMLElement(b):a.current.parentElement,d=getStationingElement(c);i(_objectSpread(_objectSpread({},h),{},{width:a.current.offsetWidth,height:a.current.offsetHeight,maxWidth:null===d||void 0===d?void 0:d.clientWidth,maxHeight:null===d||void 0===d?void 0:d.clientHeight}))}},o=useCallback(function(f){if(a&&a.current&&a.current.parentElement&&"number"==typeof f){var g=b?getHTMLElement(b):a.current.parentElement;if(b){var h=positioningElement(f,getStationingElement(a.current),getStationingElement(g),getStationingElement(null===c||void 0===c?void 0:c.current),d,e);i(_objectSpread({},h))}}},[h]);return l};
//# sourceMappingURL=useFixed.js.map