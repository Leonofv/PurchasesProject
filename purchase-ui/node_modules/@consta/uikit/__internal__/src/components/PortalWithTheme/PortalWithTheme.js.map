{"version":3,"file":"PortalWithTheme.js","names":["React","useEffect","useRef","ReactDOM","useForkRef","Theme","PortalWithThemeProvider","usePortalContext","getZIndex","contextZindex","propZindex","PortalWithTheme","forwardRef","ref","children","container","window","document","body","styleProp","style","rest","addRefs","zIndexContext","zIndex","themeRef","createPortal"],"sources":["../../../../../src/components/PortalWithTheme/PortalWithTheme.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { useForkRef } from '../../hooks/useForkRef/useForkRef';\nimport { Theme, ThemeProps } from '../Theme/Theme';\nimport {\n  PortalWithThemeProvider,\n  usePortalContext,\n} from './PortalWithThemeContext/PortalWithThemeContext';\n\nexport { usePortalContext };\n\ntype Props = {\n  container?: Element;\n} & ThemeProps;\n\nconst getZIndex = (contextZindex?: number, propZindex?: number | string) => {\n  if (typeof propZindex === 'number') {\n    return propZindex;\n  }\n\n  if (contextZindex) {\n    return contextZindex + 1;\n  }\n\n  return undefined;\n};\n\nexport const PortalWithTheme = React.forwardRef<HTMLDivElement, Props>(\n  (\n    { children, container = window.document.body, style: styleProp, ...rest },\n    ref,\n  ) => {\n    const { addRefs, zIndex: zIndexContext } = usePortalContext();\n\n    const themeRef = useRef(null);\n\n    const zIndex = getZIndex(zIndexContext, styleProp?.zIndex);\n\n    const style = {\n      ...styleProp,\n      zIndex,\n    };\n\n    useEffect(() => {\n      addRefs && addRefs([themeRef]);\n    }, [themeRef]);\n\n    return ReactDOM.createPortal(\n      <PortalWithThemeProvider zIndex={zIndex}>\n        <Theme {...rest} ref={useForkRef([themeRef, ref])} style={style}>\n          {children}\n        </Theme>\n      </PortalWithThemeProvider>,\n      container,\n    );\n  },\n);\n"],"mappings":"yyBAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,MAA3B,KAAyC,OAAzC,CACA,MAAOC,SAAP,KAAqB,WAArB,CAEA,OAASC,UAAT,yCACA,OAASC,KAAT,sBACA,OACEC,uBADF,CAEEC,gBAFF,uDAKA,OAASA,gBAAT,EAMA,GAAMC,UAAS,CAAG,SAACC,CAAD,CAAyBC,CAAzB,CAA0D,OAChD,QAAtB,QAAOA,EAD+D,CAEjEA,CAFiE,CAKtED,CALsE,CAMjEA,CAAa,CAAG,CANiD,OAU3E,CAVD,CAYA,MAAO,IAAME,gBAAe,CAAGX,KAAK,CAACY,UAAN,CAC7B,WAEEC,CAFF,CAGK,IAFDC,EAEC,GAFDA,QAEC,KAFSC,SAET,CAFSA,CAET,YAFqBC,MAAM,CAACC,QAAP,CAAgBC,IAErC,GAFkDC,CAElD,GAF2CC,KAE3C,CAFgEC,CAEhE,yCACwCd,gBAAgB,EADxD,CACKe,CADL,GACKA,OADL,CACsBC,CADtB,GACcC,MADd,CAGGC,CAAQ,CAAGvB,MAAM,CAAC,IAAD,CAHpB,CAKGsB,CAAM,CAAGhB,SAAS,CAACe,CAAD,QAAgBJ,CAAhB,WAAgBA,CAAhB,QAAgBA,CAAS,CAAEK,MAA3B,CALrB,CAOGJ,CAAK,gCACND,CADM,MAETK,MAAM,CAANA,CAFS,EAPR,CAgBH,MAJAvB,UAAS,CAAC,UAAM,CACdqB,CAAO,EAAIA,CAAO,CAAC,CAACG,CAAD,CAAD,CACnB,CAFQ,CAEN,CAACA,CAAD,CAFM,CAIT,CAAOtB,QAAQ,CAACuB,YAAT,CACL,oBAAC,uBAAD,EAAyB,MAAM,CAAEF,CAAjC,EACE,oBAAC,KAAD,kBAAWH,CAAX,EAAiB,GAAG,CAAEjB,UAAU,CAAC,CAACqB,CAAD,CAAWZ,CAAX,CAAD,CAAhC,CAAmD,KAAK,CAAEO,CAA1D,GACGN,CADH,CADF,CADK,CAMLC,CANK,CAQR,CA5B4B,CAAxB"}