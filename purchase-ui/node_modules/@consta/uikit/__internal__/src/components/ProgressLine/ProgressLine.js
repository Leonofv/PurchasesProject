import _defineProperty from"@babel/runtime/helpers/defineProperty";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["size","value","style","className","steps","getItemLabel"];function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}import"./ProgressLine.css";import React,{forwardRef,useMemo,useRef}from"react";import{useComponentSize}from"../../hooks/useComponentSize";import{useForkRef}from"../../hooks/useForkRef";import{cn}from"../../utils/bem";import{isNotNil}from"../../utils/type-guards";import{Text}from"../Text/Text";import{calculateLinePositions,generateMask,getProgress,withDefaultGetters}from"./helpers";var cnProgressLine=cn("ProgressLine"),ProgressLineRender=function(a,b){var c,d=withDefaultGetters(a),e=d.size,f=void 0===e?"m":e,g=d.value,h=d.style,i=d.className,j=d.steps,k=d.getItemLabel,l=_objectWithoutProperties(d,_excluded),m=useRef(null),n=useComponentSize(m),o=n.width,p=useMemo(function(){var a,b=calculateLinePositions(null!==(a=null===j||void 0===j?void 0:j.length)&&void 0!==a?a:0,o);return[b,generateMask(b)]},[o,j]),q=_slicedToArray(p,2),r=q[0],s=q[1],t=useMemo(function(){var a,b={mode:isNotNil(g)?"determinate":"indeterminate",activeIndex:isNotNil(g)?Math.min(g,null!==(a=null===j||void 0===j?void 0:j.length)&&void 0!==a?a:0):-1};return j&&(b.mode="step",(null!==g&&void 0!==g?g:0)>=j.length&&(b.activeIndex=j.length-1)),b},[j,g]),u=t.mode,v=t.activeIndex,w=_objectSpread(_objectSpread({},l),{},{ref:useForkRef([b,m]),className:cnProgressLine({size:f,mode:u},[i]),style:_objectSpread(_objectSpread({},h),{},(c={},_defineProperty(c,"--progress-line-value","".concat(getProgress(null!==g&&void 0!==g?g:0))),_defineProperty(c,"--progress-line-steps",null===j||void 0===j?void 0:j.length),_defineProperty(c,"--progress-line-background-active-width","".concat(null!==r&&void 0!==r&&r[v]?r[v].x+r[v].width:0,"px")),_defineProperty(c,"--progress-line-mask",s),c))});return React.createElement("div",w,j&&React.createElement("div",{className:cnProgressLine("Steps")},null===j||void 0===j?void 0:j.map(function(a,b){var c=k(a);return React.createElement("div",{key:cnProgressLine("Step",{index:b}),className:cnProgressLine("Step")},isNotNil(c)&&React.createElement(Text,{className:cnProgressLine("Label"),size:"2xs",lineHeight:"xs",view:"secondary",align:"center"},c))})))};export var ProgressLine=forwardRef(ProgressLineRender);
//# sourceMappingURL=ProgressLine.js.map