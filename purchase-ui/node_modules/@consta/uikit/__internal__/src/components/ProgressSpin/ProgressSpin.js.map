{"version":3,"file":"ProgressSpin.js","names":["React","useMemo","cn","getByMap","isNumber","progressSpinPropSize","progressSpinPropSizeDefault","cnProgressSpin","sizeMap","strokeWidthMap","getSvgParamsBySize","size","sizeOfPixels","strokeWidth","radius","strokeDasharray","Math","PI","ProgressSpin","forwardRef","props","ref","progressProp","progress","value","animation","className","otherProps","animatedProgress","spin"],"sources":["../../../../../src/components/ProgressSpin/ProgressSpin.tsx"],"sourcesContent":["import './ProgressSpin.css';\n\nimport React, { useMemo } from 'react';\n\nimport { cn } from '../../utils/bem';\nimport { getByMap } from '../../utils/getByMap';\nimport { isNumber } from '../../utils/type-guards';\nimport { PropsWithHTMLAttributes } from '../../utils/types/PropsWithHTMLAttributes';\n\nexport const progressSpinPropSize = ['m', 's', 'l', 'xl', '2xl'] as const;\nexport type ProgressSpinPropSize = typeof progressSpinPropSize[number];\nexport const progressSpinPropSizeDefault: ProgressSpinPropSize =\n  progressSpinPropSize[0];\n\ntype Props = {\n  size?: ProgressSpinPropSize;\n  className?: string;\n  progress?: number;\n  value?: number;\n  animation?: boolean;\n  children?: never;\n};\nexport type ProgressSpinProps = PropsWithHTMLAttributes<Props, SVGElement>;\n\nexport const cnProgressSpin = cn('ProgressSpin');\n\nconst sizeMap: Record<ProgressSpinPropSize, number> = {\n  's': 12,\n  'm': 20,\n  'l': 28,\n  'xl': 36,\n  '2xl': 44,\n};\n\nconst strokeWidthMap: Record<ProgressSpinPropSize, number> = {\n  's': 2,\n  'm': 2,\n  'l': 2.2,\n  'xl': 2.7,\n  '2xl': 3.5,\n};\n\nfunction getSvgParamsBySize(\n  size: ProgressSpinPropSize,\n): [number, number, number, number] {\n  const sizeOfPixels = getByMap(sizeMap, size);\n  const strokeWidth = getByMap(strokeWidthMap, size);\n  const radius = (sizeOfPixels - strokeWidth) / 2;\n  const strokeDasharray = radius * 2 * Math.PI;\n\n  return [sizeOfPixels, strokeWidth, radius, strokeDasharray];\n}\n\nexport const ProgressSpin = React.forwardRef<SVGSVGElement, ProgressSpinProps>(\n  (props, ref) => {\n    const {\n      size = progressSpinPropSizeDefault,\n      progress: progressProp,\n      value,\n      animation,\n      className,\n      ...otherProps\n    } = props;\n    const [sizeOfPixels, strokeWidth, radius, strokeDasharray] = useMemo(\n      () => getSvgParamsBySize(size),\n      [size],\n    );\n\n    const progress = value ?? progressProp;\n\n    const animatedProgress = isNumber(progress) ? progress : 50;\n    const strokeDashoffset =\n      strokeDasharray - (strokeDasharray * animatedProgress) / 100;\n\n    return (\n      <svg\n        {...otherProps}\n        className={cnProgressSpin({ spin: !isNumber(progress) }, [className])}\n        width={sizeOfPixels}\n        height={sizeOfPixels}\n        viewBox={`0 0 ${sizeOfPixels} ${sizeOfPixels}`}\n        ref={ref}\n      >\n        <circle\n          className={cnProgressSpin('Circle', { animation })}\n          cx={sizeOfPixels / 2}\n          cy={sizeOfPixels / 2}\n          r={radius}\n          strokeWidth={strokeWidth}\n          strokeDasharray={strokeDasharray}\n          strokeDashoffset={strokeDashoffset}\n        />\n      </svg>\n    );\n  },\n);\n"],"mappings":"wNAAA,2BAEA,MAAOA,MAAP,EAAgBC,OAAhB,KAA+B,OAA/B,CAEA,OAASC,EAAT,uBACA,OAASC,QAAT,4BACA,OAASC,QAAT,+BAGA,MAAO,IAAMC,qBAAoB,CAAG,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAAgB,IAAhB,CAAsB,KAAtB,CAA7B,CAEP,MAAO,IAAMC,4BAAiD,CAC5DD,oBAAoB,CAAC,CAAD,CADf,CAaP,MAAO,IAAME,eAAc,CAAGL,EAAE,CAAC,cAAD,CAAzB,C,GAEDM,QAA6C,CAAG,CACpD,EAAK,EAD+C,CAEpD,EAAK,EAF+C,CAGpD,EAAK,EAH+C,CAIpD,GAAM,EAJ8C,CAKpD,MAAO,EAL6C,C,CAQhDC,cAAoD,CAAG,CAC3D,EAAK,CADsD,CAE3D,EAAK,CAFsD,CAG3D,EAAK,GAHsD,CAI3D,GAAM,GAJqD,CAK3D,MAAO,GALoD,C,CAQ7D,QAASC,mBAAT,CACEC,CADF,CAEoC,IAC5BC,EAAY,CAAGT,QAAQ,CAACK,OAAD,CAAUG,CAAV,CADK,CAE5BE,CAAW,CAAGV,QAAQ,CAACM,cAAD,CAAiBE,CAAjB,CAFM,CAG5BG,CAAM,CAAG,CAACF,CAAY,CAAGC,CAAhB,EAA+B,CAHZ,CAI5BE,CAAe,CAAY,CAAT,CAAAD,CAAM,CAAOE,IAAI,CAACC,EAJR,CAMlC,MAAO,CAACL,CAAD,CAAeC,CAAf,CAA4BC,CAA5B,CAAoCC,CAApC,CACR,CAED,MAAO,IAAMG,aAAY,CAAGlB,KAAK,CAACmB,UAAN,CAC1B,SAACC,CAAD,CAAQC,CAAR,CAAgB,OAQVD,CARU,CAEZT,IAFY,CAEZA,CAFY,YAELL,2BAFK,GAGFgB,CAHE,CAQVF,CARU,CAGZG,QAHY,CAIZC,CAJY,CAQVJ,CARU,CAIZI,KAJY,CAKZC,CALY,CAQVL,CARU,CAKZK,SALY,CAMZC,CANY,CAQVN,CARU,CAMZM,SANY,CAOTC,CAPS,0BAQVP,CARU,cAS+CnB,OAAO,CAClE,iBAAMS,mBAAkB,CAACC,CAAD,CAAxB,CADkE,CAElE,CAACA,CAAD,CAFkE,CATtD,uBASPC,CATO,MASOC,CATP,MASoBC,CATpB,MAS4BC,CAT5B,MAcRQ,CAAQ,QAAGC,CAAH,WAAGA,CAAH,CAAGA,CAAH,CAAYF,CAdZ,CAgBRM,CAAgB,CAAGxB,QAAQ,CAACmB,CAAD,CAAR,CAAqBA,CAArB,CAAgC,EAhB3C,CAoBd,MACE,4CACMI,CADN,EAEE,SAAS,CAAEpB,cAAc,CAAC,CAAEsB,IAAI,CAAE,CAACzB,QAAQ,CAACmB,CAAD,CAAjB,CAAD,CAAgC,CAACG,CAAD,CAAhC,CAF3B,CAGE,KAAK,CAAEd,CAHT,CAIE,MAAM,CAAEA,CAJV,CAKE,OAAO,eAASA,CAAT,aAAyBA,CAAzB,CALT,CAME,GAAG,CAAES,CANP,GAQE,8BACE,SAAS,CAAEd,cAAc,CAAC,QAAD,CAAW,CAAEkB,SAAS,CAATA,CAAF,CAAX,CAD3B,CAEE,EAAE,CAAEb,CAAY,CAAG,CAFrB,CAGE,EAAE,CAAEA,CAAY,CAAG,CAHrB,CAIE,CAAC,CAAEE,CAJL,CAKE,WAAW,CAAED,CALf,CAME,eAAe,CAAEE,CANnB,CAOE,gBAAgB,CAlBpBA,CAAe,CAAIA,CAAe,CAAGa,CAAnB,CAAuC,GAWvD,EARF,CAmBH,CAzCyB,CAArB"}