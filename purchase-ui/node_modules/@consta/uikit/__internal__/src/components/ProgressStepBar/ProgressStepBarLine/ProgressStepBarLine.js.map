{"version":3,"file":"ProgressStepBarLine.js","names":["React","cn","cnProgressStepBarLine","getActiveLineSize","activeStepIndex","lines","lineSizes","map","size","active","Math","max","splice","reduce","a","b","getPathParams","direction","paths","width","forEach","status","push","height","x","y","fill","ProgressStepBarLine","props","otherProps","lineSize","activeLineSize","index"],"sources":["../../../../../../src/components/ProgressStepBar/ProgressStepBarLine/ProgressStepBarLine.tsx"],"sourcesContent":["import './ProgressStepBarLine.css';\n\nimport React from 'react';\n\nimport { cn } from '../../../utils/bem';\nimport {\n  Line,\n  ProgressStepBarPropDirection,\n  ProgressStepBarPropSize,\n} from '../helpers';\n\ntype ProgressStepBarLineProps = {\n  lines: Line[];\n  size: ProgressStepBarPropSize;\n  direction: ProgressStepBarPropDirection;\n  activeStepIndex?: number;\n};\n\nconst cnProgressStepBarLine = cn('ProgressStepBarLine');\n\nconst getActiveLineSize = (\n  activeStepIndex: number | undefined,\n  lines: Line[],\n) => {\n  const lineSizes = lines.map(({ size }) => size);\n  const active = activeStepIndex ? Math.max(activeStepIndex, 0) : undefined;\n  if (typeof active !== 'number' || active === 0) {\n    return 0;\n  }\n\n  return lineSizes.splice(0, active).reduce((a, b) => a + b, 0);\n};\n\ntype PathItem = {\n  fill: string;\n  height: string | number;\n  width: string | number;\n  x: number;\n  y: number;\n};\nconst getPathParams = (\n  lines: Line[],\n  direction: ProgressStepBarPropDirection,\n) => {\n  const paths: PathItem[] = [];\n  let width = 0;\n  lines.forEach(({ size, status }) => {\n    paths.push({\n      width:\n        direction === 'horizontal'\n          ? size\n          : 'var(--progress-step-bar-line-width)',\n      height:\n        direction === 'horizontal'\n          ? 'var(--progress-step-bar-line-height)'\n          : size,\n      x: direction === 'horizontal' ? width : 0,\n      y: direction === 'horizontal' ? 0 : width,\n      fill: `var(--color-bg-${status || 'normal'})`,\n    });\n    width += size;\n  });\n  return paths;\n};\n\nexport const ProgressStepBarLine = (props: ProgressStepBarLineProps) => {\n  const { lines, activeStepIndex, size, direction, ...otherProps } = props;\n  const lineSize = lines.map(({ size }) => size).reduce((a, b) => a + b, 0);\n  const activeLineSize = getActiveLineSize(activeStepIndex, lines);\n\n  return (\n    <div\n      {...otherProps}\n      className={cnProgressStepBarLine({ size, direction })}\n      style={{\n        ['--line-size' as string]: `${lineSize}px`,\n        ['--line-active-size' as string]: `${activeLineSize}px`,\n      }}\n    >\n      <svg\n        className={cnProgressStepBarLine('Svg')}\n        width=\"100%\"\n        height=\"100%\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        {getPathParams(lines, direction).map(\n          ({ fill, height, width, x, y }, index) => (\n            <rect key={index} style={{ height, width, fill }} x={x} y={y} />\n          ),\n        )}\n      </svg>\n    </div>\n  );\n};\n"],"mappings":"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"}