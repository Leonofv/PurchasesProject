import _defineProperty from"@babel/runtime/helpers/defineProperty";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["hovered","onHover","value","position","disabled","withTooltip","focused","popoverPosition","buttonRef","active","handlePress","onKeyPress","tooltipFormatter","buttonLabel","onFocus","tooltipDirection","tooltipPossibleDirections","tooltipZIndex"];function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}import"./SliderPoint.css";import React,{useEffect,useRef}from"react";import{generateThemeClassNames,ThemeContext,useTheme}from"../../Theme";import{Tooltip}from"../../Tooltip";import{useFlag}from"../../../hooks/useFlag/useFlag";import{useForkRef}from"../../../hooks/useForkRef/useForkRef";import{cnMixFocus}from"../../../mixs/MixFocus/MixFocus";import{cn}from"../../../utils/bem";var cnSliderPoint=cn("SliderPoint"),getTooltipPosition=function(a,b){if(a&&b&&b.current){var c=b.current.getBoundingClientRect(),d=c.y,e=c.height;return{x:Math.round(a.x),y:Math.round(d+e/2)}}return{x:0,y:0}},defaultPossibleDirections=["leftCenter","rightCenter","downCenter","leftDown","rightDown","upCenter"];export var SliderPoint=function(a){var b=a.hovered,c=a.onHover,d=a.value,e=a.position,f=a.disabled,g=a.withTooltip,h=a.focused,i=a.popoverPosition,j=a.buttonRef,k=a.active,l=a.handlePress,m=a.onKeyPress,n=a.tooltipFormatter,o=a.buttonLabel,p=a.onFocus,q=a.tooltipDirection,r=void 0===q?"downCenter":q,s=a.tooltipPossibleDirections,t=void 0===s?defaultPossibleDirections:s,u=a.tooltipZIndex,v=_objectWithoutProperties(a,_excluded),w=useFlag(!1),x=_slicedToArray(w,2),y=x[0],z=x[1],A=useTheme(),B=A.theme,C=_objectSpread(_objectSpread({},B),{},{color:{primary:B.color.invert,accent:B.color.accent,invert:B.color.primary}}),D=generateThemeClassNames(C),E=function(a){f||(null===p||void 0===p?void 0:p(a,o),z.on())},F=function(a){f||(null===c||void 0===c?void 0:c(a),a&&z.on(),a&&z.on(),!a&&!h&&z.off())},G=useRef(null),H=getTooltipPosition(i,j||G);useEffect(function(){h?z.on():z.off()},[h]);return React.createElement(React.Fragment,null,React.createElement("button",Object.assign({type:"button","aria-label":"".concat(o,"-button"),className:cnSliderPoint({hovered:b,disabled:f,active:k},[f?"":cnMixFocus()]),onMouseOver:function onMouseOver(){return F(!0)},onMouseOut:function onMouseOut(){return F(!1)},onMouseDown:function onMouseDown(){return null===l||void 0===l?void 0:l(o)},onTouchStart:function onTouchStart(){return null===l||void 0===l?void 0:l(o)},onKeyDown:function onKeyDown(a){return null===m||void 0===m?void 0:m(a,o)},onFocus:E,onBlur:function handleBlur(a){f||(null===p||void 0===p?void 0:p(a,null),z.off())},onClick:E,ref:useForkRef([j,G]),tabIndex:0,style:_defineProperty({},"--slider-button-left","".concat(e,"%"))},v)),React.createElement(ThemeContext.Provider,{value:{theme:C,themeClassNames:D}},React.createElement(Tooltip,{isOpen:!!(y&&g&&i),position:H,className:cnSliderPoint("Tooltip"),direction:r,possibleDirections:t,style:{zIndex:u},offset:10},n?n(d):d)))};
//# sourceMappingURL=SliderPoint.js.map