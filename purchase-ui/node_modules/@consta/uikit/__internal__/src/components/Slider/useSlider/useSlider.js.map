{"version":3,"file":"useSlider.js","names":["useCallback","useEffect","useMemo","useRef","useState","useClickOutside","useComponentSize","useMutableRef","getActiveValue","getNewValue","getValidValue","getValueByPosition","isNotRangeParams","isRangeParams","trackPosition","valueToSring","COUNT_STEPS","useSlider","props","disabled","range","value","min","max","step","onChange","onAfterChange","sliderRef","containerRef","buttonRefs","minValue","maxValue","dragStepValue","Array","isArray","val","Math","abs","currentValue","setCurrentValue","leftPopover","setLeftPopover","rightPopover","setRightPopover","currentButton","setCurrentButton","activeButton","sizeSlider","currentValueRef","onChangeRef","onAfterChangeRef","isActive","ignoreClicksInsideRefs","handler","current","controlListeners","type","method","document","handleRelease","handleTouchMove","setTooltipPosition","indexOf","newValue","targetValue","onKeyPress","event","typeButton","preventDefault","stopPropagation","stepIncrement","validKeyCode","changedValue","key","forEach","stepPoint","index","e","position","button","getBoundingClientRect","x","width","newPosition","y","offsetTop","offsetHeight","changePosition","positionValue","oldValue","copyValues","sort","a","b","handlePress","onFocus","onSliderClick","pageX","pageY","popoverPosition"],"sources":["../../../../../../src/components/Slider/useSlider/useSlider.ts"],"sourcesContent":["import React, {\n  MutableRefObject,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\n\nimport { useClickOutside } from '##/hooks/useClickOutside';\nimport { useComponentSize } from '##/hooks/useComponentSize/useComponentSize';\nimport { useMutableRef } from '##/hooks/useMutableRef/useMutableRef';\n\nimport { SliderValue, TrackPosition } from '../helper';\nimport {\n  ActiveButton,\n  getActiveValue,\n  getNewValue,\n  getValidValue,\n  getValueByPosition,\n  isNotRangeParams,\n  isRangeParams,\n  trackPosition,\n  UseSliderProps,\n  UseSliderValues,\n  valueToSring,\n} from './helper';\n\nexport const COUNT_STEPS = 250;\n\nexport function useSlider<RANGE extends boolean>(\n  props: UseSliderProps<RANGE>,\n): UseSliderValues {\n  const {\n    disabled,\n    range,\n    value,\n    min,\n    max,\n    step = 1,\n    onChange,\n    onAfterChange,\n    sliderRef,\n    containerRef,\n    buttonRefs,\n  } = props;\n\n  const minValue = max > min ? min : 0;\n  const maxValue = max > min ? max : 100;\n\n  const dragStepValue = useMemo(() => {\n    if (!Array.isArray(step)) {\n      if (step >= 1) {\n        const val = Math.abs((maxValue - minValue) / COUNT_STEPS);\n        if (val > step) {\n          return val - (val % step);\n        }\n        return Math.max(val, step);\n      }\n    }\n    return step;\n  }, [max, min, step]);\n\n  const [currentValue, setCurrentValue] = useState<number | [number, number]>(\n    value,\n  );\n  const [leftPopover, setLeftPopover] = useState<TrackPosition>(null);\n  const [rightPopover, setRightPopover] = useState<TrackPosition>(null);\n  const [currentButton, setCurrentButton] = useState<ActiveButton | null>(null);\n\n  const activeButton: MutableRefObject<ActiveButton | null> = useRef(null);\n\n  const sizeSlider = useComponentSize(sliderRef);\n\n  const currentValueRef = useMutableRef(currentValue);\n  const onChangeRef = useMutableRef(onChange);\n  const onAfterChangeRef = useMutableRef(onAfterChange);\n\n  useClickOutside({\n    isActive: true,\n    ignoreClicksInsideRefs: [containerRef],\n    handler: () => {\n      setCurrentButton(null);\n      activeButton.current = null;\n    },\n  });\n\n  useEffect(() => {\n    if (disabled) {\n      controlListeners('remove');\n    }\n  }, [disabled]);\n\n  const controlListeners = (type: 'add' | 'remove') => {\n    const method = type === 'add' ? 'addEventListener' : 'removeEventListener';\n    document[method]('mouseup', handleRelease);\n    document[method]('touchend', handleRelease);\n    document[method]('mousemove', handleTouchMove);\n    document[method]('touchmove', handleTouchMove);\n  };\n\n  useEffect(() => {\n    if (Array.isArray(currentValue)) {\n      setTooltipPosition(currentValue[0], 0);\n      setTooltipPosition(currentValue[1], 1);\n    } else {\n      setTooltipPosition(currentValue, 0);\n    }\n  }, [currentValue]);\n\n  useEffect(() => {\n    if (valueToSring(value) !== valueToSring(currentValue)) {\n      if (Array.isArray(value) && Array.isArray(currentValue)) {\n        if (\n          !(\n            currentValue.indexOf(value[0]) !== -1 &&\n            currentValue.indexOf(value[1]) !== -1\n          )\n        ) {\n          setCurrentValue(value);\n          setTooltipPosition(getActiveValue(value, activeButton.current), 0);\n        }\n      } else {\n        setCurrentValue(value);\n        setTooltipPosition(getActiveValue(value, activeButton.current), 0);\n      }\n      setCurrentButton(null);\n      activeButton.current = null;\n    }\n  }, [value]);\n\n  useEffect(() => {\n    const newValue = Array.isArray(currentValue)\n      ? ([\n          getNewValue(currentValue[0], currentValue[0], step, min, max, 0),\n          getNewValue(currentValue[1], currentValue[1], step, min, max, 1),\n        ] as SliderValue<RANGE>)\n      : (getNewValue(\n          currentValue,\n          currentValue,\n          step,\n          min,\n          max,\n          0,\n        ) as SliderValue<RANGE>);\n    if (valueToSring(newValue) !== valueToSring(currentValue)) {\n      onChangeRef.current?.(newValue, {});\n    }\n  }, [step]);\n\n  useEffect(() => {\n    if (typeof value !== 'undefined') {\n      const targetValue = isRangeParams(props)\n        ? ([\n            getValidValue(props.value[0], min, max, step),\n            getValidValue(props.value[1], min, max, step),\n          ] as [number, number])\n        : getValidValue(props.value as number, min, max, step);\n      setCurrentValue(targetValue);\n    }\n  }, [range, typeof value]);\n\n  useEffect(() => {\n    if (isRangeParams(props) && props.value[0] > props.value[1]) {\n      const newValue: SliderValue<true> = [props.value[1], props.value[1]];\n      onChangeRef.current?.(newValue as SliderValue<RANGE>, {});\n    }\n  }, []);\n\n  const onSliderClick = (e: React.MouseEvent) => {\n    if (isNotRangeParams(props)) {\n      const positionValue = getValueByPosition(\n        { x: e.pageX, y: e.pageY },\n        sliderRef,\n        minValue,\n        maxValue,\n        step,\n      );\n      const newValue = getNewValue(\n        positionValue,\n        currentValue,\n        dragStepValue,\n        min,\n        max,\n        activeButton.current,\n      ) as SliderValue<RANGE>;\n      if (newValue !== value) {\n        setCurrentValue(newValue);\n        setTooltipPosition(getActiveValue(newValue, 0), 0);\n        onChangeRef.current?.(newValue, {\n          e,\n        });\n      }\n    }\n  };\n\n  const onKeyPress = useCallback(\n    (event: React.KeyboardEvent, typeButton: ActiveButton) => {\n      if (\n        !disabled &&\n        typeof typeButton === 'number' &&\n        typeof currentValue !== 'undefined'\n      ) {\n        event.preventDefault();\n        event.stopPropagation();\n        let stepIncrement = !Array.isArray(step) ? step || 1 : 1;\n        let validKeyCode = false;\n        const changedValue = getActiveValue(currentValue, typeButton);\n        switch (event.key) {\n          case 'ArrowUp':\n          case 'ArrowRight':\n          case '+':\n            validKeyCode = true;\n            break;\n          case 'ArrowLeft':\n          case 'ArrowDown':\n          case '-':\n            validKeyCode = true;\n            stepIncrement *= -1;\n            break;\n          default:\n            break;\n        }\n        if (validKeyCode) {\n          if (Array.isArray(step)) {\n            step.forEach((stepPoint, index) => {\n              if (\n                typeof typeButton === 'number' &&\n                changedValue === stepPoint\n              ) {\n                if (stepIncrement >= 0) {\n                  if (index === 0) {\n                    stepIncrement = step[1] - minValue;\n                  } else {\n                    stepIncrement =\n                      (typeof step[index + 1] !== 'undefined'\n                        ? step[index + 1]\n                        : maxValue) - stepPoint;\n                  }\n                } else if (index === 0) {\n                  stepIncrement = minValue - step[1];\n                } else {\n                  stepIncrement =\n                    (typeof step[index - 1] !== 'undefined'\n                      ? step[index - 1]\n                      : minValue) - stepPoint;\n                }\n              }\n            });\n          }\n          const newValue = getNewValue(\n            changedValue + stepIncrement,\n            currentValue,\n            step,\n            min,\n            max,\n            typeButton,\n          ) as SliderValue<RANGE>;\n          setCurrentValue(newValue);\n          setTooltipPosition(getActiveValue(newValue, typeButton), typeButton);\n          onChangeRef.current?.(newValue, {\n            e: event,\n          });\n        }\n      }\n    },\n    [currentValue, step, min, max],\n  );\n\n  const setTooltipPosition = (value: number, position: ActiveButton) => {\n    if (sliderRef.current && typeof position === 'number') {\n      const button = buttonRefs[position].current || sliderRef.current;\n      const { x, width } = sliderRef.current.getBoundingClientRect();\n      const newPosition = {\n        y: button.offsetTop + button.offsetHeight + 50,\n        x: x + Math.abs((value - minValue) / (maxValue - minValue)) * width,\n      };\n      if (position === 0) {\n        setLeftPopover(newPosition);\n      } else {\n        setRightPopover(newPosition);\n      }\n    }\n  };\n\n  const changePosition = (event: Event) => {\n    const nativeEvent = event as MouseEvent | TouchEvent;\n    if (typeof activeButton.current !== 'number') {\n      return value;\n    }\n    const position = trackPosition(nativeEvent);\n    const positionValue = getValueByPosition(\n      position,\n      sliderRef,\n      minValue,\n      maxValue,\n      step,\n    );\n    return getNewValue(\n      positionValue,\n      currentValue,\n      dragStepValue,\n      min,\n      max,\n      activeButton.current,\n    );\n  };\n\n  const onFocus = (\n    e: React.FocusEvent | React.MouseEvent,\n    button: ActiveButton,\n  ) => {\n    setCurrentButton(button);\n    activeButton.current = button;\n  };\n\n  const handleTouchMove = (\n    event: MouseEvent | TouchEvent | Event,\n    typeButton?: ActiveButton,\n  ) => {\n    const button = typeButton || activeButton.current;\n    if (typeof button === 'number') {\n      const position = changePosition(event) as SliderValue<RANGE>;\n      const oldValue: number = getActiveValue(currentValue, button);\n      const newValue: number = getActiveValue(position, button);\n      setCurrentValue(position);\n      if (valueToSring(oldValue) !== valueToSring(newValue)) {\n        onAfterChangeRef.current?.(position, { e: event });\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (isRangeParams(props)) {\n      props.value?.forEach((val, index) => {\n        setTooltipPosition(\n          getActiveValue(val, activeButton.current),\n          index === 0 ? 0 : 1,\n        );\n      });\n    }\n    if (isNotRangeParams(props)) {\n      setTooltipPosition(getActiveValue(value, activeButton.current), 0);\n    }\n    activeButton.current = null;\n  }, [sizeSlider, typeof value]);\n\n  const handleRelease = useCallback(\n    (e: MouseEvent | TouchEvent | Event) => {\n      controlListeners('remove');\n      if (isRangeParams(props) && Array.isArray(currentValueRef.current)) {\n        const copyValues = [...currentValueRef.current].sort(\n          (a, b) => Number(a) - Number(b),\n        ) as SliderValue<true>;\n        onChangeRef.current?.(copyValues as SliderValue<RANGE>, { e });\n      }\n      if (\n        isNotRangeParams(props) &&\n        typeof currentValueRef.current === 'number'\n      ) {\n        onChangeRef.current?.(currentValueRef.current as SliderValue<RANGE>, {\n          e,\n        });\n      }\n      setCurrentButton(null);\n      activeButton.current = null;\n    },\n    [value, handleTouchMove],\n  );\n\n  const handlePress = useCallback(\n    (typeButton: ActiveButton) => {\n      if (!disabled) {\n        setCurrentButton(typeButton);\n        activeButton.current = typeButton;\n        controlListeners('add');\n      }\n    },\n    [currentValue, value, handleTouchMove, disabled],\n  );\n\n  return {\n    onKeyPress,\n    onFocus,\n    handlePress,\n    onSliderClick,\n    activeButton: currentButton,\n    popoverPosition: [leftPopover, rightPopover],\n    currentValue: Array.isArray(currentValue) ? currentValue : [currentValue],\n  };\n}\n"],"mappings":"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"}