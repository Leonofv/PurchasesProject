{"version":3,"file":"TableFilterTooltip.js","names":["IconFunnel","React","useRef","useState","Transition","animateTimeout","cnMixPopoverAnimate","cn","Button","Popover","Text","cnTableFilterTooltip","TableFilterTooltip","field","isOpened","options","values","className","children","onChange","onToggle","direction","setDirection","buttonRef","popoverRef","animate","e","Array","from","target","selectedOptions","map","option","value","label"],"sources":["../../../../../../src/components/Table/FilterTooltip/TableFilterTooltip.tsx"],"sourcesContent":["import './TableFilterTooltip.css';\n\nimport { IconFunnel } from '@consta/icons/IconFunnel';\nimport React, { useRef, useState } from 'react';\nimport { Transition } from 'react-transition-group';\n\nimport {\n  animateTimeout,\n  cnMixPopoverAnimate,\n} from '../../../mixs/MixPopoverAnimate/MixPopoverAnimate';\nimport { cn } from '../../../utils/bem';\nimport { Button } from '../../Button/Button';\nimport { Direction, Popover } from '../../Popover/Popover';\nimport { Text } from '../../Text/Text';\n\nconst cnTableFilterTooltip = cn('TableFilterTooltip');\n\ntype Values = string[];\n\ntype Props = {\n  options: Array<{\n    value: Values[number];\n    label: string;\n  }>;\n  values: Values;\n  field: string;\n  isOpened: boolean;\n  onChange: (field: string, values: Values) => void;\n  onToggle: () => void;\n  className?: string;\n  children?: React.ReactNode;\n};\n\nexport const TableFilterTooltip: React.FC<Props> = ({\n  field,\n  isOpened,\n  options,\n  values,\n  className,\n  children,\n  onChange,\n  onToggle,\n}) => {\n  const [direction, setDirection] = useState<Direction>('downRight');\n\n  const buttonRef = useRef<HTMLButtonElement>(null);\n  const popoverRef = useRef<HTMLDivElement>(null);\n\n  return (\n    <>\n      <Button\n        type=\"button\"\n        ref={buttonRef}\n        size=\"xs\"\n        iconSize=\"s\"\n        view=\"clear\"\n        onlyIcon\n        onClick={onToggle}\n        className={cnTableFilterTooltip('Button', { isOpened }, [className])}\n        iconLeft={IconFunnel}\n      />\n      <Transition\n        in={isOpened}\n        unmountOnExit\n        nodeRef={popoverRef}\n        timeout={animateTimeout}\n      >\n        {(animate) => (\n          <Popover\n            anchorRef={buttonRef}\n            possibleDirections={['downRight', 'downLeft']}\n            direction=\"downRight\"\n            offset={4}\n            arrowOffset={12}\n            ref={popoverRef}\n            onSetDirection={setDirection}\n            onClickOutside={onToggle}\n            className={cnTableFilterTooltip('Popover', [\n              cnMixPopoverAnimate({ animate, direction }),\n            ])}\n          >\n            {children || (\n              <div className={cnTableFilterTooltip('Content')}>\n                <Text\n                  as=\"div\"\n                  size=\"xs\"\n                  view=\"primary\"\n                  lineHeight=\"m\"\n                  className={cnTableFilterTooltip('Title')}\n                >\n                  Фильтровать по условию\n                </Text>\n                <select\n                  className={cnTableFilterTooltip('Select')}\n                  value={[...values]}\n                  multiple\n                  onChange={(e): void => {\n                    onChange(\n                      field,\n                      Array.from(e.target.selectedOptions).map(\n                        (option) => option.value,\n                      ),\n                    );\n                  }}\n                >\n                  {options.map((option) => (\n                    <option\n                      key={option.value}\n                      className={cnTableFilterTooltip('Option')}\n                      value={option.value}\n                      title={option.label}\n                    >\n                      {option.label}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            )}\n          </Popover>\n        )}\n      </Transition>\n    </>\n  );\n};\n"],"mappings":"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"}