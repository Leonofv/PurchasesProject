import _defineProperty from"@babel/runtime/helpers/defineProperty";function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}import"./TableHeader.css";import React from"react";import{cn}from"../../../utils/bem";import{Button}from"../../Button/Button";import{TableCell}from"../Cell/TableCell";import{getOptionsForFilters}from"../filtering";import{TableFilterTooltip}from"../FilterTooltip/TableFilterTooltip";var cnTableHeader=cn("TableHeader");export var levelTypes=["high","low","default"];export var TableHeader=function(a){var b=a.isStickyHeader,c=a.headersWithMetaData,d=a.headerRowsHeights,f=a.headerRowsRefs,g=a.getStickyLeftOffset,h=a.stickyColumnsGrid,i=a.showVerticalCellShadow,j=a.headerVerticalAlign,k=a.getSortIcon,l=a.handleSortClick,m=a.handleFilterTogglerClick,n=a.handleCellClick,o=a.handleTooltipSave,p=a.filters,q=a.visibleFilter,r=a.selectedFilters,s=a.showHorizontalCellShadow,t=a.borderBetweenColumns,u=d.reduce(function(c,a){return c+a},0),v={"--table-header-height":"".concat(u,"px")},w=function(a){var b;return 1<=+a.position.colSpan?"high":null!==(b=a.position)&&void 0!==b&&b.smallTextSize?"low":"default"},x=function(a){var b=[],d=function(a){a.columns?a.columns.forEach(function(a){return d(c.find(function(b){return b.title===a.title}))}):b.push(a)};return d(a),b.some(function(a){return a.isResized})},y=function(a){var b,c,d,e;if(!p||!a.accessor)return null;var f=p.find(function(b){var c=b.field;return c===a.accessor}),g=null===f||void 0===f||null===(b=f.component)||void 0===b?void 0:b.name,h=null!==(c=null===f||void 0===f||null===(d=f.component)||void 0===d?void 0:d.props)&&void 0!==c?c:{},i=m(a.accessor),j=null===f||void 0===f?void 0:f.id;return a.filterable?React.createElement(TableFilterTooltip,{field:a.accessor,isOpened:q===a.accessor,options:getOptionsForFilters(p,a.accessor),values:r[a.accessor].selected||[],onChange:o,onToggle:m(a.accessor),className:cnTableHeader("Icon",{type:"filter"})},g&&React.createElement(g,Object.assign({},h,{onConfirm:function handleFilterSave(b){j&&o(a.accessor,[j],b),i()},filterValue:null===(e=r[a.accessor])||void 0===e?void 0:e.value,onCancel:m(a.accessor)}))):null},z=function(a){return a.control?React.createElement("div",{className:cnTableHeader("\u0421ontrol")},a.control({column:a})):null};return React.createElement(React.Fragment,null,React.createElement("div",{className:cnTableHeader("Row",{withVerticalBorder:t})},c.map(function(a,m){var o,p,q,r,s={};return a.position.colSpan&&(s.gridColumnEnd="span ".concat(a.position.colSpan)),a.position.rowSpan&&(s.gridRowEnd="span ".concat(a.position.rowSpan)),b&&(s.top=d.slice(0,a.position.level).reduce(function(c,a){return c+a},0)),React.createElement(TableCell,{type:"header",key:m,ref:function ref(a){f.current[m]=a},style:_objectSpread(_objectSpread({},s),{},{left:g(a.position.gridIndex,a.position.topHeaderGridIndex)}),isSticky:b,isResized:x(a),column:a,verticalAlign:j,onContextMenu:function onContextMenu(a){return n({e:a,type:"contextMenu",columnIdx:m,ref:{current:f.current[m]}})},onClick:function onClick(a){return n({e:a,type:"click",columnIdx:m,ref:{current:f.current[m]}})},className:cnTableHeader("Cell",{isFirstColumn:null===(o=a.position)||void 0===o?void 0:o.isFirst,isFirstRow:0===a.position.level,isLastInColumn:(null===(p=a.position)||void 0===p?void 0:p.topHeaderGridIndex)!==(null===(q=c[m+1])||void 0===q||null===(r=q.position)||void 0===r?void 0:r.topHeaderGridIndex),level:w(a)}),showVerticalShadow:i&&a.position.gridIndex+((null===a||void 0===a?void 0:a.position.colSpan)||1)===h},a.title,React.createElement("div",{className:cnTableHeader("Buttons",{isSortingActive:a.isSortingActive,isFilterActive:a.isFilterActive,verticalAlign:j})},a.sortable&&React.createElement(Button,{type:"button",size:"xs",iconSize:"s",view:"clear",onlyIcon:!0,onClick:function onClick(){return l(a)},iconLeft:k(a),className:cnTableHeader("Icon",{type:"sort"})}),y(a),z(a)))})),React.createElement("div",{className:cnTableHeader("ShadowWrapper"),style:v},React.createElement("div",{className:cnTableHeader("Shadow",{show:s&&b})})))};
//# sourceMappingURL=TableHeader.js.map