{"version":3,"file":"Tabs.js","names":["React","forwardRef","useRefs","cnMixScrollBar","useChoiceGroup","useResizeObserved","cn","getTabsDirection","getTabsWrapper","withDefaultGetters","TabsBorderLine","TabsRunningLine","TabsTab","tabsDefaultFitMode","tabsDefaultLinePosition","tabsDefaultSize","tabsDefaultView","cnTabs","renderItemDefault","props","item","attributes","as","otherProps","TabsRender","ref","size","className","items","view","value","linePosition","fitMode","withScrollButtons","onlyIcon","getItemIcon","getItemAs","getItemAttributes","getItemRef","getItemLabel","onChange","iconSize","renderItem","renderItemProp","getItemLeftIcon","getItemLeftSide","getItemRightIcon","getItemRightSide","getItemDisabled","disabled","getKey","callBack","multiple","getOnChange","getChecked","tabsDirection","isVertical","tabRefs","length","tabsDimensions","el","gap","parseInt","getComputedStyle","activeTabIdx","findIndex","onClick","renderInDropdown","checked","label","toString","icon","leftIcon","rightIcon","leftSide","rightSide","tabRef","Wrapper","direction","invisible","renderItemsList","withRunningLine","visibleIndexes","getTabClassName","map","idx","Tabs"],"sources":["../../../../../src/components/Tabs/Tabs.tsx"],"sourcesContent":["import './Tabs.css';\n\nimport React, { forwardRef } from 'react';\n\nimport { useRefs } from '##/hooks/useRefs';\nimport { cnMixScrollBar } from '##/mixs/MixScrollBar';\n\nimport { useChoiceGroup } from '../../hooks/useChoiceGroup/useChoiceGroup';\nimport { useResizeObserved } from '../../hooks/useResizeObserved/useResizeObserved';\nimport { cn } from '../../utils/bem';\nimport {\n  getTabsDirection,\n  getTabsWrapper,\n  withDefaultGetters,\n} from './helpers';\nimport { TabsBorderLine, TabsRunningLine } from './TabsLine/TabsLine';\nimport { TabsTab } from './TabsTab/TabsTab';\nimport {\n  RenderItemProps,\n  RenderItemsListProp,\n  TabDimensions,\n  TabsComponent,\n  tabsDefaultFitMode,\n  tabsDefaultLinePosition,\n  tabsDefaultSize,\n  tabsDefaultView,\n  TabsProps,\n} from './types';\n\nexport const cnTabs = cn('Tabs');\n\nfunction renderItemDefault<ITEM>(\n  props: RenderItemProps<ITEM>,\n): React.ReactElement {\n  const { item, attributes = {}, as, ...otherProps } = props;\n  return <TabsTab {...attributes} {...otherProps} as={as} />;\n}\n\nconst TabsRender = (props: TabsProps, ref: React.Ref<HTMLDivElement>) => {\n  const {\n    size = tabsDefaultSize,\n    className,\n    items,\n    view = tabsDefaultView,\n    value,\n    linePosition = tabsDefaultLinePosition,\n    fitMode = tabsDefaultFitMode,\n    withScrollButtons = true,\n    onlyIcon,\n    getItemIcon,\n    getItemAs,\n    getItemAttributes,\n    getItemRef,\n    getItemLabel,\n    onChange,\n    iconSize,\n    renderItem: renderItemProp = renderItemDefault,\n    getItemLeftIcon,\n    getItemLeftSide,\n    getItemRightIcon,\n    getItemRightSide,\n    getItemDisabled,\n    disabled,\n    ...otherProps\n  } = withDefaultGetters(props);\n\n  const { getOnChange, getChecked } = useChoiceGroup({\n    value: value || null,\n    getKey: getItemLabel,\n    callBack: onChange,\n    multiple: false,\n  });\n\n  const tabsDirection = getTabsDirection(linePosition);\n  const isVertical = tabsDirection === 'vertical';\n  const tabRefs = useRefs<HTMLDivElement>(items.length, [\n    items.length,\n    fitMode,\n    isVertical,\n  ]);\n\n  const tabsDimensions = useResizeObserved(\n    tabRefs,\n    (el): TabDimensions => ({\n      size: el?.[isVertical ? 'offsetHeight' : 'offsetWidth'] ?? 0,\n      gap: el\n        ? parseInt(\n            getComputedStyle(el)[isVertical ? 'marginBottom' : 'marginRight'],\n            10,\n          )\n        : 0,\n    }),\n  );\n\n  const activeTabIdx = items.findIndex(getChecked);\n\n  const renderItem = (\n    item: typeof items[number],\n    onClick?: () => void,\n    renderInDropdown?: boolean,\n  ) =>\n    renderItemProp({\n      item,\n      onChange: (...args) => {\n        onClick?.();\n        getOnChange(item)(...args);\n      },\n      checked: getChecked(item),\n      label: getItemLabel(item).toString(),\n      icon: getItemIcon(item),\n      leftIcon: getItemLeftIcon(item),\n      rightIcon: getItemRightIcon(item),\n      leftSide: getItemLeftSide(item),\n      rightSide: getItemRightSide(item),\n      disabled: disabled || getItemDisabled(item),\n      onlyIcon,\n      size,\n      iconSize,\n      renderInDropdown,\n      as: getItemAs(item) || 'button',\n      tabRef: getItemRef(item),\n      attributes: getItemAttributes(item),\n    });\n\n  const renderItemsList: RenderItemsListProp = ({\n    withRunningLine = true,\n    visibleIndexes,\n    getTabClassName,\n  }) => (\n    <div className={cnTabs('List', { direction: tabsDirection, linePosition })}>\n      {items.map((item, idx) => (\n        <div\n          ref={tabRefs[idx]}\n          key={getItemLabel(item)}\n          className={cnTabs('Tab', { direction: tabsDirection }, [\n            getTabClassName?.(idx),\n          ])}\n        >\n          {renderItem(item)}\n        </div>\n      ))}\n      {withRunningLine && !disabled && (\n        <TabsRunningLine\n          visibleIndexes={visibleIndexes}\n          linePosition={linePosition}\n          tabsDimensions={tabsDimensions}\n          activeTabIdx={activeTabIdx}\n        />\n      )}\n    </div>\n  );\n\n  const Wrapper = getTabsWrapper(tabsDirection, fitMode);\n\n  if (!items.length) {\n    return null;\n  }\n\n  return (\n    <div\n      className={cnTabs({ size, view, direction: tabsDirection }, [\n        className,\n        cnMixScrollBar({ invisible: true }),\n      ])}\n      ref={ref}\n      {...otherProps}\n    >\n      <Wrapper\n        tabRefs={tabRefs}\n        onChange={onChange}\n        tabsDimensions={tabsDimensions}\n        renderItem={renderItem}\n        renderItemsList={renderItemsList}\n        getItemLabel={getItemLabel}\n        getItemChecked={getChecked}\n        items={items}\n        size={size}\n        withScrollButtons={withScrollButtons}\n      />\n      {view === 'bordered' && <TabsBorderLine linePosition={linePosition} />}\n    </div>\n  );\n};\n\nexport const Tabs = forwardRef(TabsRender) as TabsComponent;\n\nexport * from './types';\n"],"mappings":"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"}