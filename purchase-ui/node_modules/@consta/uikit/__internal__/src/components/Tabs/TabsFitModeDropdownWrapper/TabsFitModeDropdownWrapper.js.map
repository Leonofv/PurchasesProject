{"version":3,"file":"TabsFitModeDropdownWrapper.js","names":["React","cn","getTabsWidth","TabsMoreItems","useFittingItems","cnTabsFitModeDropdownWrapper","TabsFitModeDropdownWrapper","items","tabsDimensions","tabRefs","getItemLabel","getItemChecked","renderItem","onChange","renderItemsList","size","ref","useRef","moreItemsRef","activeIndex","findIndex","containerRef","visibleIndexes","isItemHidden","hiddenItems","filter","_item","idx","maxTabHeight","useMemo","length","Math","max","map","tabRef","current","offsetHeight","visibleTabsWidth","_td","height","withRunningLine","getTabClassName","hidden","left"],"sources":["../../../../../../src/components/Tabs/TabsFitModeDropdownWrapper/TabsFitModeDropdownWrapper.tsx"],"sourcesContent":["import './TabsFitModeDropdownWrapper.css';\n\nimport React from 'react';\n\nimport { cn } from '../../../utils/bem';\nimport { getTabsWidth } from '../helpers';\nimport { TabsMoreItems } from '../TabsMoreItems/TabsMoreItems';\nimport { TabsFitModeWrapperProps } from '../types';\nimport { useFittingItems } from './useFittingItems';\n\nconst cnTabsFitModeDropdownWrapper = cn('TabsFitModeDropdownWrapper');\n\nexport const TabsFitModeDropdownWrapper = <ITEM,>({\n  items,\n  tabsDimensions,\n  tabRefs,\n  getItemLabel,\n  getItemChecked,\n  renderItem,\n  onChange,\n  renderItemsList,\n  size,\n}: TabsFitModeWrapperProps<ITEM>): React.ReactElement | null => {\n  const ref = React.useRef<HTMLDivElement>(null);\n  const moreItemsRef = React.useRef<HTMLDivElement>(null);\n\n  const activeIndex = items.findIndex(getItemChecked);\n\n  const { visibleIndexes, isItemHidden } = useFittingItems({\n    tabsDimensions,\n    containerRef: ref,\n    moreItemsRef,\n    activeIndex,\n  });\n\n  const hiddenItems = items.filter((_item, idx) => isItemHidden(idx));\n  const maxTabHeight: number = React.useMemo(() => {\n    if (!tabRefs.length) {\n      return 0;\n    }\n    return Math.max(\n      ...tabRefs.map((tabRef) => tabRef.current?.offsetHeight ?? 0),\n    );\n  }, [tabsDimensions]);\n\n  const visibleTabsWidth = getTabsWidth(\n    tabsDimensions.filter((_td, idx) => !isItemHidden(idx)),\n  );\n\n  return (\n    <div\n      ref={ref}\n      className={cnTabsFitModeDropdownWrapper()}\n      style={{ height: maxTabHeight }}\n    >\n      <div className={cnTabsFitModeDropdownWrapper('Tabs')}>\n        {renderItemsList({\n          visibleIndexes,\n          withRunningLine: true,\n          getTabClassName: (idx) =>\n            cnTabsFitModeDropdownWrapper('Tab', { hidden: isItemHidden(idx) }),\n        })}\n      </div>\n      <div\n        ref={moreItemsRef}\n        className={cnTabsFitModeDropdownWrapper('MoreItems', {\n          hidden: !hiddenItems.length,\n        })}\n        style={{\n          /* В Safari скрытые табы с абсолютом продолжают растягивать контейнер,\n            поэтому приходится позиционировать кнопку абсолютом */\n          left: hiddenItems.length ? visibleTabsWidth : undefined,\n        }}\n      >\n        <TabsMoreItems\n          items={hiddenItems}\n          renderItem={renderItem}\n          onChange={onChange}\n          getItemLabel={getItemLabel}\n          height={maxTabHeight}\n          size={size}\n        />\n      </div>\n    </div>\n  );\n};\n"],"mappings":"yEAAA,yCAEA,MAAOA,MAAP,KAAkB,OAAlB,CAEA,OAASC,EAAT,0BACA,OAASC,YAAT,kBACA,OAASC,aAAT,sCAEA,OAASC,eAAT,yBAEA,GAAMC,6BAA4B,CAAGJ,EAAE,CAAC,4BAAD,CAAvC,CAEA,MAAO,IAAMK,2BAA0B,CAAG,WAUsB,IAT9DC,EAS8D,GAT9DA,KAS8D,CAR9DC,CAQ8D,GAR9DA,cAQ8D,CAP9DC,CAO8D,GAP9DA,OAO8D,CAN9DC,CAM8D,GAN9DA,YAM8D,CAL9DC,CAK8D,GAL9DA,cAK8D,CAJ9DC,CAI8D,GAJ9DA,UAI8D,CAH9DC,CAG8D,GAH9DA,QAG8D,CAF9DC,CAE8D,GAF9DA,eAE8D,CAD9DC,CAC8D,GAD9DA,IAC8D,CACxDC,CAAG,CAAGhB,KAAK,CAACiB,MAAN,CAA6B,IAA7B,CADkD,CAExDC,CAAY,CAAGlB,KAAK,CAACiB,MAAN,CAA6B,IAA7B,CAFyC,CAIxDE,CAAW,CAAGZ,CAAK,CAACa,SAAN,CAAgBT,CAAhB,CAJ0C,GAMrBP,eAAe,CAAC,CACvDI,cAAc,CAAdA,CADuD,CAEvDa,YAAY,CAAEL,CAFyC,CAGvDE,YAAY,CAAZA,CAHuD,CAIvDC,WAAW,CAAXA,CAJuD,CAAD,CANM,CAMtDG,CANsD,GAMtDA,cANsD,CAMtCC,CANsC,GAMtCA,YANsC,CAaxDC,CAAW,CAAGjB,CAAK,CAACkB,MAAN,CAAa,SAACC,CAAD,CAAQC,CAAR,QAAgBJ,EAAY,CAACI,CAAD,CAA5B,CAAb,CAb0C,CAcxDC,CAAoB,CAAG5B,KAAK,CAAC6B,OAAN,CAAc,UAAM,OAC1CpB,EAAO,CAACqB,MADkC,CAIxCC,IAAI,CAACC,GAAL,OAAAD,IAAI,oBACNtB,CAAO,CAACwB,GAAR,CAAY,SAACC,CAAD,qCAAYA,CAAM,CAACC,OAAnB,qBAAY,EAAgBC,YAA5B,gBAA4C,CAA5C,CAAZ,CADM,EAJoC,CAEtC,CAKV,CAP4B,CAO1B,CAAC5B,CAAD,CAP0B,CAdiC,CAuBxD6B,CAAgB,CAAGnC,YAAY,CACnCM,CAAc,CAACiB,MAAf,CAAsB,SAACa,CAAD,CAAMX,CAAN,QAAc,CAACJ,CAAY,CAACI,CAAD,CAA3B,CAAtB,CADmC,CAvByB,CA2B9D,MACE,4BACE,GAAG,CAAEX,CADP,CAEE,SAAS,CAAEX,4BAA4B,EAFzC,CAGE,KAAK,CAAE,CAAEkC,MAAM,CAAEX,CAAV,CAHT,EAKE,2BAAK,SAAS,CAAEvB,4BAA4B,CAAC,MAAD,CAA5C,EACGS,CAAe,CAAC,CACfQ,cAAc,CAAdA,CADe,CAEfkB,eAAe,GAFA,CAGfC,eAAe,CAAE,yBAACd,CAAD,QACftB,6BAA4B,CAAC,KAAD,CAAQ,CAAEqC,MAAM,CAAEnB,CAAY,CAACI,CAAD,CAAtB,CAAR,CADb,CAHF,CAAD,CADlB,CALF,CAaE,2BACE,GAAG,CAAET,CADP,CAEE,SAAS,CAAEb,4BAA4B,CAAC,WAAD,CAAc,CACnDqC,MAAM,CAAE,CAAClB,CAAW,CAACM,MAD8B,CAAd,CAFzC,CAKE,KAAK,CAAE,CAGLa,IAAI,CAAEnB,CAAW,CAACM,MAAZ,CAAqBO,CAArB,OAHD,CALT,EAWE,oBAAC,aAAD,EACE,KAAK,CAAEb,CADT,CAEE,UAAU,CAAEZ,CAFd,CAGE,QAAQ,CAAEC,CAHZ,CAIE,YAAY,CAAEH,CAJhB,CAKE,MAAM,CAAEkB,CALV,CAME,IAAI,CAAEb,CANR,EAXF,CAbF,CAmCH,CAzEM"}