{"version":3,"file":"useFittingItems.js","names":["React","useMemo","useComponentSize","useFittingItems","tabsDimensions","containerRef","moreItemsRef","activeIndex","containerWidth","width","moreItemsWidth","visibleIndexes","getFittingItems","isItemHidden","useCallback","idx","includes","totalWidth","Array","from","length","map","_el","index","size","gap","arr","entries","tabDimensions","isLastItem","push"],"sources":["../../../../../../src/components/Tabs/TabsFitModeDropdownWrapper/useFittingItems.ts"],"sourcesContent":["import React, { useMemo } from 'react';\n\nimport { useComponentSize } from '../../../hooks/useComponentSize/useComponentSize';\nimport { TabDimensions } from '../types';\n\nexport const useFittingItems = ({\n  tabsDimensions,\n  containerRef,\n  moreItemsRef,\n  activeIndex,\n}: {\n  tabsDimensions: TabDimensions[];\n  containerRef: React.RefObject<HTMLElement>;\n  moreItemsRef: React.RefObject<HTMLElement>;\n  activeIndex?: number;\n}): {\n  visibleIndexes: number[];\n  isItemHidden: (idx: number) => boolean;\n} => {\n  const { width: containerWidth } = useComponentSize(containerRef);\n  const { width: moreItemsWidth } = useComponentSize(moreItemsRef);\n\n  const visibleIndexes = useMemo(\n    () =>\n      getFittingItems(\n        tabsDimensions,\n        containerWidth,\n        moreItemsWidth,\n        activeIndex,\n      ),\n    [tabsDimensions, containerWidth, moreItemsWidth, activeIndex],\n  );\n\n  return {\n    visibleIndexes,\n    isItemHidden: React.useCallback(\n      (idx) => !visibleIndexes.includes(idx),\n      [visibleIndexes],\n    ),\n  };\n};\n\nexport const getFittingItems = (\n  tabsDimensions: TabDimensions[],\n  totalWidth: number,\n  moreItemsWidth: number,\n  activeIndex?: number,\n): number[] => {\n  if (!totalWidth) {\n    return Array.from<number>({ length: tabsDimensions.length }).map(\n      (_el, index) => index,\n    );\n  }\n  let width =\n    typeof activeIndex === 'number' && activeIndex > -1\n      ? tabsDimensions[activeIndex].size + tabsDimensions[activeIndex].gap\n      : 0;\n  const arr: number[] = [];\n  for (const [idx, tabDimensions] of tabsDimensions.entries()) {\n    if (idx !== activeIndex) {\n      const isLastItem = idx === tabsDimensions.length - 1;\n      width += tabDimensions.size + (isLastItem ? 0 : tabDimensions.gap);\n      if (width + moreItemsWidth > totalWidth) {\n        if (activeIndex && !arr.includes(activeIndex)) {\n          arr.push(activeIndex);\n        }\n        return arr;\n      }\n      arr.push(idx);\n    } else {\n      arr.push(activeIndex);\n    }\n  }\n\n  return Array.from<number>({ length: tabsDimensions.length }).map(\n    (_el, index) => index,\n  );\n};\n"],"mappings":"stCAAA,MAAOA,MAAP,EAAgBC,OAAhB,KAA+B,OAA/B,CAEA,OAASC,gBAAT,wDAGA,MAAO,IAAMC,gBAAe,CAAG,WAa1B,IAZHC,EAYG,GAZHA,cAYG,CAXHC,CAWG,GAXHA,YAWG,CAVHC,CAUG,GAVHA,YAUG,CATHC,CASG,GATHA,WASG,GAC+BL,gBAAgB,CAACG,CAAD,CAD/C,CACYG,CADZ,GACKC,KADL,GAE+BP,gBAAgB,CAACI,CAAD,CAF/C,CAEYI,CAFZ,GAEKD,KAFL,CAIGE,CAAc,CAAGV,OAAO,CAC5B,iBACEW,gBAAe,CACbR,CADa,CAEbI,CAFa,CAGbE,CAHa,CAIbH,CAJa,CADjB,CAD4B,CAQ5B,CAACH,CAAD,CAAiBI,CAAjB,CAAiCE,CAAjC,CAAiDH,CAAjD,CAR4B,CAJ3B,CAeH,MAAO,CACLI,cAAc,CAAdA,CADK,CAELE,YAAY,CAAEb,KAAK,CAACc,WAAN,CACZ,SAACC,CAAD,QAAS,CAACJ,CAAc,CAACK,QAAf,CAAwBD,CAAxB,CAAV,CADY,CAEZ,CAACJ,CAAD,CAFY,CAFT,CAOR,CAnCM,CAqCP,MAAO,IAAMC,gBAAe,CAAG,SAC7BR,CAD6B,CAE7Ba,CAF6B,CAG7BP,CAH6B,CAI7BH,CAJ6B,CAKhB,CACb,GAAI,CAACU,CAAL,CACE,MAAOC,MAAK,CAACC,IAAN,CAAmB,CAAEC,MAAM,CAAEhB,CAAc,CAACgB,MAAzB,CAAnB,EAAsDC,GAAtD,CACL,SAACC,CAAD,CAAMC,CAAN,QAAgBA,EAAhB,CADK,CAAP,CAFW,MAMTd,CAAK,CACgB,QAAvB,QAAOF,EAAP,EAAiD,CAAC,CAAf,CAAAA,CAAnC,CACIH,CAAc,CAACG,CAAD,CAAd,CAA4BiB,IAA5B,CAAmCpB,CAAc,CAACG,CAAD,CAAd,CAA4BkB,GADnE,CAEI,CATO,CAUPC,CAAa,CAAG,EAVT,8BAWsBtB,CAAc,CAACuB,OAAf,EAXtB,MAWb,2BAA6D,iCAAjDZ,CAAiD,MAA5Ca,CAA4C,MAC3D,GAAIb,CAAG,GAAKR,CAAZ,CAAyB,CACvB,GAAMsB,EAAU,CAAGd,CAAG,GAAKX,CAAc,CAACgB,MAAf,CAAwB,CAAnD,CAEA,GADAX,CAAK,EAAImB,CAAa,CAACJ,IAAd,EAAsBK,CAAU,CAAG,CAAH,CAAOD,CAAa,CAACH,GAArD,CACT,CAAIhB,CAAK,CAAGC,CAAR,CAAyBO,CAA7B,CAIE,MAHIV,EAAW,EAAI,CAACmB,CAAG,CAACV,QAAJ,CAAaT,CAAb,CAGpB,EAFEmB,CAAG,CAACI,IAAJ,CAASvB,CAAT,CAEF,CAAOmB,CAAP,CAEFA,CAAG,CAACI,IAAJ,CAASf,CAAT,CACD,CAVD,IAWEW,EAAG,CAACI,IAAJ,CAASvB,CAAT,CAEH,CAzBY,+BA2Bb,MAAOW,MAAK,CAACC,IAAN,CAAmB,CAAEC,MAAM,CAAEhB,CAAc,CAACgB,MAAzB,CAAnB,EAAsDC,GAAtD,CACL,SAACC,CAAD,CAAMC,CAAN,QAAgBA,EAAhB,CADK,CAGR,CAnCM"}