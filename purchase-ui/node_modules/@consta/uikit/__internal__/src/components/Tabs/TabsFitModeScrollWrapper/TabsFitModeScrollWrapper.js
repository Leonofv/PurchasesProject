import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import"./TabsFitModeScrollWrapper.css";import{IconArrowLeft}from"@consta/icons/IconArrowLeft";import{IconArrowRight}from"@consta/icons/IconArrowRight";import React from"react";import{cnMixScrollBar}from"../../../mixs/MixScrollBar";import{useResizeObserved}from"../../../hooks/useResizeObserved/useResizeObserved";import{useScrollPosition}from"../../../hooks/useScrollPosition/useScrollPosition";import{cn}from"../../../utils/bem";import{Button}from"../../Button/Button";import{getTabsWidth,getVisibleTabsRange}from"../helpers";var cnTabsFitModeScrollWrapper=cn("TabsFitModeScrollWrapper");export var TabsFitModeScrollWrapper=function(a){var b=a.tabsDimensions,c=a.items,d=a.renderItemsList,e=a.getItemChecked,f=a.withScrollButtons,g=React.useRef(null),h=useResizeObserved(React.useMemo(function(){return[g]},[g,c]),function(a){var b;return{isScrollable:a&&a.scrollWidth>a.offsetWidth,width:null!==(b=null===a||void 0===a?void 0:a.offsetWidth)&&void 0!==b?b:0,paddingLeft:a?parseInt(getComputedStyle(a).paddingLeft,10):0}}),i=_slicedToArray(h,1),j=i[0],k=j.isScrollable,l=j.width,m=j.paddingLeft,n=useScrollPosition(g.current),o=n.scrollLeft,p=getVisibleTabsRange({tabsDimensions:b,containerWidth:l,containerPaddingLeft:m,scrollLeft:o}),q=_slicedToArray(p,2),r=q[0],s=q[1],t=function(a){if(!(a>=r&&a<=s)){var c,d=getTabsWidth(b.slice(0,a));null===(c=g.current)||void 0===c?void 0:c.scrollTo({left:d,behavior:"smooth"})}},u=function(){t(r-1)},v=function(){t(s+1)},w=c.findIndex(e);return React.useEffect(function(){k&&t(w)},[w,k]),React.createElement("div",{className:cnTabsFitModeScrollWrapper()},k&&f&&React.createElement(React.Fragment,null,["prev","next"].map(function(a){return React.createElement(Button,{key:a,view:"clear",type:"button",size:"xs",onlyIcon:!0,disabled:"prev"===a?0===r:s===c.length-1,iconLeft:"prev"===a?IconArrowLeft:IconArrowRight,className:cnTabsFitModeScrollWrapper("Button",{to:a}),onClick:"prev"===a?u:v})})),React.createElement("div",{className:cnTabsFitModeScrollWrapper("Content",cnMixScrollBar({invisible:!0})),ref:g},d({visibleIndexes:Array.from(Array(c.length).keys()),getTabClassName:function getTabClassName(a){return cnTabsFitModeScrollWrapper("Tab",{noMargin:a===c.length-1})}})))};
//# sourceMappingURL=TabsFitModeScrollWrapper.js.map