{"version":3,"file":"Tag.js","names":["React","forwardRef","useRef","useForkRef","usePropsHandler","TagBase","tagPropMode","tagPropModeDefault","getParams","mode","checked","onClick","onChange","onCancel","view","as","withAction","e","COMPONENT_NAME","TagRenter","props","ref","tagRef","otherProps","params","Tag"],"sources":["../../../../../src/components/Tag/Tag.tsx"],"sourcesContent":["import { IconComponent, IconProps } from '@consta/icons/Icon';\nimport React, { forwardRef, useRef } from 'react';\n\nimport { AsTagAttribute, AsTags } from '##/utils/types/AsTags';\n\nimport { useForkRef } from '../../hooks/useForkRef/useForkRef';\nimport { usePropsHandler } from '../EventInterceptor/usePropsHandler';\nimport { TagBase } from '../TagBase/TagBase';\n\ntype TagBaseProps = React.ComponentProps<typeof TagBase>;\n\nexport const tagPropMode = [\n  'button',\n  'check',\n  'cancel',\n  'link',\n  'info',\n] as const;\nexport const tagPropModeDefault = tagPropMode[0];\ntype TagPropMode = typeof tagPropMode[number];\n\ntype CommonProps = {\n  size?: TagBaseProps['size'];\n  label: TagBaseProps['label'];\n  group?: TagBaseProps['group'];\n  icon?: IconComponent;\n  iconSize?: IconProps['size'];\n  children?: never;\n};\n\ntype PropsWithModeButton = CommonProps & {\n  mode?: 'button';\n  onClick: React.MouseEventHandler<HTMLButtonElement>;\n  checked?: never;\n  onChange?: never;\n  onCancel?: never;\n};\n\ntype PropsWithModeLink = CommonProps & {\n  mode: 'link';\n  checked?: never;\n  onChange?: never;\n  onCancel?: never;\n};\n\ntype PropsWithModeCheck = CommonProps & {\n  mode: 'check';\n  onChange: (\n    checked: boolean,\n    params: { e?: React.MouseEvent; checked: boolean },\n  ) => void;\n  checked: boolean;\n  onClick?: never;\n  onCancel?: never;\n};\n\ntype PropsWithModeCancel = CommonProps & {\n  mode: 'cancel';\n  onCancel: React.MouseEventHandler<HTMLButtonElement>;\n  onClick?: never;\n  onChange?: never;\n  checked?: never;\n};\n\ntype PropsWithModeInfo = CommonProps & {\n  mode: 'info';\n  onCancel?: never;\n  onClick?: never;\n  onChange?: never;\n  checked?: never;\n};\n\ntype Props<ROLE extends TagPropMode = 'button'> = ROLE extends 'button'\n  ? PropsWithModeButton &\n      Omit<AsTagAttribute<'button'>, keyof PropsWithModeButton>\n  : {} & ROLE extends 'check'\n  ? PropsWithModeCheck &\n      Omit<AsTagAttribute<'button'>, keyof PropsWithModeCheck>\n  : {} & ROLE extends 'cancel'\n  ? PropsWithModeCancel &\n      Omit<AsTagAttribute<'span'>, keyof PropsWithModeCancel>\n  : {} & ROLE extends 'link'\n  ? PropsWithModeLink & Omit<AsTagAttribute<'a'>, keyof PropsWithModeLink>\n  : {} & ROLE extends 'info'\n  ? PropsWithModeInfo & Omit<AsTagAttribute<'span'>, keyof PropsWithModeInfo>\n  : {};\n\ntype TagRender = <ROLE extends TagPropMode>(\n  props: Props<ROLE>,\n  ref: React.Ref<HTMLElement>,\n) => React.ReactElement | null;\n\ntype TagComponent = <ROLE extends TagPropMode>(\n  props: Props<ROLE> & React.RefAttributes<HTMLElement>,\n) => React.ReactElement | null;\n\nexport function getParams(\n  mode: TagPropMode,\n  checked?: PropsWithModeCheck['checked'],\n  onClick?: React.MouseEventHandler,\n  onChange?: PropsWithModeCheck['onChange'],\n  onCancel?: PropsWithModeCancel['onCancel'],\n): {\n  view?: TagBaseProps['view'];\n  onClick?: TagBaseProps['onClick'];\n  onCancel?: TagBaseProps['onCancel'];\n  withAction?: TagBaseProps['withAction'];\n  as: AsTags;\n} {\n  switch (mode) {\n    case 'button':\n      return {\n        view: 'filled',\n        onClick,\n        as: 'button',\n        withAction: true,\n      };\n    case 'link':\n      return {\n        view: 'filled',\n        onClick,\n        as: 'a',\n        withAction: true,\n      };\n    case 'check':\n      return {\n        view: checked ? 'filled' : 'stroked',\n        onClick:\n          typeof onChange === 'function'\n            ? (e: React.MouseEvent) =>\n                onChange(!checked, { e, checked: !checked })\n            : undefined,\n        as: 'button',\n        withAction: true,\n      };\n    case 'cancel':\n      return {\n        view: 'filled',\n        onCancel,\n        as: 'span',\n      };\n    case 'info':\n      return {\n        view: 'filled',\n        as: 'span',\n      };\n  }\n}\n\nexport const COMPONENT_NAME = 'Tag' as const;\n\nconst TagRenter: TagRender = (props, ref) => {\n  const tagRef = useRef<HTMLDivElement>(null);\n  const {\n    mode = tagPropModeDefault,\n    onChange,\n    checked,\n    onCancel,\n    onClick,\n    ...otherProps\n  } = usePropsHandler(COMPONENT_NAME, props, tagRef);\n  const params = getParams(mode, checked, onClick, onChange, onCancel);\n\n  return (\n    <TagBase {...otherProps} {...params} ref={useForkRef([ref, tagRef])} />\n  );\n};\n\nexport const Tag = forwardRef(TagRenter) as TagComponent;\n"],"mappings":"sJACA,MAAOA,MAAP,EAAgBC,UAAhB,CAA4BC,MAA5B,KAA0C,OAA1C,CAIA,OAASC,UAAT,yCACA,OAASC,eAAT,2CACA,OAASC,OAAT,0BAIA,MAAO,IAAMC,YAAW,CAAG,CACzB,QADyB,CAEzB,OAFyB,CAGzB,QAHyB,CAIzB,MAJyB,CAKzB,MALyB,CAApB,CAOP,MAAO,IAAMC,mBAAkB,CAAGD,WAAW,CAAC,CAAD,CAAtC,CA8EP,MAAO,SAASE,UAAT,CACLC,CADK,CAELC,CAFK,CAGLC,CAHK,CAILC,CAJK,CAKLC,CALK,CAYL,OAEO,QAFP,GACQJ,CADR,CAGW,CACLK,IAAI,CAAE,QADD,CAELH,OAAO,CAAPA,CAFK,CAGLI,EAAE,CAAE,QAHC,CAILC,UAAU,GAJL,CAHX,CASO,MATP,GACQP,CADR,CAUW,CACLK,IAAI,CAAE,QADD,CAELH,OAAO,CAAPA,CAFK,CAGLI,EAAE,CAAE,GAHC,CAILC,UAAU,GAJL,CAVX,CAgBO,OAhBP,GACQP,CADR,CAiBW,CACLK,IAAI,CAAEJ,CAAO,CAAG,QAAH,CAAc,SADtB,CAELC,OAAO,CACe,UAApB,QAAOC,EAAP,CACI,SAACK,CAAD,QACEL,EAAQ,CAAC,CAACF,CAAF,CAAW,CAAEO,CAAC,CAADA,CAAF,CAAKP,OAAO,CAAE,CAACA,CAAf,CAAX,CADV,CADJ,OAHG,CAOLK,EAAE,CAAE,QAPC,CAQLC,UAAU,GARL,CAjBX,CA2BO,QA3BP,GACQP,CADR,CA4BW,CACLK,IAAI,CAAE,QADD,CAELD,QAAQ,CAARA,CAFK,CAGLE,EAAE,CAAE,MAHC,CA5BX,CAiCO,MAjCP,GACQN,CADR,CAkCW,CACLK,IAAI,CAAE,QADD,CAELC,EAAE,CAAE,MAFC,CAlCX,OAuCD,CAED,MAAO,IAAMG,eAAc,CAAG,KAAvB,CAEP,GAAMC,UAAoB,CAAG,SAACC,CAAD,CAAQC,CAAR,CAAgB,IACrCC,EAAM,CAAGpB,MAAM,CAAiB,IAAjB,CADsB,GASvCE,eAAe,CAACc,cAAD,CAAiBE,CAAjB,CAAwBE,CAAxB,CATwB,KAGzCb,IAHyC,CAGzCA,CAHyC,YAGlCF,kBAHkC,GAIzCK,CAJyC,GAIzCA,QAJyC,CAKzCF,CALyC,GAKzCA,OALyC,CAMzCG,CANyC,GAMzCA,QANyC,CAOzCF,CAPyC,GAOzCA,OAPyC,CAQtCY,CARsC,uCAUrCC,CAAM,CAAGhB,SAAS,CAACC,CAAD,CAAOC,CAAP,CAAgBC,CAAhB,CAAyBC,CAAzB,CAAmCC,CAAnC,CAVmB,CAY3C,MACE,qBAAC,OAAD,kBAAaU,CAAb,CAA6BC,CAA7B,EAAqC,GAAG,CAAErB,UAAU,CAAC,CAACkB,CAAD,CAAMC,CAAN,CAAD,CAApD,GAEH,CAfD,CAiBA,MAAO,IAAMG,IAAG,CAAGxB,UAAU,CAACkB,SAAD,CAAtB"}