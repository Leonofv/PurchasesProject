import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["size","items","value","onChange","getItemKey","getItemLabel","getItemIcon","direction","possibleDirections","style","view"];import{IconCheck}from"@consta/icons/IconCheck";import React,{forwardRef,useRef}from"react";import{Button}from"../Button";import{ContextMenu}from"../ContextMenu";import{usePropsHandler}from"../EventInterceptor/usePropsHandler";import{useChoiceGroup}from"../../hooks/useChoiceGroup";import{useFlag}from"../../hooks/useFlag";import{useForkRef}from"../../hooks/useForkRef";import{contextMenuSizeMap,iconSizeMap,withDefaultGetters}from"./helpers";import{themeTogglerPropSizeDefault}from"./types";export var COMPONENT_NAME="ThemeToggler";var ThemeTogglerRender=function(a,b){var c=useRef(null),d=useForkRef([c,b]),e=usePropsHandler(COMPONENT_NAME,withDefaultGetters(a),d),f=e.size,g=void 0===f?themeTogglerPropSizeDefault:f,h=e.items,i=e.value,j=e.onChange,k=e.getItemKey,l=e.getItemLabel,m=e.getItemIcon,n=e.direction,o=e.possibleDirections,p=e.style,q=e.view,r=void 0===q?"clear":q,s=_objectWithoutProperties(e,_excluded),t=useFlag(!1),u=_slicedToArray(t,2),v=u[0],w=u[1],x=useChoiceGroup({value:i,getKey:k||l,callBack:j,multiple:!1}),y=x.getOnChange,z=x.getChecked,A=iconSizeMap[g],B=contextMenuSizeMap[g];return 1>=h.length?null:React.createElement(React.Fragment,null,React.createElement(Button,Object.assign({},s,{ref:d,iconLeft:function getButtonIcon(){var a;return m(null!==(a=h.find(function(a){return z(a)}))&&void 0!==a?a:h[0])}(),onClick:function onButtonClick(a){2<h.length?w.toggle():y(h[z(h[0])?1:0])(a)},onlyIcon:!0,type:"button",size:g,view:r,style:p})),2<h.length&&React.createElement(ContextMenu,{isOpen:v,offset:"s",items:h,getItemLabel:l,getItemKey:k||l,anchorRef:c,direction:n,possibleDirections:o,getItemLeftSide:function renderIcons(a){var b=m(a);if(b)return React.createElement(b,{size:A})},getItemRightSide:function renderChecks(a){if(z(a))return React.createElement(IconCheck,{size:A})},onClickOutside:w.off,onItemClick:function onItemClick(a,b){var c=b.e;return y(a)(c)},size:B,style:"number"==typeof(null===p||void 0===p?void 0:p.zIndex)?{zIndex:p.zIndex+1}:void 0}))};export var ThemeToggler=forwardRef(ThemeTogglerRender);export*from"./types";
//# sourceMappingURL=ThemeToggler.js.map