import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _defineProperty from"@babel/runtime/helpers/defineProperty";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";var _excluded=["tooltipProps"],_excluded2=["mode","tooltipContent","content","closeOnClickOutside","appearTimeout","exitTimeout"];function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}import React,{useCallback,useRef}from"react";import{Tooltip}from"../../components/Tooltip";import{useDebounce}from"../../hooks/useDebounce";import{useFlag}from"../../hooks/useFlag";import{useForkRef}from"../../hooks/useForkRef";import{useMutableRef}from"../../hooks/useMutableRef";export var withTooltipPropMode=["mouseover","click"];export var withTooltipPropModeDefault=withTooltipPropMode[0];export var appearTimeoutDefault=400;export var exitTimeoutDefault=200;export function withTooltip(a){return function(b){return React.forwardRef(function(c,d){var e=c.tooltipProps,f=void 0===e?{}:e,g=_objectWithoutProperties(c,_excluded),h=_objectSpread(_objectSpread({},a),f),i=h.mode,j=void 0===i?"mouseover":i,k=h.tooltipContent,l=h.content,m=h.closeOnClickOutside,n=!(void 0!==m)||m,o=h.appearTimeout,p=void 0===o?appearTimeoutDefault:o,q=h.exitTimeout,r=void 0===q?exitTimeoutDefault:q,s=_objectWithoutProperties(h,_excluded2),t=null!==k&&void 0!==k?k:l,u=useFlag(),v=_slicedToArray(u,2),w=v[0],x=v[1],y=useRef(null),z=useRef({tooltip:!1,acnor:!1}),A=useMutableRef([g.onMouseEnter,g.onMouseLeave,s.onMouseEnter,s.onMouseLeave,g.onClick,j,n]),B=useDebounce(useCallback(function(){"mouseover"===A.current[5]&&(z.current.acnor||z.current.tooltip)&&x.on()},[]),p),C=useDebounce(useCallback(function(){"mouseover"!==A.current[5]||z.current.acnor||z.current.tooltip||x.off()},[]),r),D=useCallback(function(a){var b,c;z.current.acnor=!0,B(),null===(b=(c=A.current)[0])||void 0===b?void 0:b.call(c,a)},[]),E=useCallback(function(a){var b,c;z.current.acnor=!1,C(),null===(b=(c=A.current)[1])||void 0===b?void 0:b.call(c,a)},[]),F=useCallback(function(a){var b,c;z.current.tooltip=!0,B(),null===(b=(c=A.current)[2])||void 0===b?void 0:b.call(c,a)},[]),G=useCallback(function(a){var b,c;z.current.tooltip=!1,C(),null===(b=(c=A.current)[3])||void 0===b?void 0:b.call(c,a)},[]),H=useCallback(function(){"click"===A.current[5]&&A.current[6]&&x.off()},[j,n]),I=useCallback(function(a){var b,c;"click"===A.current[5]&&x.toggle(),null===(b=(c=A.current)[4])||void 0===b?void 0:b.call(c,a)},[]);return React.createElement(React.Fragment,null,React.createElement(b,Object.assign({},g,{onClick:I,onMouseEnter:D,onMouseLeave:E,ref:useForkRef([y,d])})),React.createElement(Tooltip,Object.assign({},s,{isOpen:w&&!!t,className:s.className,anchorRef:y,onClickOutside:H,onMouseEnter:F,onMouseLeave:G}),t))})}}
//# sourceMappingURL=withTooltip.js.map