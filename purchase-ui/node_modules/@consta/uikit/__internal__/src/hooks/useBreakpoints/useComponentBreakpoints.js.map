{"version":3,"file":"useComponentBreakpoints.js","names":["useCallback","useEffect","useState","useMutableRef","isEq","mapping","useComponentBreakpoints","ref","map","isActive","mapRef","mappingRun","current","getBoundingClientRect","width","points","setSetPoints","resizeObserver","ResizeObserver","newPoints","state","observe","disconnect"],"sources":["../../../../../src/hooks/useBreakpoints/useComponentBreakpoints.ts"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react';\n\nimport { useMutableRef } from '##/hooks/useMutableRef';\nimport { isEq } from '##/utils/object/isEq';\n\nimport { mapping } from './mapping';\nimport { Map, Returned } from './types';\n\nexport const useComponentBreakpoints = <POINTS extends string>({\n  ref,\n  map,\n  isActive,\n}: {\n  ref?: React.RefObject<HTMLElement | SVGGraphicsElement>;\n  map: Map<POINTS>;\n  isActive?: boolean;\n}) => {\n  const mapRef = useMutableRef(map);\n  const mappingRun = useCallback(\n    () =>\n      mapping(ref?.current?.getBoundingClientRect().width || 0, mapRef.current),\n    [],\n  );\n  const [points, setSetPoints] = useState<Returned<POINTS>>(mappingRun);\n\n  useEffect(() => {\n    mappingRun();\n\n    const resizeObserver = new ResizeObserver(() => {\n      const newPoints = mappingRun();\n      setSetPoints((state) => (isEq(state, newPoints) ? state : newPoints));\n    });\n\n    isActive && ref?.current && resizeObserver.observe(ref.current);\n\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, [ref?.current, isActive]);\n\n  return points;\n};\n"],"mappings":"iEAAA,OAASA,WAAT,CAAsBC,SAAtB,CAAiCC,QAAjC,KAAiD,OAAjD,CAEA,OAASC,aAAT,wBACA,OAASC,IAAT,+BAEA,OAASC,OAAT,iBAGA,MAAO,IAAMC,wBAAuB,CAAG,WAQjC,IAPJC,EAOI,GAPJA,GAOI,CANJC,CAMI,GANJA,GAMI,CALJC,CAKI,GALJA,QAKI,CACEC,CAAM,CAAGP,aAAa,CAACK,CAAD,CADxB,CAEEG,CAAU,CAAGX,WAAW,CAC5B,uBACEK,QAAO,CAAC,QAAAE,CAAG,WAAHA,CAAA,YAAAA,CAAG,CAAEK,OAAL,uBAAcC,qBAAd,GAAsCC,KAAtC,GAA+C,CAAhD,CAAmDJ,CAAM,CAACE,OAA1D,CADT,CAD4B,CAG5B,EAH4B,CAF1B,GAO2BV,QAAQ,CAAmBS,CAAnB,CAPnC,uBAOGI,CAPH,MAOWC,CAPX,MAwBJ,MAfAf,UAAS,CAAC,UAAM,CACdU,CAAU,EADI,CAGd,GAAMM,EAAc,CAAG,GAAIC,eAAJ,CAAmB,UAAM,CAC9C,GAAMC,EAAS,CAAGR,CAAU,EAA5B,CACAK,CAAY,CAAC,SAACI,CAAD,QAAYhB,KAAI,CAACgB,CAAD,CAAQD,CAAR,CAAJ,CAAyBC,CAAzB,CAAiCD,CAA7C,CAAD,CACb,CAHsB,CAAvB,CAOA,MAFAV,EAAQ,UAAIF,CAAJ,WAAIA,CAAJ,QAAIA,CAAG,CAAEK,OAAT,CAAR,EAA4BK,CAAc,CAACI,OAAf,CAAuBd,CAAG,CAACK,OAA3B,CAE5B,CAAO,UAAM,CACXK,CAAc,CAACK,UAAf,EACD,CACF,CAbQ,CAaN,QAACf,CAAD,WAACA,CAAD,QAACA,CAAG,CAAEK,OAAN,CAAeH,CAAf,CAbM,CAeT,CAAOM,CACR,CAjCM"}