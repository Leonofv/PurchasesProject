{"version":3,"file":"useClickOutside.js","names":["useEffect","useMutableRef","useClickOutside","isActive","ignoreClicksInsideRefs","handler","handlerRef","ignoreClicksInsideRefsRef","isActiveRef","handleClick","event","current","target","shouldCallHandler","every","ref","contains","document","addEventListener","removeEventListener"],"sources":["../../../../../src/hooks/useClickOutside/useClickOutside.tsx"],"sourcesContent":["import { RefObject, useEffect } from 'react';\n\nimport { useMutableRef } from '../useMutableRef/useMutableRef';\n\nexport type ClickOutsideHandler = (event: MouseEvent) => void;\n\ntype UseClickOutsideProps = {\n  isActive?: boolean;\n  ignoreClicksInsideRefs?: ReadonlyArray<RefObject<HTMLElement>>;\n  handler?: ClickOutsideHandler;\n};\n\nexport function useClickOutside({\n  isActive,\n  ignoreClicksInsideRefs,\n  handler,\n}: UseClickOutsideProps): void {\n  // Аргументы вынесены в рефки за тем, чтобы не пересоздавать подписку `mousedown` при кажом чихе.\n  // Бывают кейсы когда на странице несколко `useClickOutside` и один вызывает рендер,\n  // А второй не успевает отрабатывать а просто пересоздается\n  // С такой реализацией пересоздание только при удалении из дома, а аргументы всегда актуалны.\n\n  const handlerRef = useMutableRef(handler);\n  const ignoreClicksInsideRefsRef = useMutableRef(ignoreClicksInsideRefs);\n  const isActiveRef = useMutableRef(isActive);\n\n  useEffect(() => {\n    const handleClick = (event: MouseEvent) => {\n      if (!isActiveRef.current) {\n        return;\n      }\n\n      const target = event.target as Node;\n\n      const shouldCallHandler = ignoreClicksInsideRefsRef.current?.every(\n        (ref) => !ref.current?.contains(target),\n      );\n\n      shouldCallHandler && handlerRef.current?.(event);\n    };\n\n    document.addEventListener('mousedown', handleClick);\n\n    return () => {\n      document.removeEventListener('mousedown', handleClick);\n    };\n  }, []);\n}\n"],"mappings":"AAAA,OAAoBA,SAApB,KAAqC,OAArC,CAEA,OAASC,aAAT,sCAUA,MAAO,SAASC,gBAAT,GAIwB,IAH7BC,EAG6B,GAH7BA,QAG6B,CAF7BC,CAE6B,GAF7BA,sBAE6B,CAD7BC,CAC6B,GAD7BA,OAC6B,CAMvBC,CAAU,CAAGL,aAAa,CAACI,CAAD,CANH,CAOvBE,CAAyB,CAAGN,aAAa,CAACG,CAAD,CAPlB,CAQvBI,CAAW,CAAGP,aAAa,CAACE,CAAD,CARJ,CAU7BH,SAAS,CAAC,UAAM,CACd,GAAMS,EAAW,CAAG,SAACC,CAAD,CAAuB,SACzC,GAAKF,CAAW,CAACG,OAAjB,KAIMC,EAAM,CAAGF,CAAK,CAACE,MAJrB,CAMMC,CAAiB,WAAGN,CAAyB,CAACI,OAA7B,qBAAG,EAAmCG,KAAnC,CACxB,SAACC,CAAD,cAAS,YAACA,CAAG,CAACJ,OAAL,eAAC,EAAaK,QAAb,CAAsBJ,CAAtB,CAAD,CAAT,CADwB,CAN1B,CAUAC,CAAiB,aAAIP,CAAU,CAACK,OAAf,qBAAI,OAAAL,CAAU,CAAWI,CAAX,CAAd,CAVjB,CAWD,CAZD,CAgBA,MAFAO,SAAQ,CAACC,gBAAT,CAA0B,WAA1B,CAAuCT,CAAvC,CAEA,CAAO,UAAM,CACXQ,QAAQ,CAACE,mBAAT,CAA6B,WAA7B,CAA0CV,CAA1C,CACD,CACF,CApBQ,CAoBN,EApBM,CAqBV"}