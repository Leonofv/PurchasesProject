{"version":3,"file":"useMouseLeave.js","names":["useEffect","useRef","useDebounce","useMutableRef","useMouseLeave","isActive","refs","handler","debounce","refsRef","isActiveRef","hoveredRef","handleLeaveDebounce","event","current","target","shouldCallHandler","find","ref","hoveredRefSetTrue","hoveredRefSetFalse","handleLeave","forEach","addEventListener","removeEventListener"],"sources":["../../../../../src/hooks/useMouseLeave/useMouseLeave.tsx"],"sourcesContent":["import { RefObject, useEffect, useRef } from 'react';\n\nimport { useDebounce } from '../useDebounce';\nimport { useMutableRef } from '../useMutableRef';\n\ntype Props = {\n  isActive?: boolean;\n  refs: ReadonlyArray<RefObject<HTMLElement>>;\n  handler: (event: FocusEvent) => void;\n  debounce?: number;\n};\n\nexport function useMouseLeave({\n  isActive = false,\n  refs,\n  handler,\n  debounce = 0,\n}: Props): void {\n  const refsRef = useMutableRef(refs);\n  const isActiveRef = useMutableRef(isActive);\n  const hoveredRef = useRef(false);\n\n  const handleLeaveDebounce = useDebounce((event: FocusEvent) => {\n    if (!isActiveRef.current || hoveredRef.current) {\n      return;\n    }\n\n    const target = event.target as Node;\n\n    const shouldCallHandler = !!refsRef.current?.find((ref) => {\n      return ref.current !== target;\n    });\n\n    shouldCallHandler && handler(event);\n  }, debounce);\n\n  useEffect(() => {\n    const hoveredRefSetTrue = () => {\n      hoveredRef.current = true;\n    };\n\n    const hoveredRefSetFalse = () => {\n      hoveredRef.current = false;\n    };\n\n    const handleLeave = (event: FocusEvent) => {\n      hoveredRefSetFalse();\n      handleLeaveDebounce(event);\n    };\n\n    refsRef.current.forEach((ref) => {\n      ref.current?.addEventListener('mouseleave', handleLeave);\n      ref.current?.addEventListener('mousemove', hoveredRefSetTrue);\n    });\n\n    return () => {\n      refsRef.current.forEach((ref) => {\n        ref.current?.removeEventListener('mouseleave', handleLeave);\n        ref.current?.removeEventListener('mousemove', hoveredRefSetTrue);\n      });\n    };\n  }, [refs]);\n}\n"],"mappings":"AAAA,OAAoBA,SAApB,CAA+BC,MAA/B,KAA6C,OAA7C,CAEA,OAASC,WAAT,sBACA,OAASC,aAAT,wBASA,MAAO,SAASC,cAAT,GAKS,SAJdC,QAIc,CAHdC,CAGc,GAHdA,IAGc,CAFdC,CAEc,GAFdA,OAEc,KADdC,QACc,CADdA,CACc,YADH,CACG,GACRC,CAAO,CAAGN,aAAa,CAACG,CAAD,CADf,CAERI,CAAW,CAAGP,aAAa,eAFnB,CAGRQ,CAAU,CAAGV,MAAM,IAHX,CAKRW,CAAmB,CAAGV,WAAW,CAAC,SAACW,CAAD,CAAuB,OAC7D,GAAKH,CAAW,CAACI,OAAb,GAAwBH,CAAU,CAACG,OAAvC,KAIMC,EAAM,CAAGF,CAAK,CAACE,MAJrB,CAMMC,CAAiB,CAAG,CAAC,YAACP,CAAO,CAACK,OAAT,eAAC,EAAiBG,IAAjB,CAAsB,SAACC,CAAD,CAAS,CACzD,MAAOA,EAAG,CAACJ,OAAJ,GAAgBC,CACxB,CAF2B,CAAD,CAN3B,CAUAC,CAAiB,EAAIT,CAAO,CAACM,CAAD,CAV5B,CAWD,CAZsC,CAYpCL,CAZoC,CALzB,CAmBdR,SAAS,CAAC,UAAM,IACRmB,EAAiB,CAAG,UAAM,CAC9BR,CAAU,CAACG,OAAX,GACD,CAHa,CAKRM,CAAkB,CAAG,UAAM,CAC/BT,CAAU,CAACG,OAAX,GACD,CAPa,CASRO,CAAW,CAAG,SAACR,CAAD,CAAuB,CACzCO,CAAkB,EADuB,CAEzCR,CAAmB,CAACC,CAAD,CACpB,CAZa,CAmBd,MALAJ,EAAO,CAACK,OAAR,CAAgBQ,OAAhB,CAAwB,SAACJ,CAAD,CAAS,mBAC/BA,CAAG,CAACJ,OAD2B,qBAC/B,EAAaS,gBAAb,CAA8B,YAA9B,CAA4CF,CAA5C,CAD+B,WAE/BH,CAAG,CAACJ,OAF2B,qBAE/B,EAAaS,gBAAb,CAA8B,WAA9B,CAA2CJ,CAA3C,CACD,CAHD,CAKA,CAAO,UAAM,CACXV,CAAO,CAACK,OAAR,CAAgBQ,OAAhB,CAAwB,SAACJ,CAAD,CAAS,mBAC/BA,CAAG,CAACJ,OAD2B,qBAC/B,EAAaU,mBAAb,CAAiC,YAAjC,CAA+CH,CAA/C,CAD+B,WAE/BH,CAAG,CAACJ,OAF2B,qBAE/B,EAAaU,mBAAb,CAAiC,WAAjC,CAA8CL,CAA9C,CACD,CAHD,CAID,CACF,CAzBQ,CAyBN,CAACb,CAAD,CAzBM,CA0BV"}