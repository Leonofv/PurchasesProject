{"version":3,"file":"helpers.js","names":["trackPosition","getRefsSizes","refs","direction","map","el","ref","Object","prototype","hasOwnProperty","call","current","getBoundingClientRect","width","height","getTargetBlockPosition","sizes","index","slice","reduce","val","a","getNonCalcualtedSize","filter","_el","i","getBlockMaxSizes","blocks","minWidth","minHeight","maxWidth","maxHeight","getValidValues","params","value","containerHeight","containerWidth","blocksSizes","next","results","right","min","max","getCalcaulatedSizes","event","container","position","left","top","size","x","y","first","second"],"sources":["../../../../../src/hooks/useResizableContent/helpers.ts"],"sourcesContent":["import React from 'react';\n\nimport { trackPosition } from '##/components/Slider/useSlider/helper';\n\nimport {\n  UseResizableContentPropDirection,\n  UseResizableContentRef,\n  UseResizableContentSize,\n} from './types';\n\nexport const getRefsSizes = (\n  refs: Array<UseResizableContentRef | React.RefObject<HTMLElement>>,\n  direction: UseResizableContentPropDirection,\n): UseResizableContentSize[] =>\n  refs.map((el) => {\n    const ref = Object.prototype.hasOwnProperty.call(el, 'current')\n      ? (el as React.RefObject<HTMLElement>)\n      : (el as UseResizableContentRef).ref;\n    if (ref.current) {\n      const { width, height } = ref.current.getBoundingClientRect();\n      return {\n        width: direction === 'horizontal' ? width : undefined,\n        height: direction === 'horizontal' ? undefined : height,\n      };\n    }\n    return {\n      width: undefined,\n      height: undefined,\n    };\n  });\n\nconst getTargetBlockPosition = (\n  sizes: UseResizableContentSize[],\n  direction: UseResizableContentPropDirection,\n  index: number,\n) =>\n  sizes\n    .slice(0, index)\n    .map((el) => (direction === 'horizontal' ? el.width : el.height) ?? 0)\n    .reduce((val, a) => (val ?? 0) + (a ?? 0), 0);\n\nconst getNonCalcualtedSize = (\n  sizes: UseResizableContentSize[],\n  direction: UseResizableContentPropDirection,\n  index: number,\n) =>\n  sizes\n    .filter((_el, i) => !(index === i || index + 1 === i))\n    .map((el) => (direction === 'horizontal' ? el.width : el.height) ?? 0)\n    .reduce((val, a) => (val ?? 0) + (a ?? 0), 0);\n\nconst getBlockMaxSizes = (\n  blocks: Array<UseResizableContentRef | React.RefObject<HTMLElement>>,\n  direction: UseResizableContentPropDirection,\n  index: number,\n) => {\n  if (!Object.prototype.hasOwnProperty.call(blocks[index], 'current')) {\n    const el = blocks[index] as UseResizableContentRef;\n    return [\n      direction === 'horizontal' ? el.minWidth : el.minHeight,\n      direction === 'horizontal' ? el.maxWidth : el.maxHeight,\n    ];\n  }\n  return [undefined, undefined];\n};\n\nconst getValidValues = (params: {\n  value: number;\n  index: number;\n  direction: UseResizableContentPropDirection;\n  blocks: Array<UseResizableContentRef | React.RefObject<HTMLElement>>;\n  containerWidth: number;\n  containerHeight: number;\n  sizes: UseResizableContentSize[];\n}) => {\n  const {\n    value,\n    index,\n    direction,\n    blocks,\n    sizes,\n    containerHeight,\n    containerWidth,\n  } = params;\n  const blocksSizes =\n    (direction === 'horizontal' ? containerWidth : containerHeight) -\n    getNonCalcualtedSize(sizes, direction, index);\n  const current = getBlockMaxSizes(blocks, direction, index);\n  const next = getBlockMaxSizes(blocks, direction, index + 1);\n  let results = [value, blocksSizes - value];\n  const right = blocksSizes - value;\n  if (value < 0 || (current[0] && value < current[0])) {\n    const min = current[0] ?? 0;\n    results = [min, blocksSizes - min];\n  }\n  if (value > blocksSizes || (current[1] && value > current[1])) {\n    const max = current[1] ?? blocksSizes;\n    results = [max, blocksSizes - max];\n  }\n  if (next[0] && right < next[0]) {\n    const min = next[0] ?? 0;\n    results = [blocksSizes - min, min];\n  }\n  if (next[1] && right > next[1]) {\n    const max = next[1] ?? blocksSizes;\n    results = [blocksSizes - max, max];\n  }\n  return results;\n};\n\nexport const getCalcaulatedSizes = (params: {\n  event: MouseEvent | TouchEvent | Event;\n  index: number;\n  direction: UseResizableContentPropDirection;\n  blocks: Array<UseResizableContentRef | React.RefObject<HTMLElement>>;\n  container: React.RefObject<HTMLElement>;\n  sizes: UseResizableContentSize[];\n}) => {\n  const { event, index, sizes, container, direction, blocks } = params;\n  const nativeEvent = event as MouseEvent | TouchEvent;\n  const position = trackPosition(nativeEvent);\n  if (position) {\n    const { left, top, width, height } =\n      container.current?.getBoundingClientRect() ?? {\n        left: 0,\n        top: 0,\n      };\n    const trackPosition = getTargetBlockPosition(sizes, direction, index);\n    const size =\n      direction === 'horizontal'\n        ? position.x - left - trackPosition\n        : position.y - top - trackPosition;\n    const [first, second] = getValidValues({\n      value: size,\n      index,\n      containerHeight: height ?? 0,\n      containerWidth: width ?? 0,\n      sizes,\n      blocks,\n      direction,\n    });\n    return [\n      {\n        width: direction === 'horizontal' ? first : sizes[index].width,\n        height: direction === 'horizontal' ? sizes[index].height : first,\n      },\n      {\n        width: direction === 'horizontal' ? second : sizes[index + 1].width,\n        height: direction === 'horizontal' ? sizes[index + 1].height : second,\n      },\n    ];\n  }\n  return [sizes[index], sizes[index + 1]];\n};\n"],"mappings":"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"}