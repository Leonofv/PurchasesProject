{"version":3,"file":"useResizableContent.js","names":["useCallback","useEffect","useMemo","useRef","useState","getCalcaulatedSizes","getRefsSizes","useResizableContent","props","blocks","direction","container","isActive","activeIndex","sizes","setSizes","controlListeners","type","method","document","handleRelease","handleTouchMove","event","index","current","copy","copySizes","left","right","handlePress","handlers","Array","from","length","map","_el","onMouseDown","onTouchStart"],"sources":["../../../../../src/hooks/useResizableContent/useResizableContent.ts"],"sourcesContent":["import React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\n\nimport { getCalcaulatedSizes, getRefsSizes } from './helpers';\nimport { UseResizableContent, UseResizableContentSize } from './types';\n\nexport const useResizableContent: UseResizableContent = (props) => {\n  const { blocks, direction = 'horizontal', container, isActive } = props;\n\n  const activeIndex: React.MutableRefObject<number | null> = useRef(null);\n\n  const [sizes, setSizes] = useState<UseResizableContentSize[]>(\n    getRefsSizes(blocks, direction),\n  );\n\n  const controlListeners = useCallback((type: 'add' | 'remove') => {\n    const method = type === 'add' ? 'addEventListener' : 'removeEventListener';\n    document[method]('mouseup', handleRelease);\n    document[method]('touchend', handleRelease);\n    document[method]('mousemove', handleTouchMove);\n    document[method]('touchmove', handleTouchMove);\n  }, []);\n\n  const handleTouchMove = useCallback(\n    (event: MouseEvent | TouchEvent | Event) => {\n      const index = activeIndex.current;\n      if (typeof index === 'number') {\n        setSizes((copy) => {\n          const copySizes = [...copy];\n          const [left, right] = getCalcaulatedSizes({\n            event,\n            index,\n            direction,\n            blocks,\n            container,\n            sizes: copySizes,\n          });\n          copySizes[index] = left;\n          copySizes[index + 1] = right;\n          return copySizes;\n        });\n      }\n    },\n    [container, direction, blocks],\n  );\n\n  const handleRelease = useCallback(() => {\n    controlListeners('remove');\n    activeIndex.current = null;\n  }, []);\n\n  const handlePress = useCallback((index: number) => {\n    activeIndex.current = index;\n    controlListeners('add');\n  }, []);\n\n  const handlers = useMemo(\n    () =>\n      Array.from({ length: blocks.length - 1 }).map((_el, index) => ({\n        onMouseDown: () => (isActive ? handlePress(index) : undefined),\n        onTouchStart: () => (isActive ? handlePress(index) : undefined),\n      })),\n    [blocks, direction, container, isActive],\n  );\n\n  useEffect(() => {\n    if (isActive) {\n      setSizes(getRefsSizes(blocks, direction));\n    }\n  }, [blocks, direction, isActive]);\n\n  useEffect(() => {\n    !isActive && handleRelease();\n  }, [isActive]);\n\n  return {\n    handlers,\n    sizes,\n  };\n};\n"],"mappings":"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"}