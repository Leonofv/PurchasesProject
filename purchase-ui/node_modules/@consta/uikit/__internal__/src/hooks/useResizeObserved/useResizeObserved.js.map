{"version":3,"file":"useResizeObserved.js","names":["React","useLayoutEffect","useResizeObserved","refs","mapper","useState","map","ref","current","dimensions","setDimensions","mapperRef","useRef","resizeObserver","ResizeObserver","observe","disconnect"],"sources":["../../../../../src/hooks/useResizeObserved/useResizeObserved.ts"],"sourcesContent":["import React, { RefObject, useLayoutEffect } from 'react';\n\nexport const useResizeObserved = <\n  ELEMENT extends HTMLElement | SVGGraphicsElement,\n  RETURN_TYPE,\n>(\n  refs: Array<RefObject<ELEMENT>>,\n  mapper: (el: ELEMENT | null) => RETURN_TYPE,\n): RETURN_TYPE[] => {\n  const [dimensions, setDimensions] = React.useState<RETURN_TYPE[]>(() =>\n    refs.map((ref) => mapper(ref.current)),\n  );\n\n  // Храним маппер в рефке, чтобы если его передадут инлайн-функцией, это не вызвало бесконечные перерендеры\n  const mapperRef = React.useRef(mapper);\n  useLayoutEffect(() => {\n    mapperRef.current = mapper;\n  }, [mapper]);\n\n  useLayoutEffect(() => {\n    const resizeObserver = new ResizeObserver(() => {\n      setDimensions(refs.map((ref) => mapperRef.current(ref.current)));\n    });\n\n    for (const ref of refs) {\n      ref.current && resizeObserver.observe(ref.current);\n    }\n\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, [refs]);\n\n  return dimensions;\n};\n"],"mappings":"stCAAA,MAAOA,MAAP,EAA2BC,eAA3B,KAAkD,OAAlD,CAEA,MAAO,IAAMC,kBAAiB,CAAG,SAI/BC,CAJ+B,CAK/BC,CAL+B,CAMb,OACkBJ,KAAK,CAACK,QAAN,CAA8B,iBAChEF,EAAI,CAACG,GAAL,CAAS,SAACC,CAAD,QAASH,EAAM,CAACG,CAAG,CAACC,OAAL,CAAf,CAAT,CADgE,CAA9B,CADlB,uBACXC,CADW,MACCC,CADD,MAMZC,CAAS,CAAGX,KAAK,CAACY,MAAN,CAAaR,CAAb,CANA,CAyBlB,MAlBAH,gBAAe,CAAC,UAAM,CACpBU,CAAS,CAACH,OAAV,CAAoBJ,CACrB,CAFc,CAEZ,CAACA,CAAD,CAFY,CAkBf,CAdAH,eAAe,CAAC,UAAM,OACdY,CAAc,CAAG,GAAIC,eAAJ,CAAmB,UAAM,CAC9CJ,CAAa,CAACP,CAAI,CAACG,GAAL,CAAS,SAACC,CAAD,QAASI,EAAS,CAACH,OAAV,CAAkBD,CAAG,CAACC,OAAtB,CAAT,CAAT,CAAD,CACd,CAFsB,CADH,8BAKFL,CALE,MAKpB,2BAAwB,IAAbI,EAAa,SACtBA,CAAG,CAACC,OAAJ,EAAeK,CAAc,CAACE,OAAf,CAAuBR,CAAG,CAACC,OAA3B,CAChB,CAPmB,+BASpB,MAAO,WAAM,CACXK,CAAc,CAACG,UAAf,EACD,CACF,CAZc,CAYZ,CAACb,CAAD,CAZY,CAcf,CAAOM,CACR,CAhCM"}