{"version":3,"file":"useStyleProps.js","names":["useEffect","useRef","useState","generateDeps","useTheme","isEq","getStyleProps","varIsArray","isEqState","state","newState","getCssVarsHash","vars","join","useStyleProps","props","theme","ref","value","setValue","current"],"sources":["../../../../../src/hooks/useStyleProps/useStyleProps.ts"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\n\nimport { generateDeps, useTheme } from '##/components/Theme';\nimport { isEq } from '##/utils/object';\n\nimport { getStyleProps } from './getStyleProps';\nimport { varIsArray } from './helpers';\nimport { Value } from './types';\n\nconst isEqState = <K extends string, V extends unknown>(\n  state: Record<K, V> | string,\n  newState: Record<K, V> | string,\n) => {\n  if (typeof state === 'string' || typeof newState === 'string') {\n    return state === newState;\n  }\n  return isEq(state, newState);\n};\n\nconst getCssVarsHash = (\n  vars: string | string[] | readonly string[],\n): string => {\n  if (varIsArray(vars)) {\n    vars.join();\n  } else {\n    return vars;\n  }\n  return '';\n};\n\nexport const useStyleProps = <\n  Element extends HTMLElement | SVGElement = HTMLDivElement,\n  StyleProps extends string | string[] | readonly string[] = string,\n>(\n  props: StyleProps,\n): [React.RefObject<Element>, Value<StyleProps>] => {\n  const { theme } = useTheme();\n  const ref = useRef<Element>(null);\n  const [value, setValue] = useState<Value<StyleProps>>(\n    varIsArray(props) ? ({} as Value<StyleProps>) : ('' as Value<StyleProps>),\n  );\n\n  useEffect(() => {\n    setValue((state) => {\n      const newState = ref.current\n        ? getStyleProps(ref.current, props)\n        : undefined;\n\n      if (typeof newState !== 'undefined' && !isEqState(value, newState)) {\n        return newState;\n      }\n\n      return state;\n    });\n  }, [generateDeps(theme), ref.current, getCssVarsHash(props)]);\n\n  return [ref, value];\n};\n"],"mappings":"iEAAA,OAASA,SAAT,CAAoBC,MAApB,CAA4BC,QAA5B,KAA4C,OAA5C,CAEA,OAASC,YAAT,CAAuBC,QAAvB,8BACA,OAASC,IAAT,0BAEA,OAASC,aAAT,uBACA,OAASC,UAAT,iB,GAGMC,UAAS,CAAG,SAChBC,CADgB,CAEhBC,CAFgB,CAGb,OACkB,QAAjB,QAAOD,EAAP,EAAiD,QAApB,QAAOC,EADrC,CAEMD,CAAK,GAAKC,CAFhB,CAIIL,IAAI,CAACI,CAAD,CAAQC,CAAR,CACZ,C,CAEKC,cAAc,CAAG,SACrBC,CADqB,CAEV,CACX,GAAIL,UAAU,CAACK,CAAD,CAAd,CACEA,CAAI,CAACC,IAAL,EADF,KAGE,OAAOD,EAAP,CAEF,MAAO,EACR,C,CAED,MAAO,IAAME,cAAa,CAAG,SAI3BC,CAJ2B,CAKuB,OAChCX,QAAQ,EADwB,CAC1CY,CAD0C,GAC1CA,KAD0C,CAE5CC,CAAG,CAAGhB,MAAM,CAAU,IAAV,CAFgC,GAGxBC,QAAQ,CAChCK,UAAU,CAACQ,CAAD,CAAV,CAAqB,EAArB,CAAiD,EADjB,CAHgB,uBAG3CG,CAH2C,MAGpCC,CAHoC,MAqBlD,MAdAnB,UAAS,CAAC,UAAM,CACdmB,CAAQ,CAAC,SAACV,CAAD,CAAW,CAClB,GAAMC,EAAQ,CAAGO,CAAG,CAACG,OAAJ,CACbd,aAAa,CAACW,CAAG,CAACG,OAAL,CAAcL,CAAd,CADA,OAAjB,CADkB,MAKM,WAApB,QAAOL,EAAP,EAAoCF,SAAS,CAACU,CAAD,CAAQR,CAAR,CAL/B,CASXD,CATW,CAMTC,CAIV,CAVO,CAWT,CAZQ,CAYN,CAACP,YAAY,CAACa,CAAD,CAAb,CAAsBC,CAAG,CAACG,OAA1B,CAAmCT,cAAc,CAACI,CAAD,CAAjD,CAZM,CAcT,CAAO,CAACE,CAAD,CAAMC,CAAN,CACR,CA3BM"}