import _toConsumableArray from"@babel/runtime/helpers/toConsumableArray";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import{useEffect,useMemo,useRef,useState}from"react";import{useMutableRef}from"../useMutableRef";import{useRefs}from"../useRefs";import{useResizeObserved}from"../useResizeObserved";import{arraysIsEq,calculateBounds,calculateSavedSizes,defaultItemsCalculationCount,getElementHeight,useCalculateVisiblePosition,useScroll}from"./hellpers";export var useVirtualScroll=function(a){var b=a.length,c=a.onScrollToBottom,d=a.isActive,e=void 0!==d&&d,f=useState([0,0]),g=_slicedToArray(f,2),h=g[0],i=g[1],j=useState([[0,0],[0,e?defaultItemsCalculationCount:b]]),k=_slicedToArray(j,2),l=k[0],m=k[1],n=useRefs(b,h),o=useRef(null),p=useResizeObserved(n,getElementHeight),q=useRef(calculateSavedSizes([],p)),r=useMutableRef(c),s=useResizeObserved(useMemo(function(){return[o]},[o]),getElementHeight),t=_slicedToArray(s,1),u=t[0],v=useCalculateVisiblePosition(o.current,i,p);return useScroll(o,v,e),useEffect(function(){e&&v()},[u,e]),useEffect(function(){e?(q.current=calculateSavedSizes(q.current,p),m(calculateBounds(q.current,p,h,b))):m([[0,0],[0,b]])},[].concat(_toConsumableArray(h),[p,b,e])),useEffect(function(){e&&r.current&&l[1][1]+1>=b&&r.current(b)},[l[1][1],e]),useEffect(function(){var a=[0,0],c=[[0,0],[0,e?defaultItemsCalculationCount:b]];m(function(a){return arraysIsEq(a[0],c[0])&&arraysIsEq(a[1],c[1])?a:c}),i(function(b){return arraysIsEq(b,a)?b:a})},[e]),{listRefs:n,scrollElementRef:o,slice:l[1],spaceTop:l[0][0]}};
//# sourceMappingURL=useVirtualScroll.js.map